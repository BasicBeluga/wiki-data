So there are groups now where you can put your vehicles in.

What about computer-generated groups that contain vehicles that match the same properties, like
* use the same station
* are in the same shared orders *group*
* did negative profit / less than 20k profit / more than 20k profit last year (red, yellow, green dot)
* same model
* same network

Groups are powerful because you can happily apply "mass commands" like "send to depot" or "replace" on all vehicles in a group.

Lets see what this could look like.

= Idea 1: two more simple categories: "same station" and "shared ordes" =

This first and minimalistic (and most realistic) idea only features two new group "categories": "same station" and "shared orders". On Ideas how to implement a more general group management concept have a look at idea 2 below.

== Detailed Feature Concept ==

Imagine playing OTTD. You want to have a look at all your trains. You press "list trains" buttons from the upper menu. In older versions of OTTD a window similar to this appears:

[[File:en/Archive/Community/Users/FVL without groups.png]]

Nice. But note the little difference in the upper right corner. This will expand your vehicle list to the new-styled vehicle list with groups:

[[File:en/Archive/Community/Users/FVL with groups.png]]

This window works like the window we know from ottd060. But again, note the little difference in the upper left corner of the window. It's a drop down menu with currently selected "Groups". Lets click on that.

[[File:en/Archive/Community/Users/FVL with groups and dropdown clicked.png]]

You can choose two more entries, lets name them "categories" as they are different from groups:
* '''same station''', which allows you to get groups of vehicles that ''use the same station''
* '''shared orders''', which allows you to get groups of vehicles that ''have the same orders''

These categories contain computer generated groups that contain the corresponding vehicles.

With these groups available you can do further action. 

Now this slightly modified vehicle list window can replace all other vehicle lists of the game. Which are - as far as I know - these two:

[[File:en/Archive/Community/Users/FVL - same station.png]]

# open the station window
# click the little "show all trains to this station" button. At this point we get the vehicle list as expected.
# click the "extend window" button. Now we see whats really behind the window: just a group of the type "same station".

Note1: you can apply all commands under "manage list" to the vehicles shown. This is much more consistent compared to what we have now.

Note2: create/delete/rename group is grayed out as this makes no sense to vehicles groups in the "same station" category.

Note3: drag&drop should not be allowed

The same thing for the "shared orders":

[[File:en/Archive/Community/Users/FVL - shared orders.png]]

# open the orders menu of a vehicle
# click the little "show all trains that share these orders" button. Again this window looks familiar.
# click on the expand button. Again you see it's just a group.

Note1:  Deleting a "shared orders" group means: every vehicle in the group gets a unshared copy of the orders.

Note2: Also creating new (empty) shared orders and giving them a appropriate name makes sense.

Note3: you can easily drag and drop the vehicles to put them into shared orders groups. (also if these are on other railway networks... =()

== protect from global auto replace ==

Needs a slight different behavior: it (un-)flags the single trains in the group. This means there are groups where some trains are protected and some are not.



= even more general vehicle group management with auto-groups =

This idea includes the simple idea 1 but makes the group principle much more general (and much more powerful).

Here is a group hierarchy that supports network related grouping of trains as well as user defined groups.

Don't be afraid, the player won't see the complete list any ever.

'''Bold''' are main entries that exist all the time; all other entries are game dependent.

 '''all trains'''
   '''tagged trains''' 
     user defined name 
     all my longest trains 
   '''untagged trains'''
   '''grouped trains'''
     my best trains
     these often cause traffic jams
     old trains to be refitted
   '''partial rail networks'''
     partial rail network001 (shows all trains on this partial network)
       Lines                 (what is now called "shared orders")
         Line001             (renaming lines would be nice)
         Line002
       stations
         London West         (shows all trains using this station)
         New York
     partial rail network002 (for example, trains here don't have any shared orders)
       stations
         Berlin
         Rome
     partial rail network003 (renaming networks would be nice)
       stations
         Berlin
         Rome
 '''all road vehicles'''
   '''tagged road vehicles'''
   '''untagged road vehicles'''
   '''grouped road vehicles'''
   '''partial road vehicles networks'''
     partial road vehicle network004
        stations
          Rome
          Rome bus stop
 '''all ships'''    (content not shown)
 '''all aircraft''' (content not shown)
 '''networks'''
   network001      (shows all vehicles these got a "sell" or a "request" button)
     stations      (all stations of this network)
       London West (shows all vehicles using this station even if they are of different types)
       New York Main Station
       Berlin
       Rome
       Rome bus stop
     partial rail network001         (same content like above)
     partial rail network002         (same content like above)
     partial road vehicle network004 (same content like above)
   network002
     partial rail network003
 '''user defined auto-groups''' (define your own criteria in some input box)
   old trains                 (train age>15)
   old vehicles making loss   (age>15 profit<0)
   alte Klapperkisten         (reliability<50 max_speed<100)
   long trains on net2        (train group=network002 wagons>10)
   worthless ships            (ship value<2000)
   red                        (profit<0)
   yellow                     (profit>0 profit<20k)
   green                      (profit>20k)

'''tagged trains''' and '''untagged trains''' is what we have right now. Each trains can be in ''only one'' of the subgroups at most. They get a group tag visible in the minimized vehicle window.

'''grouped trains''' is something similar. These are also user defined groups, but vehicles are allowed to be placed in several groups at a time.

'''networks''' are independent networks which may contain mixed stations and mixed vehicle types. If you sold a network, you can just "change color" and no vehicle will ever complain about being lost or not finding a station. Thats why partial networks are defined like this: 

'''partial networks''' are coherent networks of one and the same vehicle type. Note the difference to ''networks'', which include all connected partial networks of other vehicle types. Examples for partial networks:
* All tracks, depots, stations a train could possibly reach traveling on the tracks belong to one partial network.
* all depots, road stations a bus/truck has in its orders list, and recursively all other road vehicles/stations of the road vehicles visiting the same stations.
:* Roads (and canals) have a special status because every player can use them. The company owned roads connecting partial road networks belong to that network at players choice. This affects the possible "sell network" or the "estimate (partial) network value" features.
:* partial aircraft / ship networks are defined similar to the partial road networks: all vehicles (of the same type (road, air, water) using the same station and all stations that are in the vehicle's orders list are traversed recursively.

To have the powerful group commands at hand for a variety of vehicle groups, it makes sense to have groups for many vehicle properties. '''user defined auto-groups''' allows the player to define own criterias to auto-group vehicles. All properties can be used including something like "belongs to group...".

= conclusion =

The better the group handling, the better and more convenient you can mange a huge amount of vehicles.

Of course first priority is to keep the game as efficient as possible regarding cpu usage and network/internet bandwidth. Especially for the vehicle network features there are deeper examinations necessary.

= web links =

related Flyspray tasks {{en/Flyspray|1324}}, {{en/Flyspray|1448}}, {{en/Flyspray|1042}}, {{en/Flyspray|1321}}

Forum: http://www.tt-forums.net/viewtopic.php?f=32&t=37075