[[Translation:en/Archive/Compilation and Ports/Compiling on Windows using MinGW]]
[[Category:en/Development/Compiling OpenTTD]]
[[Category:en/Archive/Program Descriptions]]

__FORCETOC__

==Introduction==
This page will contain guidelines for compiling OpenTTD in Win32 with MinGW.

==Information==
* Source tested: OTTD SVN.
* Packages used here:
** [http://prdownloads.sf.net/mingw/MSYS-1.0.11-2004.04.30-1.exe?download MSYS-1.0.11]
** [http://prdownloads.sf.net/mingw/MinGW-5.0.2.exe?download MinGW-5.0.2] (get this updated [http://www.tt-forums.net/download.php?id=46800 mingw.ini] file)
*** binutils-2.16.91-20060119-1
*** gcc-core-3.4.5-20060117-1
*** gcc-g++-3.4.5-20060117-1
*** mingw-runtime-3.9
*** w32api-3.6
** zlib-1.2.3 ([http://prdownloads.sourceforge.net/libpng/zlib-1.2.3.tar.gz?download sources] and [http://prdownloads.sf.net/mingw/zlib-1.2.3-mingwPORT-1.tar.bz2?download mingwPORT patches])
** libpng-1.2.8 ([http://prdownloads.sourceforge.net/libpng/libpng-1.2.8.tar.bz2?download sources] and [http://prdownloads.sf.net/mingw/libpng-1.2.8-mingwPORT.tar.bz2?download mingwPORT patches])
** directx 9.0c DevPak ( from http://www.g-productions.net/ )
* Others
** [http://subversion.tigris.org/files/documents/15/31072/svn-win32-1.3.1.zip SVN], to retrieve latest OTTD code.
** SDL will not be used here.

==Setting up MinGW==
# Copy the updated mingw.ini to the folder you downloaded the MinGW 5.0.2 install and un it.
# On the install, select <i>Candidate</i>, then select the <i>Minimal install</i> plus the <i>g++ compiler</i>.
# Run the MSYS install.
#* You will see the following messages after GUI:
#* {{en/Box|This is a post install process that will try to normalize between<br>your MinGW install if any as well as your previous MSYS installs<br>if any.  I don't have any traps as aborts will not hurt anything.<br>Do you wish to continue with the post install? [yn ]}} Input "y". 
#* {{en/Box|Do you have MinGW installed? [yn ]}} Input "y".
#* {{en/Box|Please answer the following in the form of c:/foo/bar.<br>Where is your MinGW installation?}} Input your MinGW installation path.  If you mistyped it, the best solution for newbies is to re-install MSYS.

==Setting up SVN==
# Unzip the SVN package into your user folder on MSYS (ex: c:\msys\home\YourUser)

==Setting up MSYS==
# Copy these files to your user folder: .inputrc , .profile and get_latest_openttd.sh (TODO: attach the files)

==Testing the MinGW installation==
* Run the following commands.{{en/Box|make -v<br>gcc -v}}
* They should output something.  Check if something goes wrong.
* Run MSYS.

==Compiling zlib==
# Obtain the source code of zlib from http://www.gzip.org/zlib/
# Extract the source code to a folder.
# Run MSYS, change the working directory to the source folder.
# Run: {{en/Box|./configure<br>make<br>make test}} You should see: {{en/Box|*** zlib test OK ***}}
# Run: {{en/Box|1=make install prefix=/mingw}}
# Compiling completed.

==Compiling OTTD==
'''If you cannot compile, DON'T PANIC.  Sometimes it may be due to coding errors.'''

: The followings can be done in MSYS mode or Win32 command mode.
# Obtain OTTD source.  Please refer to [[en/Development/FAQ development#how-can-i-obtain-the-source-code|How can I obtain the source code?]]
# Change the working directory to the OTTD source folder.
# Create <code>Makefile.config</code>:
#: Run: {{en/Box|make Makefile.config}}
#: That should be OK if some error about <code>ls</code>, <code>/bin/sh.exe</code> and <code>svnversion</code> is shown.  It should say: {{en/Box|make: Makefile.config is up to date.}}
#: Then the file will be created in the folder.
# Modify the <code>Makefile.config</code>:
#: Change the following parameters: {{en/Box|1=STATIC:=<br>WITH_ZLIB:=1<br>WITH_SDL:=<br>STATIC_ZLIB_PATH:=&#x2f;mingw&#x2f;lib/libz.a<br>WIN32:=1<br>UNIX:=<br>OSX:=<br>FREEBSD:=<br>MORPHOS:=<br>BEOS:=<br>SUNOS:=<br>CYGWIN:=<br>MINGW:=1}}
#: Some slots are made empty to disable.
#: Don't change the <code>Makefile.config</code> into Win32 txt format.  Otherwise all changes will be lost.
# Run {{en/Box|make}} Some warnings will be shown, but they do not matter.
# Note from DaffyDuck: I had to use the command <code>mingw32-make</code> rather than just make.
# The compiling is complete when the <code>openttd.exe</code> file is made.

==Testing OTTD==
# Copy the following files from <code>(TTD)\data\</code> to <code>(OTTD)\data\</code>:{{en/Box|sample.cat<br>trg1r.grf<br>trgcr.grf<br>trghr.grf<br>trgir.grf<br>trgtr.grf}}
# Run <code>openttd.exe</code>.
# Enjoy!