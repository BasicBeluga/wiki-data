[[Translation:en/Archive/Compilation and Ports/Compiling on Windows using MinGW]]
[[Category:en/Development/Compiling OpenTTD]]
[[Category:en/Archive/Program Descriptions]]

__FORCETOC__

==Introduction==
This page will contain guidelines for compiling OpenTTD in Win32 with MinGW.

==Information==
* Source tested: OTTD r1213.
* Packages used here:
** [http://prdownloads.sf.net/mingw/MSYS-1.0.10.exe?download MSYS-1.0.10]
** [http://prdownloads.sf.net/mingw/MinGW-3.1.0-1.exe?download MinGW-3.1.0-1]
** binutils-2.15.91-20040904-1
** gcc-core-3.4.2-20040916-1
** gcc-g++-3.4.2-20040916-1
** mingw-runtime-3.5
** w32api-3.1
** zlib-1.2.1 ([http://prdownloads.sf.net/gnuwin32/zlib-1.2.1-1-lib.zip?download lib] and [http://prdownloads.sf.net/gnuwin32/zlib-1.2.1-1-bin.zip?download bin])
* Others
** SDL will not be used here.
** [http://subversion.tigris.org/files/documents/15/18207/svn-1.1.1-setup-2.exe SVN] will not be used here, however it is recommended to have it.

==Setting up MinGW==
# Download the following files from http://sourceforge.net/projects/mingw/ in Package '''Current''':<br>(note: later minGW releases auto-download the tar files, so you'll only need the two exe's)
#* MSYS-(ver).exe
#* MinGW-(ver).exe
#* binutils-(ver).tar.gz
#* gcc-core-(ver).tar.gz
#* gcc-g++-(ver).tar.gz
#* mingw-runtime-(ver).tar.gz
#* w32api-(ver).tar.gz
# Run MinGW-(ver).exe to install MinGW.
# Run MSYS-(ver).exe to install MSYS.
#* You will see the following messages after GUI:
#* {{en/Box|This is a post install process that will try to normalize between<br>your MinGW install if any as well as your previous MSYS installs<br>if any.  I don't have any traps as aborts will not hurt anything.<br>Do you wish to continue with the post install? [yn ]}} Input "y". 
#* {{en/Box|Do you have MinGW installed? [yn ]}} Input "y".
#* {{en/Box|Please answer the following in the form of c:/foo/bar.<br>Where is your MinGW installation?}} Input your MinGW installation path.  If you mistyped it, the best solution for newbies is to re-install MSYS.
# Set PATH to the bin folder in MinGW and MSYS, to enable *nix commands in your shell.
# Put all *.tar.gz in MinGW folder, run the following line for each files:{{en/Box|tar -xzvf (file)}}
# The setup is complete.

==Testing the MinGW installation==
* Run the following commands.{{en/Box|make -v<br>gcc -v}}
* They should output something.  Check if something goes wrong.
* Run MSYS.

==Compiling zlib==
# Obtain the source code of zlib from http://www.gzip.org/zlib/
# Extract the source code to a folder.
# Run MSYS, change the working directory to the source folder.
# Run: {{en/Box|./configure<br>make<br>make test}} You should see: {{en/Box|*** zlib test OK ***}}
# Run: {{en/Box|1=make install prefix=/mingw}}
# Compiling completed.

==Compiling OTTD==
'''If you cannot compile, DON'T PANIC.  Sometimes it may be due to coding errors.'''

: The followings can be done in MSYS mode or Win32 command mode.
# Obtain OTTD source.  Please refer to [[en/Development/FAQ development#how-can-i-obtain-the-source-code|How can I obtain the source code?]]
# Change the working directory to the OTTD source folder.
# Create <code>Makefile.config</code>:
#: Run: {{en/Box|make Makefile.config}}
#: That should be OK if some error about <code>ls</code>, <code>/bin/sh.exe</code> and <code>svnversion</code> is shown.  It should say: {{en/Box|make: Makefile.config is up to date.}}
#: Then the file will be created in the folder.
# Modify the <code>Makefile.config</code>:
#: Change the following parameters: {{en/Box|1=STATIC:=<br>WITH_ZLIB:=1<br>WITH_SDL:=<br>STATIC_ZLIB_PATH:=&#x2f;mingw&#x2f;lib/libz.a<br>WIN32:=1<br>UNIX:=<br>OSX:=<br>FREEBSD:=<br>MORPHOS:=<br>BEOS:=<br>SUNOS:=<br>CYGWIN:=<br>MINGW:=1}}
#: Some slots are made empty to disable.
#: Don't change the <code>Makefile.config</code> into Win32 txt format.  Otherwise all changes will be lost.
# Run {{en/Box|make}} Some warnings will be shown, but they do not matter.
# Note from DaffyDuck: I had to use the command <code>mingw32-make</code> rather than just make.
# The compiling is complete when the <code>openttd.exe</code> file is made.

==Testing OTTD==
# Copy the following files from <code>(TTD)\data\</code> to <code>(OTTD)\data\</code>:{{en/Box|sample.cat<br>trg1r.grf<br>trgcr.grf<br>trghr.grf<br>trgir.grf<br>trgtr.grf}}
# Run <code>openttd.exe</code>.
# Enjoy!