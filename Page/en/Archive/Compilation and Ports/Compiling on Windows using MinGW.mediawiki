[[Translation:en/Archive/Compilation and Ports/Compiling on Windows using MinGW]]
==Introduction==
This page will contains guideline of compiling Open Transport Tycoon in Win32 with MinGW.
==Information==
* Source tested: OTTD r1213.
* Packages used here:
** MSYS-1.0.10
** MinGW-3.1.0-1
** binutils-2.15.91-20040904-1
** gcc-core-3.4.2-20040916-1
** gcc-g++-3.4.2-20040916-1
** mingw-runtime-3.5
** w32api-3.1
** zlib-1.2.1
* Others
** SDL will not be used here.
** SVN will not be used here, however it is recommended to have it.

==Setting up MinGW==
# Download the following files from http://sourceforge.net/projects/mingw/ in Package '''Current''':
#* MSYS-(ver).exe
#* MinGW-(ver).exe
#* binutils-(ver).tar.gz
#* gcc-core-(ver).tar.gz
#* gcc-g++-(ver).tar.gz
#* mingw-runtime-(ver).tar.gz
#* w32api-(ver).tar.gz
# Run MinGW-(ver).exe to install MinGW.
# Run MSYS-(ver).exe to install MSYS.
#* You will see the following messages after GUI:<box><code>This is a post install process that will try to normalize between<br>your MinGW install if any as well as your previous MSYS installs<br>if any.  I don't have any traps as aborts will not hurt anything.<br>Do you wish to continue with the post install? [yn ]</code></box>
#* Input "y".<box><code>Do you have MinGW installed? [yn ]</code></box>
#* Input "y".<box><code>Please answer the following in the form of c:/foo/bar.<br>Where is your MinGW installation?</code></box>
#* Input your MinGW installation path.  If you miss-typed it, the best solution for newbies is to re-install MSYS.
# Set PATH to the bin folder in MinGW and MSYS, to enable *nix commands in your shell.
# Put all *.tar.gz in MinGW folder, run the following line for each files:<box><code>tar -xzvf (file)</code></box>
# The setup is completed.

==Testing the MinGW installation==
* Run the following commands.<box><code>make -v<br>gcc -v</code></box>
* They should output something.  Check if something goes wrong.
* Run MSYS.

==Compiling zlib==
# Obtain source code of zlib from http://www.gzip.org/zlib/
# Extract the source code to a folder.
# Run MSYS, change the working directory to the source folder.
# Run: <box><code>./configure<br>make<br>make test</code></box> You should see: <box><code>*** zlib test OK ***</code></box>
# Run: <box><code>make install prefix=/mingw</code></box>
# Compiling completed.

==Compiling OTTD==
'''If you cannot compile, DON'T PANIC.  Sometimes it may deal to coding errors.'''
: The followings can be done in MSYS mode or Win32 command mode.
# Obtain OTTD source.  Please refer to [[en/Development/FAQ development#how-can-i-obtain-the-source-code|How can I obtain the source code?]]
# Change the working directory to the OTTD source folder.
# Create <code>Makefile.config</code>:
#: Run: <box><code>make Makefile.config</code></box>
#: That should be OK if some error about <code>ls</code>, <code>/bin/sh.exe</code> and <code>svnversion</code> is shown.  It should say: <box><code>make: Makefile.config is up to date.</code></box>
#: Then the file will be created in the folder.
# Modify the <code>Makefile.config</code>:
#: Change the following parameters: <box><code>STATIC:=<br>WITH_ZLIB:=1<br>WITH_SDL:=<br>STATIC_ZLIB_PATH:=/mingw/lib/libz.a<br>WIN32:=1<br>UNIX:=<br>OSX:=<br>FREEBSD:=<br>MORPHOS:=<br>BEOS:=<br>SUNOS:=<br>CYGWIN:=<br>MINGW:=1</code></box>
#: Some slots are made empty to disable.
#: Don't change the <code>Makefile.config</code> into Win32 txt format.  Otherwise all changes will be lost.
# Run <box><code>make</code></box> Some warnings will be shown, but doesn't matter.
# The compiling is completed when <code>openttd.exe</code> is made.

==Testing OTTD==
# Copy the following files from <code>(TTD)\data\</code> to <code>(OTTD)\data\</code>: <box><code>sample.cat<br>trg1r.grf<br>trgcr.grf<br>trghr.grf<br>trgir.grf<br>trgtr.grf</code></box>
# Run <code>openttd.exe</code>.
# Enjoy!