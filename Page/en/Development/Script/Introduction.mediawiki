[[Translation:en/Development/Script/Introduction]]
To start, the language to write your AI in, is Squirrel. Squirrel is a very simple and C++ like scripting-language. For an introduction in Squirrel check the [[en/Development/Script/Squirrel|Squirrel Introduction]] page. The reason we picked Squirrel, is that it looks very similar to C++.

In this introduction we take you through the process of creating a basic AI. While doing so, we will explain to you the very basics you need to create an AI and an AI in OpenTTD. For advanced AI handling we suggest you to buy a good book. The end-result of this tutorial can be found back in the 'example' directories.

==Creating your own AI==

Of course you want to start with your own AI.

A general rule of the thumb is to write extensive documentation for your AI, so after a few days you can easily remember what the functions are supposed to do. Another way to help with this is to split the AI into smaller, logical files.

===Squirrel===
* Create a new directory in 'bin/ai/' (source-builds) or 'ai/' (binary-builds). For example 'MyNewAI'.
* Create a file called main.nut. This is important as the Squirrel loader looks for main.nut in all subdirectories. If it doesn't find main.nut, the directory is considered to be something else, and your AI won't be loaded.
* Open main.nut and then continue reading the next section.

==Register==

You want to let OpenTTD know you have an AI that wants to take over a company. For this, you need to add a class that extends AIFactory:

 class FMyNewAI extends AIFactory {
   function GetAuthor()      { return "Newbie AI Writer"; }
   function GetName()        { return "MyNewAI"; }
   function GetDescription() { return "An example AI by following the tutorial at http://wiki.openttd.org/"; }
   function GetVersion()     { return 1; }
   function GetDate()        { return "2007-03-17"; }
   function CreateInstance() { return "MyNewAI"; }
 }

What this does is tell OpenTTD how your AI is called, its version, and other general information. After this you need to create an instance of the class.
Squirrel:

 /* Tell the core we are an AI */
 iFMyNewAI <- FMyNewAI();

This is enough to initialise your AI. But, we are not quite there yet to give it a first run. We don't have a real AI yet, only a piece of code that tells what your AI is, and who wrote it. So, let's make a class that will be our AI.

==Your First AI==

To do this, you need to extend AIController.

 class MyNewAI extends AIController {
   stop = false;
 
   function Start();
   function Stop();
 }
 
 function MyNewAI::Start()
 {
   while (!this.stop) {
     print("I am a very new AI with a ticker called MyNewAI and I am at tick " + this.GetTick());
     this.Sleep(50);
   }
 }
 
 function MyNewAI::Stop()
 {
   this.stop = true;
 }

The first block creates the class extending AIController. We initialise the value stop to 'false'. The second blocks creates a Start() functions, which is called once when your AI is started. If you exit from this function, your AI dies. Therefore we create a while() which only stops when the Stop() function sets the stop to 'true'. 
To avoid your AI eating up all the CPU of your computer (and thus stopping the game itself from running), it is wise to put something in the loop to delay the AI. You do this with the Sleep() command. You will see when we start this AI in a moment, that you get a print line in your console every 50 ticks.

So, let's start our AI. As AIs are currently picked randomly from all AIs that are registered, it can be a bit hard to get your AI started if you're just relying on chance. Later there will be added a GUI that can control this, but for now you have to start OTTD with the following arguments:

Linux etc
 ./openttd -a "MyNewAI"

Windows
 openttd.exe -a "MyNewAI"

Additionally, on Windows Vista you will need to run openttd.exe as administrator. Either right click and choose "Run as Administrator" each time, or turn off UAC for Administrators ([http://www.howtogeek.com/howto/windows-vista/disable-user-account-controluac-for-administrators-only/ Instructions]). If OpenTTD is not run as administrator the AI directories will be invisible to the executable, and loading any AI will result in an "The AI named 'XYZ' is unknown or not suitable" error.

Make sure to change your difficulty settings so that AIs start immediately, and add 1 or more AIs. Soon you will see a new company starting, hopefully with your AI attached. If you open the console ( '''`''' key) you will see a nice line printing we are active. You can also manually start your newly created AI with the command
 start_ai MyNewAI

You will see the compile-errors at startup, and run-errors when your AI is started. We suggest that you pay close attention to your console, as it can report useful information. Soon there will be a GUI for Squirrel errors, so it is easier for you to read.

Unfortunately the output to stdout/stderr in Windows appears to be broken at the moment. You can redirect the output to the in-game console by opening this console and typing
 developer 2
Enable output of <code>print</code> statements from your AI by typing
 debug_level ai=3
If you can't see compile errors (but keep getting errors like 'The AI named "MyNewAI" is unknown or not suitable' when using <code>start_ai</code>), then you can also get a copy of the command line Squirrel interpreter <tt>sq.exe</tt> yourself and run
 sq.exe -c /path/to/openttd/ai/mynewai/main.nut

So, there you have your first AI. Of course now we need to add functions. For this we advise you continue to the next chapter [[en/Development/Script/Basics|Basics]]. You only have to know that all your code should go in Start(). One more thing you should know: never create global variable. Keep everything in your class instance. But this is just a house-rule and if you don't know what it means, it doesn't really matter at this point.

[[Category:en/Development]]
[[Category:en/Development/Script/NoAI]]