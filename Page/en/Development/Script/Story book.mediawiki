[[Translation:en/Development/Script/Story book]]
{{en/Note|This page describe ongoing work that haven't been decided to go into trunk yet}}

The Story book is a collection of Story pages that a Game Script can create. It can be used both by pure tutorials but also just about any scenario or goal script which want to build a game story. The complete book can be constructed when the game starts, or the GS can add pages eg. after the completion of a task/goal.

[[File:en/Story-book3.png]]

== GS API ==
Pages can be company specific or global. Each company will only show the pages that are either company specific or global.

Pages are stored in a pool. As long as you only append pages, they will be added at the end of the book.

While a GS can remove a page, it will cause the next page to get the ID of this page. So it is only recommended to remove all pages or keep all pages.

=== Methods ===
Check if a given ID is a valid story page
 bool GSStoryPage.IsValidStoryPage(story_page_id)

Create a new story page. Returns the Id of the created story page.
 StoryPageID GSStoryPage.New(company, text)

Remove a story page.
 bool GSStoryPage.Remove(story_page_id)

Update the text of a given story page.
 bool GSStoryPage.SetText(story_page_id, text)

Update/set the title of a given story page. The title is used in the page selector, so don't make it too long. If no title is set, the gui will display "Page {n}" in the page selector.
 bool GSStoryPage.SetTitle(story_page_id, title)

Show a story page. If a global page is given, all clients are affected. Otherwise only the clients that are connected to the company related to the page.
 bool GSStoryPage.Show(story_page_id)

=== Different ways to program the Story Book ===
# At startup of GS, call GSStoryPage.New to create all your pages (as global pages). This can be used if you just want to provide some pages of text which is equal for all companies and all pages should always be visible.
# Create just one or a few pages at start (of game or company). Later when a task that have been described on the last page is completed, call GSStoryPage.New to add a new page and then GSStoryPage.ShowPage to skip to that page. This method allows both to not reveal all pages directly but also having multiple paths to go in the story depending on whatever you want.

If an API is added to restrict showing further pages until a goal have been completed, a complete book could be created at script start. All goals could also be added at start or add new ones as previous ones have been marked as completed (to not show all goals in the goal list at start). 

== Future plans ==
* Allow a Story Page to list one or more Goals which will get displayed below the text with.
* Add a GS API to show a specific page (and open the window if it is not open yet)
* Maybe allow referenced goals to be blocking the GUI to progress to next page until they have all been completed.
* Allow adding one or more answers for a page. (eg. to allow creating a chapter selection page)

=== Alternative A) Click-on-text ===
The idea here is to implement [[en/Development/Design Drafts/Scripts/Click on String|click-on-text]] and in OpenTTD turn {TOWN}, {INDUSTRY} etc. from GS lang file into clickable text parts. When a user click on these, the main viewport moves to the location of the town, industry, etc.

For the user, this is probably the most elegant solution, although wrongly used it can be hard to discover.

=== Alternative B) Stacked content ===
The idea here is that each Story Page is a list of items. An item can be a piece of text or a reference to a town, industry etc. When a reference is used, OpenTTD will render some text that identifies the industry along with a button to go there.