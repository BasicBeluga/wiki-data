[[Translation:en/Manual/Game Mechanics/Main Page]]
Here you can find information about how OpenTTD calculates in-game figures.

You always wanted to know how the station-rating was built up? How goods-distribution works? Here you can find it!

[[Category:en/Manual/Playing]]
[[Category:en/Development]]

==Player rating==

Each part of the player rating is a linear function, ie. earning 50% of the target for a component will give 50% of the points allocated for that component. Where components involve monetary amounts, these are converted to the currency of the current game; internally these amounts are stored as the pound amount.

{| border="1"
! Component !! Target !! Points (min) !! Points (max)
|-
|Vehicle count||>=120||0 points for 0 vehicles||100 points for at least 120 vehicles
|-
|Number of station parts player owns||>=80||0 points for 0 parts||100 points for at least 80 parts
|-
|Minimum profit of vehicles at least two years old||>=£10,000||0 points for loss or £0||100 points for at least £10,000
|-
|Minimum monthly revenue earned in past 3 years||>=£50k||0 points for $0||50 points for at least £50k
|-
|Maximum monthly revenue earned in past 3 years||>=£100k||0 points for $0||100 points for at least £100k
|-
|Units of cargo delivered in past year||>=40,000||0 points for 0 units||400 points for at least 40,000 units
|-
|Number of types of cargo delivered in past quarter||>=8||0 points for 0 cargo-types||50 points for at least 8 cargo-types
|-
|Current cash in bank||>=£10m||0 points for $0||50 points for at least £10m
|-
|Current loan from bank||$0||0 points for >£250k||50 points for £0
|-
! Totals !!!! 0 points !! 1000 points
|}

<table>
<tr><td style="background:none; border:0px">
{| border="1" cellpadding="5"
!colspan="2"|Company League Table ratings
|-
!Rating!!Title
|-
|0 to 127||Engineer
|-
|128 to 255||Traffic Manager
|-
|256 to 383||Transport Coordinator
|-
|384 to 511||Route Supervisor
|-
|512 to 639||Director
|-
|640 to 767||Chief Executive
|-
|768 to 895||Chairman
|-
|896 to 959||President
|-
|960 to 1000||Tycoon
|}
</td><td style="background:none; border:0px">
{| border="1" cellpadding="5"
!colspan="2"|2050 High Score ratings
|-
!Rating!!Title
|-
|0 to 319||Businessman
|-
|320 to 447||Entrepreneur
|-
|448 to 575||Industrialist
|-
|576 to 703||Capitalist
|-
|704 to 831||Magnate
|-
|832 to 959||Mogul
|-
|960 to 1000||Tycoon of the Century
|}
</td></tr></table>

==Station rating==
This section shows the factors that affect how much of an industry's product is delivered to to a station.

{| border="1"
!Factor!!Condition!!Rating points!!Rating %
|-
|Statue in town of station||Built||26|| 10%
|-
| Max speed of last vehicle entering station || Above 85 km/h (52 mph)|| (Speed (km/h) - 85) / 4 || 0% to 17%
|-
|rowspan="3"|Age in years of last vehicle entering station || 2 || 10|| 4%
|-
| 1 || 20 || 8%
|-
| 0 || 33 || 13%
|-
|rowspan="4"|Days since last cargo pickup<br> Multiply days by 4 if last vehicle was a ship.|| 13 to 21 || 25 || 10%
|-
| 7 to 12 || 50 || 20%
|-
| 4 to 6  || 95 || 37%
|-
| less than 4 || 130 || 51%
|-
|rowspan="6"|Units of cargo waiting at station || More than 1500 || -90 || -35%
|-
| 1001 to 1500 || -35 || -14%
|-
| 601 to 1000 || 0 || 0%
|-
| 301 to 600 || 10 || 4%
|-
| 101 to 300 || 30 || 12%
|-
| less than 100 || 40 || 16%
|}

Divide the total rating points by 255 to get the percent rating.  The maximum possible rating is 107%, but the game limits it to 100%.  


Every 2.5 days station ratings are computed; ratings can't change by more than 2% per cycle.

==Local Authority Ratings==
Code for town ratings is in town.h, town_cmd.c, tree_cmd.c, and road_cmd.c.

Ratings limit some player actions, and can also change based on some actions.  

<table width="100%">
<tr><td style="background:none; border:0px">
{| border="1" cellpadding="5"
|-
!Rating points!!Rating
|-
| -1000 to -400 || Appalling
|-
| -399 to -200 || Very Poor
|-
| -199 to 0 || Poor
|-
| 0 to 200 || Mediocre
|-
| 201 to 400 || Good
|-
| 401 to 600 || Very Good
|-
| 601 to 800 || Excellent
|-
| 801 to 1000 || Outstanding
|}
</td><td style="background:none; border:0px">
{| border="1" cellpadding="5"
|-
!Player action!!Required rating!!Effect on rating
|-
|Build a station|| -200 ||
|-
|Destroy an 'edge' piece of road|| 0 / 48 / 96 ||-18
|-
|Destroy a 'centre' piece of road|| 0 / 48 / 96 ||-50
|-
|Destroy a city tunnel or bridge|| 128 / 192 / 384 ||-250
|-
|Destroy building|| 40 to 300 ||-40 to -300
|-
|Plant tree on clear square|| ||+7, up to 220.
|-
|Clear a tile with trees|| ||-35
|-
|Successful bribe|| ||+200
|-
|Unsucessful bribe|| ||Set to -50
|}
Required rating is listed as Permissive / Neutral / Hostile.
</td></tr></table>

Each month players' ratings automatically change:
* Rating goes up by 5 if it is less than 200.
* Rating goes up by 12 for each station that has transferred cargo in the last 20 days.
* Rating goes down by 15 for each station that has not transferred cargo in the last 20 days.


'''Example:'''<br>
A player has a rating of -300, (Very Poor), 2 active stations and 1 unactive station at a town.<br>
5pts + 2 * 12pts - 15pts = 14pts points gain per month.<br>
500pts / 14pts/mo = 36 months before the town will let him build another station.

==Industry Production==
Here is how the game determines how much cargo an industry produces per month.  This section lists production governed by the default [[en/Archive/Manual/Settings/Configuring patches/Economy#enable-smooth-economy|smooth economy]] patch.  Production is always a multiple of 8.

{| border="1" cellpadding="4"
!Raw Material Industry!!Produced Cargo!!Initial production range
|-
|Coal Mine||Coal||56 to 176
|-
|Forest||Wood||48 to 152
|-
|Oil Rig||Oil||56 to 176
|-
|Farm||Grain and Livestock||40 to 112
|-
|Copper Mine||Copper Ore||56 to 112
|-
|Oil Well||Oil||48 to 152
|-
|Iron Mine||Iron Ore||40 to 112
|-
|Bank||Valuables||24 to 64
|-
|colspan="5"|
|-
|Gold Mine||Gold||24 to 80
|-
|colspan="5"|
|-
|Diamond Mine||Diamonds||24 to 80
|-
|Fruit Plantation||Fruit||40 to 112
|-
|Rubber Plantation||Rubber||40 to 112
|-
|Water Supply||Water||48 to 152
|-
|Farm||Maize||40 to 128
|-
|Lumber Mill||Wood||0
|-
|colspan="5"|
|-
|Cotton Candy Forest||Cotton Candy||48 to 152
|-
|Battery Farm||Batteries||40 to 128
|-
|Cola Wells||Cola||48 to 136
|-
|Plastic Fountain||Plastic||56 to 160
|-
|Bubble Generator||Bubbles||48 to 152
|-
|Toffee Quarry||Toffee||40 to 112
|-
|Sugar Mine||Sugar||40 to 128
|}


Each month the game randomly changes some industry productions:
*There is a 2% chance that the production will go down by 4% to 23% (random).  
*There is a 2% to 4% (not random) chance that the production will go up by 4% to 23% (random).
*The more cargo that is transferred from the industry, the better the chance that production will go up.  100% cargo transfer results in a 4% chance.
*Both changes can occur in the same month, and maybe cancel each other out.
*Maximum production is 2040 units.


'''Example:'''<br>
An coal mine has 70% of its output delivered:<br>
Automatic 2% chance production will go down ~13% this month.<br>
2% + 2% * 70% = 3.4% chance production will go up ~13% this month.<br>
(1+ 1.4% * 113%) ^ 12 = 121%, the coal mine will grow an average of 21% per year.


'''Note:'''  The exact formula is more complicated.  See industry.c.

==Delivery Payment Rates==
The amount you get paid for delivering cargo is based on 4 factors: the amount of cargo you deliver, the value of the cargo, the distance you deliver it, and how on-time you deliver it.

{| border="1" cellpadding="4"
!Cargo!!Units!!Early Delivery<br> Time (days)!!Late Delivery<br> Time (days)!!Initial cargo <br> payment (pounds)
|-
|Passengers|| ||Immediate||24||£39
|-
|Valuables||Bags||1||32||£91
|-
|Livestock||Items||4||18||£53
|-
|Grain||Tons||4||40||£58
|-
|Goods||Crates||5||28||£75
|-
|Coal||Tons||7||None||£72
|-
|Steel||Tons||7||None||£69
|-
|Iron Ore||Tons||9||None||£62
|-
|Wood||Tons||15||None||£61
|-
|Oil||Kiloliters||25||None||£54
|-
|Mail||Bags||20||90||£55
|-
|colspan="5"|
|-
|Wheat||Tons||4||40||£58
|-
|Paper||Tons||7||60||£66
|-
|Gold||Bags||10||40||£71
|-
|Food||Tons||Immediate||30||£69
|-
|colspan="5"|
|-
|Rubber||Kiloliters||2||20||£54
|-
|Fruit||Tons||Immediate||15||£51
|-
|Maize||Tons||4||40||£53
|-
|Tropical Wood||Tons||15||None||£97
|-
|Copper Ore||Tons||12||None||£59
|-
|Water||Kiloliters||20||80||£57
|-
|Diamonds||Bags||10||None||£71
|-
|colspan="5"|
|-
|Sugar||Tons||20||None||£54
|-
|Toys|| ||25||None||£68
|-
|Batteries|| ||2||30||£53
|-
|Candy||Tons||8||40||£75
|-
|Toffee||Tons||14||60||£58
|-
|Cola||Kiloliters||5||75||£59
|-
|Cotton Candy||Tons||10||25||£61
|-
|Bubbles|| ||20||80||£62
|-
|Plastic||Kiloliters||30||None||£54
|-
|Fizzy Drinks|| ||30||50||£76
|}

Initial cargo payment values are for delivering 100 pieces of cargo 1 tile.  Payment goes up with inflation as the game progresses.


Late delivery penalties:
*For each day after the Early Delivery time that you deliver the cargo, you are penalized 0.4%.
*For each day after the Late Delivery time that you deliver the cargo, you are penalized an additional 0.4%.
*Maximum penalty is -88%.


'''Examples''' (no inflation):<br>
Deliver 200,000 liters of oil 20 squares in 10 days:<br>
2 * £54 * 20 squares * 100% = £2160

Deliver 100 bags of mail 100 squares in 100 days:<br>
£55 * 100 squares * (1 - 80*0.004 - 10*0.004) = £3520


'''Notes:'''
* The exact formula is much more complicated.  See economy.c.

* Distance is measured between the stations, not from the industries or by vehicle distance traveled.  It is computed by adding the differences in x and y tiles, not straight-line distance.

==Vehicle Speeds==
The game has many rules to make vehicles look move fairly realistically.  A vehicle traveling at 100kph will cross 5.6 tiles per day.

This means that for vehicle speed purposes, a tile is 429km on a side!


'''Aircraft:'''
*Aircraft fly at 8% their listed speed.
*Aircraft accelerate at about 200kph/day.
*Broken down planes fly at 27kph.
*Airport taxi speed is 12kph.


'''Road Vehicles:'''
*Road vehicles accelerate at 37kph/day.
*Road vehicles accelerate an additional 74kph/day downhill.
*Road vehicles slow down 10% of their speed per game tick uphill.  This balances out with acceleration at 34kph for all road vehicles.
*Road vehicles go around corners at half their max speed
*A "stopped" road vehicle resumes it's last speed instantly.


'''Ships:'''
*Ships accelerate at 37kph/day.
*A "stopped" ship resumes it's last speed instantly.

'''Trains:'''<br>
This data is for the [[en/Archive/Manual/Settings/Realistic acceleration|realistic train acceleration patch]].
*Trains are not affected going up or down hills if they are powerful enough.
*Trains are limited to entering and exit a depot at 61kph.
*Trains can make one 45° turn without slowing down.
*When making two or more 45° turns in the same direction, the max speed is limited as follows:
{| border="1" cellpadding="4"
!rowspan=2|Tiles between <br>double bend!!colspan=4|Max speed (kph)
|-
!Railroad!!Electric!!Monorail!!Maglev
|-
|0 (90° turn)||61||91||121||151
|-
|1||88||132||176||220
|-
|2||111||166||221||276
|-
|3||132||198||264||330
|-
|4||151||226||301||376
|-
|5||168||252||336||420
|-
|6||183||274||365||456
|-
|7||196||294||392||490
|-
|8||207||310||413||516
|-
|9||216||324||432||540
|-
|10||223||334||445||556
|-
|11||228||342||456||570
|-
|12||231||346||461||576
|}
*Train acceleration and max speed is affected by engine power, current speed, total train mass, and track incline.
*Non-Maglev train acceleration = 37 *(0.55 * Power / Speed - 1.3 * Mass + 60 * #cars + 0.0035 * Mass * Speed + 0.24 * Speed^2 - 60 * Mass of cars on slope) / Mass (kph/day)
*Maglev train Acceleration = 37 * (0.022 * Power - 0.24 * Speed^2 - 60 * Mass of cars on slope) / Mass (kph/day)
*Braking is twice acceleration.


See aircraft_cmd.c, roadveh_cmd.c, ship_cmd.c, train_cmd.c, vechicle.c for code.