[[Translation:en/Archive/OpenTTD/OpenTTD 0.7.1]]
{{fr/Traduction|en/Archive/OpenTTD/OpenTTD 0.7.1|80}}


{{fr/Archive/OpenTTD/Livraison|prec=fr/Archive/OpenTTD/OpenTTD 0.7.0|suiv=fr/Archive/OpenTTD/OpenTTD 0.7.2|date=09/06/2009}}

Vous pouvez obtenir cette version depuis [http://www.openttd.org/download-stable/0.7.1 openttd.org].

==Nouvelles fonctionnalités majeures==

* Correction de bogues
* Mises à jour de l'API de NonIA

==Journal des changements==

[http://www.tt-forums.net/viewtopic.php?f=29&t=43887 Sujet du forum]

===0.7.1 (09/06/2009)===

* Corrigé: En trouvant des ensembles de graphismes dupliqués, favoriser le plus complet (r16538)
* Corrigé: [Squirrel] Plantage pouvant se produire quand une IA était arrêtée alors qu'un ou plus générateurs étaient encore en état 'en cours' {{en/Flyspray|2942}} (r16534)
* Corrigé: [Squirrel] Ne pas copier un objet quand on vérifie juste que le pointeur vers lui n'est pas NULL (r16532)
* Corrigé: Notifier les petits OVNIs de la suppression des véhicules routiers, afin qu'ils puissent chercher quelqu'un d'autre au lieu de tomber sur un fantôme (r16525)
* Corrigé: [NonIA] Les stationIDs pour les plateformes pétrolières n'étaient pas considérés comme valides par l'API (r16529)
* Corrigé: Dessine les réservations PBS comme des sprites de terrain, resp. des sprites d'enfant sur les fondations/têtes de pont {{en/Flyspray|2959}} (r16528)
* Corrigé: Gardes-fous manquants dans l'API NonIA, permettant de lever un avertissement dans OpenTTD {{en/Flyspray|2963}} (r16524)
* Corrigé: [NonIA] Avertissement possible dans la fenêtre de débogage de l'IA quand une IA était arrêtée et qu'une compagnie humaine prenait son CompanyID {{en/Flyspray|2962}} (r16522)
* Corrigé: [NonIA] S'assurer que AIBridge::BuildBridge renvoie ce que la documentation prévoit (r16520)

===0.7.1-RC3 (03/06/2009)===

[http://www.tt-forums.net/viewtopic.php?f=29&t=43822 Sujet du forum]

* Ajout: [NonIA] AISignList qui peut être utilisée pour avoir une liste des signes valides (r16400)
* Changement: [NonIA] Arrête une IA quand elle prend trop de temps à s'initialiser ou à se charger {{en/Flyspray|2869}} (r16425)
* Corrigé: Les noms de graphismes de base doivent être uniques, donc ne pas ajouter de doublons (r16503)
* Corrigé: [NonIA] Quand une IA était suspendue en étant dans un appel de fonction (indirectement) via call/acall/pcall, OpenTTD plante. Corriger cela en interdisant aux IAs d'être suspendues en appelant via call/acall/pcall {{en/Flyspray|2935}} (r16502)
* Corrigé: [NewGRF] Invalider les caches de variable de NewGRF de la plupart des véhicules à la plupart des endroits. Surtout, ils n'étaient invalidés que pour les trains (r16480)
* Corrigé: [NewGRF] Appelle les rappels après l'initialisation des variables de véhicule (r16479)
* Corrigé: [NewGRF] La détermination des types de (sous-)cargaison les plus courants étaient erronée car quelqu'un avait confondu des variables de noms similaires (r16478)
* Corrigé: L'indicateur de chargement en 'déchargeant' avec 'pas de chargement' pointait dans la mauvaise direction {{en/Flyspray|2936}} (r16477)
* Corrigé: La réservation de voie était dessinée aux têtes de pont dans le menu (r16470)
* Corrigé: [NonIA] Un autre bogue lié au try/catch (r16454)
* Corrigé: Les véhicules routiers finissent sur le pavé quand ils sont dans une station en passant qui est supprimée à cause de faillite {{en/Flyspray|2909}} (r16448)
* Corrigé: [NonIA] AIRail::GetRailStationDirection renvoie une information incorrecte (r16440)
* Corrigé: Plantage quand une compagnie est supprimée alors qu'une liste déroulante avec les noms de compagnie est ouverte (r16430)
* Corrigé: Ne pas permettre du chargement de contenu via la console quand il n'y a pas de zlib, comme c'est déjà fait dans l'IHM {{en/Flyspray|2919}} (r16420)
* Corrigé: Certaines architectures 64 bits requièrent que size_t soit aligné sur une frontière de 8 octets; le garantir pour MemBlock (r16415)
* Corrigé: [NewGRF] Désactive les maisons multi-cases avec une population non nulle sur des cases supplémentaires, car elles provoquent des désynchronisations, car les spécifications ne le permettent pas non plus (r16383)
* Corrigé: [NewGRF] La validation des séquences UTF-8 entre 0x20 et 0xFF devrait être permise au lieu d'être traités comme des codes de contrôle (r16374)
* Corrigé: [NewGRF] Utilise un StringID valide comme secours quand des chaînes NewGRF génériques de véhicules non définies sont requises (r16366)

===0.7.1-RC2 (21/05/2009)===

[http://www.tt-forums.net/viewtopic.php?f=29&t=43656 Sujet du forum]

* Corrigé: Le type de station NewGRF précédemment sélectionné était encore mémorisé après avoir basculé sur une partie différente sans les nouvelles stations activées, empêchant les stations d'être construites (r16363)
* Corrigé: Pointeur incrémenté avec un mauvais comptage (r16361)
* Corrigé: Supprimer les dépôts invalides dans les sauvegardes TTD causé par des conversions incorrectes SVXConverter (r16357)
* Corrigé: Lecture invalide quand une sauvegarde OTTD contient VEH_INVALID (r16353)
* Corrigé: Le gestionnaire de signal peut aboutir à une boucle infinie (r16351)
* Corrigé: [NewGRF] En surchargeant les 'sons originaux', permettre uniquement d'écraser les 'sons originaux' et aucun autre qui soit chargé (r16339)
* Corrigé: Désynchronisations en supprimant des lots de gares/villes (r16329, r16328)
* Corrigé: Désynchronisations du fait que la recherche de dépôt avec une profondeur de recherche maximale ne fonctionne tout simplement pas avec les caches de YAPF {{en/Flyspray|2900}} (r16323)
* Corrigé: Les trains peuvent rester bloqués dans un dépôt quand ils veulent retourner au même dépôt {{en/Flyspray|2873}} (r16322)
* Corrigé: Dans l'éditeur de scénario, changer l'année de (démarrage de) la partie du scénario, non pas l'année (de démarrage) du jeu pour les nouvelles parties/scénarios (r16321)
* Corrigé: Le chargement des sauvegardes créées dans une révision entre 0.3.5 et 0.3.6 peut provoquer des plantages (r16320)
* Corrigé: [NonIA] Fixe les paramètres de renouvellement automatique pour les nouvelles compagnies d'IA aux valeurs par défaut, non à 0 ou aux paramètres locaux (r16316)
* Corrigé: [NewGRF] Permet d'accéder à l'âge d'une maison quand elle n'est pas encore construite (r16314)
* Corrigé: (Get|Set)TrackBits() n'est valide que pour RAIL_TILE_NORMAL et _SIGNALS (r16311)
* Corrigé: Paramètre invalide quand il est égal à la longueur d'un tableau (r16308)
* Corrigé: Fermer toutes les fenêtres avant de décharger une IA système à la fermeture de la fenêtre de chargement du contenu analysera de nouveau toutes les IAs {{en/Flyspray|2901}} (r16306)
* Corrigé: ICC (Compilateur C++ Intel) définit __GNUC__ mais pas __builtin_bswap32, donc revient à la méthode d'échange par défaut pour ICC (r16295)
* Corrigé: Les véhicules routiers étaient incapables de trouver un dépôt en tournant autour (dans certains cas), faisant que les ordres 'dépôt le plus proche' sont parfois perdus {{en/Flyspray|2893}} (r16291
* Corrigé: Incapacité à (ré)initialiser l'état de désert pour les cases inondées {{en/Flyspray|2888}} (r16290)
* Corrigé: Désynchronisation possible (en théorie) liée aux paramètres de renouvellement automatique (r16287)
* Corrigé: Plantage après utilisation de la fonction 'Réinitialisation du paysage' et suppression de tous les signes de point de passage et de bouées après avoir réinitialisé le paysage (r16280)
* Corrigé: [NewGRF] Désactive les maisons multi-cases pour lesquelles le NewGRF ne définit par bien les cases supplémentaires (r16274)

===0.7.1-RC1 (11/05/2009)===

[http://www.tt-forums.net/viewtopic.php?f=29&t=43556 Sujet du forum]

* Ajout: [NonIA] AIController::GetVersion renvoie la version de OpenTTD de la même manière que pour les NewGRFs (r16253)
* Ajout: [NonIA] AIAirport::GetPrice renvoie le coût de construction d'un aéroport (r16252)
* Ajout: [NonIA] Deux nouveaux codes d'erreur pour AITile: ERR_AREA_ALREADY_FLAT et ERR_EXCAVATION_WOULD_DAMAGE (r16171)
* Ajout: [NonIA] AITile::Get(Min|Max|Corner)Height (r16166)
* Ajout: [NonIA] Plusieurs fonctions à AIOrder pour vérifier de quelle sorte est un ordre {{en/Flyspray|2801}} (r16165)
* Ajout: [NonIA] UseAsRandomAI comme fonction dans info.nut. Quand une IA renvoie false, elle ne sera jamais choisie comme IA aléatoire (r16113)
* Ajout: [NonIA] AIOF_STOP_IN_DEPOT pour les drapeaux d'ordre dans AIOrder pour permettre les ordres d'arrêt au dépôt (r16107)
* Ajout: [NonIA] GetURL() comme fonction possible pour info.nut. Si les IAs l'implémentent, cette url est affichée quand l'IA plante, et aussi dans la fenêtre de sélection de l'IA {{en/Flyspray|2808}} (r16093)
* Changement: [NonIA] Renverse l'ordre des lignes dans la fenêtre de débogage de l'IA {{en/Flyspray|2778}} (r16091)
* Changement: Durcit la copie des chaînes dans les endroits où c'est possible (r16024)
* Changement: Utilise la langue tchèque récente pour la forme plurielle (r15965)
* Corrigé: Mauvais nombre de paramètres ou mauvais types de paramètres envoyés aux fonctions de type printf à plusieurs endroits (r16269)
* Corrigé: [NewGRF] Quand le rappel 2E renvoie une quantité de 0, ne pas transporter une unité à la gare (r16268)
* Corrigé: [NonIA] Diverses oublis dans la documentation en respectant les IDs des divers objets et des virages pour AITile::(Raise|Lower)Tile (r16267, r16266)
* Corrigé: [NonIA] Vérifie les pentes passées par l'API de meilleure façon pour la validité (r16264, r16262)
* Corrigé: [NewGRF] Interprète le positionnement de la propriété de pont 08 à 0 comme toujours disponible (r16263)
* Corrigé: [NonIA] Permet de nouveau la vérification de paramètre pour les fonctions AIController::* (r16249)
* Corrigé: [NonIA] S'assure que AITunnel::BuildTunnel renvoie ce que la documentation prévoit (r16244)
* Corrigé: [NonIA] CmdBuildTunnel peut être appelé avec des paramètres invalides depuis le code de l'API, causant des plantages ultérieurs {{en/Flyspray|2875}} (r16243)
* Corrigé: Améliore la gestion de l'ordre des cas de coin: marque l'ordre comme fait uniquement quand il l'est, obéit aux ordres de sans arrêt, ne fait que des arrêts/transformations au dépôt dans l'ordre (r16240, r16228, r16199, r16198, r16187)
* Corrigé: [NonIA] Les IAs utilisant les ordres intermédiaires d'arrêt/sans arrêt peuvent donner des ordres d'aller au dépôt (r16239)
* Corrigé: [NewGRF] ActionB should use the online parameters from GRFFile instead of the initial user-specified values from GRFConfig. Also use the values as they were set when the ActionB was executed, not as they are set when the message is shown (r16223)
* Corrigé: Possible crashes when quiting OpenTTD or forcing resizes/redraws of the screen during map generation {{en/Flyspray|2862}} (r16220)
* Corrigé: Shared orders without orders were not properly converted causing corrupt/invalid orders when loading pre 0.7 savegames {{en/Flyspray|2878}} (r16214)
* Corrigé: Hardcoded (old sized) MAX_COMPANIES constant (r16182)
* Corrigé: [Squirrel] The traps variable was not restored, causing try/catch blocks to be 'forgotten' during a suspend (r16181)
* Corrigé: Do not try to reserve path for trains crashed in station {{en/Flyspray|2866}} (r16178)
* Corrigé: Forbid joining AI companies via the 'move' and 'join' console commands/multiplayer lobby (r16176, r16175)
* Corrigé: [NoAI] AIOrder::GetOrderDestination and AIOrder::GetOrderFlags did not work on ORDER_CURRENT when the vehicle was loading/leaving in a station (r16165)
* Corrigé: [NoAI] Change WAYPOINT_INVALID to 0xFFFF from -1 as that is the value the AIs got (due to casting) (r16150)
* Corrigé: The overflowsafe type did not like dividing by int64 larger than MAX_INT32 causing division by negative numbers and small anomolies when drawing graphs {{en/Flyspray|2855}} (r16130)
* Corrigé: Road was removed when both the Remove button was active and Ctrl was pressed {{en/Flyspray|2582}} (r16119)
* Corrigé: [NoAI] Make sure AIOrder::GetDestination always returns a tile belonging to the station (16109)
* Corrigé: [NoAI] When giving an aircraft a goto-hangar order do not let it be a normal goto-station order (r16108)
* Corrigé: [NoAI] AIOrder::SetOrderFlags always removed "Service if needed" from goto-depot orders (r16106)
* Corrigé: Connect tried to validate too much of the company ID with too little information on hand {{en/Flyspray|2849}} (r16096)
* Corrigé: [NoAI] AIDebug window profiled the blitters by invalidating itself unconditionally on repaint. On the other hand it was not invalidated in other cases when needed (r16094)
* Corrigé: The language is called Slovak, not Slovakish (r16090)
* Corrigé: Insanely fast trains would not stop in time for stations/'jump' over waypoints/via stations within a tick, which would cause the order not to be processed causing the train to go in loops until (with luck) it 'hit' the tile {{en/Flyspray|2824}} (r16079)
* Corrigé: Content download progress bar 'resetting' due to mathematical overflow {{en/Flyspray|2845}} (r16071)
* Corrigé: Memory leak when querying a server multiple times (r16064)
* Corrigé: [NoAI] MOF_COND_DESTINATION was not accepted by CmdModifyOrder() (r16063)
* Corrigé: Non advanced vehicle list did not handle company switching correctly (r16054)
* Corrigé: Do not warn that crashed vehicles are getting old; upgrading them is impossible {{en/Flyspray|2740}} (r16048)
* Corrigé: The currency abbreviation for the Romanian Leu is now RON {{en/Flyspray|774}} (r16041)
* Corrigé: Dash was not able to run iconv detection (r16035)
* Corrigé: [NewGRF] Do not give "... Mines" as name to the station of oil rigs, or more general: do not add "... Mines" when the all of the cargoes are part of the liquid, passenger or mail classes {{en/Flyspray|2785}} (r16029)
* Corrigé: Storing/loading some currencies failed due to inconsistent settings "tables" {{en/Flyspray|2826}} (r16028)
* Corrigé: Usage of uninitialised memory when trying to build a random new industry, but there are no industrytypes to choose from (i.e. all appearance probabilities are zero) (r16027)
* Corrigé: "Build separate station" in the station picker would reuse deleted stations {{en/Flyspray|2818}} (r16025)
* Corrigé: 32 bpp sprites in tars would also be shown in the list of heightmaps {{en/Flyspray|2817}} (r16023)
* Corrigé: Sometimes the unregister "query" thread could be delayed so much that the network stuff was already closed and the packet would never reach the master server causing the server to appear online longer than necessary (r16022)
* Corrigé: Chance16() did not work for b = 1. Also transform the formula to not use divisions (r16006)
* Corrigé: Inconsistency between using NETWORK_NAME_LENGTH and NETWORK_CLIENT_NAME_LENGTH for the length of client names (r15988)
* Corrigé: [NewGRF] Abort production callback after 0x10000 iterations and show a messagebox blaming the NewGRF {{en/Flyspray|2787}} (r15958)
* Corrigé: [NewGRF] Set callback_param1 (var 10) to 1 only when requested (r15957)
* Corrigé: Tooltip of detailed ratings window button showed wrong message (r15943)