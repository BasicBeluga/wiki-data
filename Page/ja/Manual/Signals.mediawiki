[[Translation:en/Manual/Signals]]
{{en/Translation|origin= en/Manual/Signals
|from  = en
|to    = ja
|Percentage = 30
}}
{{ja/Manual/目次}}
''信号の建設そのものについてはチュートリアルの[[ja/Manual/Building signals|信号の設置]]を参照すること。''

'''[[ja/Manual/Railway construction|鉄道]]信号'''は[[en/Manual/Trains|列車]]運行の制御するために有用な装置である。信号は列車が進攻しようとしている場所にほかの列車が入らないようにしたり、衝突を防いだりする。これらの挙動は信号の先の線路の区間の情報を取得することで実現している。信号には大きく分けて3種類がある。1つ目が閉塞信号で、単純にその区間に列車が存在する場合に他の列車の侵入を防ぐものである。2つ目がプレ信号で、閉塞信号と似ているが、その区間からの出口が必要になる。最後がパス信号で、列車が進行しようとしている経路と他の列車がお互い干渉しないかどうかを比較してくれるものである。
'''訳者注''':以下のスクリーンショットは右側通行である。信号は進行方向に向かって右側に設置されている(左側通行の場合、信号は進行方向の左側に設置される)。

__TOC__
{{en/-}}
== 閉塞信号 ==
閉塞信号は線路を区間に分割し、列車が区間を移動するのに合わせて変化する。閉塞信号は次の区間に列車が存在する場合は次の列車を停止させるために赤を表示する。もし次の区間に列車が存在しない場合、青信号を表示する。区間は、ある信号から次の信号まで、物理的にたどり着けるすべてのタイルを同じ区間と判定する。この際、途中にいくつの分岐があるかは考慮されない。よって、ある列車が進行したとしても衝突する心配が全くない場合でも、その区間に列車が存在する場合は赤信号を表示して列車を進行させない。この点がパス信号と異なる点である。

===二方向信号===
[[File:en/Manual/2-way signals.png|frame|積載用駅での二方向信号]]
<div style="float:right">
[[File:en/Manual/Two-way signal.png]]
</div>
二方向信号はある線路上に双方向に列車が走行する場合に利用される。最も一般的な使用場所は駅の一方から列車が出入りするような終端駅である。二方向信号は右の図の例のように、次に駅に到着する列車に空いているプラットフォームを利用するように指示する。また、ほかの列車が駅に入線しようとする際に、列車が出発するのを防ぐ動作もする。

列車に2つ以上の進行方向の選択肢があり、いずれも二方向信号が存在する場合、列車は青信号のある方向に向かう。もしすべての信号が赤の場合は、最も簡単な経路を選択し、信号が青になるのを待つ。

二方向信号はオリジナルの''[[en/Archive/OpenTTD/Transport Tycoon Deluxe]]''から存在する信号である。


{{en/-}}
===一方向信号===
[[File:en/Manual/One-way signal.png|right]]

一方向信号は列車の走行を一方向に制限するものである。下の例の場合、一方向信号は列車の運行を反時計回りに制限する。

[[File:en/Manual/1-way signal loop.png|frame|center|一方向信号で形成したループ]]

通常の閉塞信号と比べて一方向信号のほうが有効な場合は主に2通りある。
*[[en/Manual/Building railway stations|RoRo駅]]は列車が反転せず、また他の列車の駅への入線を防がない駅である。このような駅は列車の出入りをより効率的にする。
*複線は2編成の列車が反転せずに運行することができる。単線では線路上に列車が存在する場合、衝突する可能性があるためにその列車と反対方向に向かう列車は線路に侵入できない。複線では片方の線路が一方通行になるので、衝突が発生せず、またほかの列車を待つ必要がない。

列車が一方向信号に誤って向かって向かってしまった場合、プレイヤーが設定で信号の設定を無効にしていない限り、その場で即反転する。よって、一方向信号を使用する際は'''すべての'''列車が正しい向きで運行していることを確認すること。信号網を構築した路線に初めて列車を走行させる場合、その列車が目的地まで正しくたどり着けるかどうか、最初から最後まで見届けるのは、信号のミスを発見するために良い方法である。

既設の二方向信号を信号ツールでクリックすると一方向信号になる。もう一度クリックすると、一方向のまま信号の向きが変わる。さらにクリックすると、二方向信号に戻る。

列車が一方向信号のある複数の線路にたどり着いた場合、目的地に向かう線路を選択する(つまり、信号が赤と青の場合に青を単純に選ぶのではなく、目的地に向かう信号が赤の場合は青になるまで待つ)。これは二方向信号とは異なる挙動である。

一方向(閉塞)信号は列車の進行方向に向いているが、技術的には、その反対を向いた信号が存在しており、その信号は常に赤を表示し、反対方向からの侵入を防いでいる。この挙動は現実世界の信号システムとは異なっており、より現実に近く効率的なジャンクション制御を行うパス信号も使い方を学ぶ際に勘違いを生じさせてしまう。

一方向信号はオリジナルの''[[en/Archive/OpenTTD/Transport Tycoon Deluxe]]''から存在する信号である。

==パス信号==
[[File:en/Manual/Yapp signalgui.png|frame|right|2つの新しい信号]]

"パス信号"はオリジナルの''Transport Tycoon''の閉塞信号ベースの信号システムを改善するために導入された。パス信号は次の信号までの経路を、その区間に入る前に予約することができる。他の列車がすでに予約済みの区間に侵入しようとした場合に、その経路が重ならない場合は、パス信号はその区間に列車を進行させる。このような機能は閉塞信号やプレ信号の組み合わせでは実現できなかった。これにより洗練された鉄道網を構築することができるようになり、ジャンクション内でのデッドロックをより防ぎやすくなった。

[[File:en/Manual/Difference block path signals.png|frame|center|閉塞信号とパス信号の最も重要な差異を示した例。2本の平行な線路が交差する場所を示している。
<ul>
<li>閉塞信号を利用した場合、閉塞信号は下段の列車を進行させない。なぜなら上段の列車により区間が占有されているからであり、下段の信号を進行させることによる衝突のリスクがゼロであることは関係ない。</li>
<li>パス信号を利用した場合、上段の列車が下段の線路へ移動しない場合は、下段の列車はそのまま進行する。</li>
</ul>]]

パス信号はより現実的な信号システム([[en/Archive/Community/Realistic Path Based Signalling|path based signalling (PBS) system]])をシミュレーションしようという試みから導入された。その理由は以下のとおりである。
#現実の信号は基本的に赤信号であり、列車が信号に接近した際にその進行先で他の列車と衝突するおそれがない場合にのみ、一時的に青信号を表示する。現実のジャンクションでは、複数の列車が同時にかつ安全に同じブロックに侵入することができ、これは[https://ja.wikipedia.org/wiki/%E5%88%86%E5%B2%90%E5%99%A8 分岐器]が列車がどちらの方向に進行できるかを制限するためである。
#''Transport Tycoon''では分岐直後の出口信号(通常の閉塞信号、またはプレ信号網による出口信号)は列車が分岐を出たらすぐに青信号となるが、このような信号システムは現実に存在しない。なぜなら列車が分岐上でスタックした際にデッドロックを発生させるためである。
#現実では一方通行の路線で一方向を向いている信号は必要ない(進行方向を制限するために"一方通行パス信号"を利用している場合は除く)。列車は信号の後ろからまるで信号などないかのように侵入することができる。ひとつ前の項目で説明した通り、プレ信号は現実に存在しない。これは特に一方向から出入りする駅の目の前に分岐がある場合に重要で、(一方通行ではない)パス信号はこのような駅で駅を向いて設置される。

以下は例である。
{|class=wikitable
!style="background:white"|分岐から離れて設置した閉塞信号
!分岐の直後に設置された閉塞信号
!style="background:white"|分岐の前に設置したパス信号
|-
|style="background:white"|Y型の分岐周辺に3つの信号がある。
右側の線路は列車が走行している。左下から列車が向かってきて上へ進行しようとしている。通常の閉塞信号は、たとえ上の線路が空いていたとしても、すべての区間が占有されていると考える。
|一つの解は、分岐の後に信号を追加することでより小さな区間に分割することである。2つの閉塞信号を追加することで、''Y''型の分岐は3つのブロック(右側、上側、分岐)に分割された。
|style="background:white"|パス信号を利用した場合、左下から進行している列車が走行しようとしている経路(上側の線路)が空いていれば、列車は進行できる。区間を小さな区間に分割する必要はない(つまり、分岐の直後に信号は不要である)。
|-
|style="background:white"|[[File:en/Manual/Signal bloc.png]]
Y型分岐周辺の''閉塞信号''
|[[File:en/Manual/Multiples standard.png]]
閉塞信号を2つ追加することで、Y型の分岐は3つのブロック(右側、上側、分岐)に分割されている。
|style="background:white"|[[File:en/Manual/Chemin.png|Chemin.png]]
''パス信号''と2つの''閉塞信号''の間のY型分岐
|}

パス信号について知っておくべき点が2点ある。
*パス信号は分岐をふさがないで待機できるような場所にのみ設置する。
*パス信号は一方向のみに動作する。反対方向からの列車からは無視されるか、信号のタイプによっては一方通行信号と判断される(以下を参照)。
{|class=wikitable style="width:600px; margin:auto"
|[[File:en/Manual/Yapp pbssignal.png]]
|'''パス信号'''(PS) : 信号の反対側から来た列車は進行できる(信号が無いかのように走行する)。一方向(閉塞)信号と混同しないように。
|-
|[[File:en/Manual/Yapp onewaypbssignal.png]]
|'''一方通行パス信号'''(1W PS) : 信号の反対側から来た列車は'''進行できない'''。反対向きの列車に向いて永遠に赤信号があるのと同義である。
|}

通常はデフォルトのパス信号を利用するのが最も効率的である。経路探索アルゴリズムでは、パス信号を後ろから通過することにはペナルティが発生するからである(ただし、目的地(駅や通過点)がパス信号のすぐ前(パス信号を背面から通過した直後)にある場合はその限りではない)。しかし、状況によっては一方通行パス信号の方が便利な場合もある。

2つの新しい信号は通常の閉塞信号とは異なった挙動を示す。パス信号は通常は赤信号を表示し、列車がパス信号に到着したときに次の場所まで安全に走行できることが確認できたときのみ青信号となる。安全に走行できる、とは定義上は次の信号の前、列車庫、線路の終端である。パス信号の後ろは安全に走行できる場所とは考慮されず、経路はパス信号を通して予約される。

全ての信号の前は安全に待機できる場所と定義されているため、通常は分岐の直後は信号の設置場所に適しておらず、分岐の直前のみ適している。これは分岐の前で列車が待機する方が安全だからである。下の例(例は右側通行である)のように、列車が分岐を完全に通過する前に信号に遭遇して待機することで列車が分岐にかかってしまうのは問題である。これがパス信号が閉塞信号より優れている点である。

{|class=wikitable style="margin:auto"
|style="background:#fee"|[[File:en/Manual/Yapp unsafewaitinglocation.png|center]]
'''悪い例''': 矢印で示している信号の配置は悪い例である。分岐内で停車している列車が存在するため、上から来た列車が通過できない。この画像にはもう一つ、配置すべきでない場所に配置されている信号がある。発見できるだろうか？
|style="background:#efe"|[[File:en/Manual/Yappgoodexample.png|center]]
'''良い例''': 分岐の後に列車が待つのに十分なスペースがある。このスペースに侵入できない場合、後から来た列車は分岐の前で停車するので分岐をふさがない。これにより、上から来た列車は分岐を無事に通過できる。
|}

もう一つ、パス信号でできることの例を挙げる。この構成は2編成の列車が駅を同時に出発し、'''かつ'''同じ列車庫に入ろうとする場合にプレ信号よりはるかに上手く動作する。プレ信号では区間を共有できないため、プレ信号でこの挙動を実現することはできない。この例では駅を出発する列車には一方通行パス信号を使用し、列車庫を出発する列車には通常のパス信号を使用している。
[[File:en/Manual/Pathsignal station exit.png|frame|center|2つの出口のある駅。列車庫内に信号が備え付けられているため、列車庫の前の信号は不要である。しかし、この例のようにパス信号を列車庫の前に設置することで、列車庫に入ろうとする列車に対して、列車庫を出発する列車に優先権を与えることができる。]]

上の図では示していないが、通過するタイプの駅の場合、その駅に入る分岐の入り口にパス信号が設置されていれば、駅の入り口に信号は不要である(閉塞信号とプレ信号での構成の場合は、出口信号が効果的だった)。

[[File:en/Manual/Rpbs img10.png|center|frame|すべての信号がパス信号の場合、通過するタイプの駅の入り口に出口信号は不要である。]]

====設定====
[[File:en/Manual/Yapp patch-options.png|frame|right|経路探索設定]]
パス信号に関連する設定が3つある。

1つは予約済み経路のハイライト表示である。この設定は列車が分岐をどのように予約したかを確認できるため、パス信号で構築された分岐のトラブルシューティングに便利である。

他の2つの設定は信号建設ツールの挙動を変えるものである。信号建設ツールを使って新しい信号を設置するときのデフォルトの信号を設定するものと、設置済みの信号に対してCtrlキーを押しながら信号種別を変更する際にどの種別の信号が現れるかを設定する者である。

設定画面に表示されないいくつかの追加のパス信号に関する設定がある。それらがどのようなものでどのように編集するかは[[en/Archive/Manual/Settings/Advanced path signal options & features|別の記事]]で解説されている。

===Basic examples of path signals===
Below are some example track layouts which use the path signals. There are also [[en/Community/Junctionary/Advanced path signal layouts|Advanced track layouts]] that are not recommended for beginners.

====Basic junction====
This basic junction now has a much higher throughput because trains only have to wait for trains running on the same line. The train coming from the right (going up) would usually have to wait for other trains coming back from the left tracks. It would now only have to wait if it wishes to switch lines. Note the 6 bounding signals to the 'junction block', and 3 total path signals, one at each entryway.

[[File:en/Manual/Yapp basicjunction.png|frame|center|Basic junction for trains (optimised for 3-tile length). Path signals are present at all entries to the junction block. Note the use of normal signals on plain track.]]

====Basic two-way station====
With this station layout, trains can use both platforms when coming from either direction. Because path signals do not create blocks on their reverse, the train cannot enter until there is a clear path until the signal on the ''opposite'' side of the platform (which must include the platform space), allowing it to safely stop. Note that this setup could alternatively be replicated with a set of block-exit presignals in-front of the station.

[[File:en/Manual/Yapp basicstation.png|frame|center|Basic station.]]

{{en/Feature|0.7}}

==Pre-signals==
Pre-signals are a group of specialised block signals. They are so named because block entry pre-signal input comes from not just the track in the block, but any other pre-signals placed on the other side of the block (that is to say exits from that block). They are used to limit the entry of trains into blocks that cannot be obstructed or occupied. In most cases you can use path signals to solve situations where trains can choose between multiple alternatives, for instance at stations or single-track lines that are used by trains in both directions.

<div style="float:right">
[[File:en/Manual/Station no pre-signals.png|frame|right|A problem with block signal only setup - the left train may leave first, the train waiting behind may get stuck in the track right behind the right train.]]
[[File:en/Manual/Station with pre-signals.png|frame|right|Solve the problem using presignals]]
</div>
The image on the top right shows a setup where entry to a station is controlled using ordinary signals.  When at least one platform is empty, this works well, as an incoming train is always directed to a free platform. However, consider what happens when all platforms are full, as in the screenshot. All branches are showing red, so the incoming train picks the shortest path - straight on.  But suppose the train on the platform to the right is going to be in the station for some time. Meanwhile, the train on the left leaves.  The incoming train has committed itself to a platform and is stuck between the signals, waiting for a train to depart even though there is now an empty platform available. We need to stop that incoming train before the track splits so that it picks the empty platform when a train leaves. For this you can use path signals, but you can also solve this situation with pre-signals. In fact, this was the way to build stations before path signals were invented.

Pre-signals function as block signals, but additionally decide on which colour to show by the status of other pre-signals in the same direction down the track.  Specifically, an entry pre-signal allows trains to enter if, and only if, there is at least one green exit out of the adjacent/following block.  You, as the planner, need to identify which signals are to be the block entry pre-signals and which are to identify exits.

====Block Entry Pre-signal====
<div style="float:right">
[[File:en/Manual/Entry presignal.png|60px]]
</div>
An entry pre-signal checks the signal aspect of all exit pre-signals of the signal block following the entry pre-signal. If there is at least one green exit pre-signal, the entry pre-signal wil also show green. If all exit pre-signals of the next block are red, then the entry pre-signal is also red.

This prevents trains from entering the block and obstructing it until there is an available exit. Note that depots have a built-in two way signal (it works as an entry pre-signal in a pre-signal set).

If there are no signals designated as exits on the block directly behind the entry pre-signal, it behaves as a normal block signal. This is convenient for bi-directional pre-signals where only one direction needs pre-signal functionality.

====Block Exit pre-signal====
<div style="float:right">
[[File:en/Manual/Exit presignal.png|60px]]
</div>
The exit pre-signals are what an entry pre-signal looks for to decide what aspect to show. They otherwise behave in the same way as a normal block signal.

To summarize: in the direction of travel you first have an entry pre-signal, then a junction where the track splits in at least two directions. After the junction there is an exit pre-signal on each branch. If the first block of each branch after the junction is occupied, then no trains will be allowed onto the junction. If at least one branch is available, then the junction will be available as well. Note that trains still can choose the occupied branch, if that is the only route to its destination. If both branches lead to the destination, then the train will choose the branch that is not occupied.

{{en/-}}

====Combo-signal====
[[File:en/Manual/Station with pre-signals2.png|frame|Station with 1 entry pre-signal, 2 combo-signals, and 4 exit-signals]]
<div style="float:right">
[[File:en/Manual/Combo presignal.png|60px]]
</div>
There is a third type of pre-signal called the combo signal and simply acts as both an entry and exit signal. They effectively combine many exit signals into one signal, effectively copying their effect down the chain. Any one green exit signal will make any combo signals up the line become green, which will successively relay up to the original block entry signal. This allows you to build large "trees" of pre-signals spanning several blocks, as shown on the right. 

In a tree of pre-signals, combo-signals are placed in between the entry pre-signals and exit-signals for that reason above, the other 2 types of signals are placed at the very beginning and end of the setup respectively.
{{en/-}}
====Building pre-signals====
To build a pre-signal select the appropriate button in [[#signal-interface|signal selection toolbar]].

In previous versions, first place an ordinary signal.  Then, with ''Ctrl'' held down, click the signal to cycle through the different kinds of presignal:
*Note that you can build one way pre-signals in the same way as you build ordinary one way signals.  Remember: holding ''Ctrl'' and clicking toggles the type of (pre)signal, clicking without ''Ctrl'' changes the direction of signaling - if interface signals not enabled.
*Remember not to hold down ''Ctrl'' when placing the signal initially or you will end up with a semaphore (see below). Also use ''Ctrl'' if you have enabled the signal interface.

====Limitation====
[[File:en/Manual/PresignalLimitation.png|frame|The problem with pre-signals...]]
An important point to note with exit signals is that a green exit signal will trigger a green on the entry pre-signal at the beginning of the block even if it is not actually possible for a train to get to that exit signal because of the track layout (as in the image to the right with a train entering on the bottom track cannot technically exit from the top track). This can ruin more complicated pre-signaling setups, so care needs to be taken with planning.

One of the bugs that are noted as "will not be solved" is: lost trains ignore (block) exit signals. If trains are lost, a random direction is chosen at each junction, so they ignore block exit signals, and may easily block junctions with pre-signals. Such case, however, can be easily resolved by replacing with [[#path-signals|path signals]].
{{en/-}}

==Directing trains==
Signals are intended to prevent trains from crashing into each other, and to help them choose between several track sections to the same destination. If you want to direct a train to a particular destination via a certain route, you should use [[en/Manual/Waypoints]].

==Signals in the game versus Signals in real life==
Just as in game, trains in real life uses a [http://en.wikipedia.org/wiki/Signalling_block_system block system] where each length between signals is indicated as a block, but is most often limited to one track. The difference between the signaling systems, is that real trains uses signals that is connected to a large computer network (signalling control) rather than being dependent on block-by-block occupation.

There is a somewhat heated discussion between players saying that the signal system is realistic to its real life counterpart, but the differences are very clear. Real life signalling control takes all the blocks after a signal into account as to prevent a train from driving into a dead end or over to the wrong track, based on the information on all preceding trains. Some of the differences between the trains in the game and real life is that the deceleration is completely different, requiring a 52 coach train more than 2 kilometers in distance to come to a complete halt depending on the speed, weight and inclination of the ground.

Real life signals uses a combination of [http://en.wikipedia.org/wiki/Application_of_railway_signals#Main_signal main signals], [http://en.wikipedia.org/wiki/Application_of_railway_signals#Distant_signal distant signals] and [http://en.wikipedia.org/wiki/Application_of_railway_signals#Shunting_signal dwarf signals] to handle traffic load and many countries' signal systems have different signals to indicate more than just a simple "Stop" or "Go".

'''Here's an example:'''

[[File:en/Manual/Difference between real and in game signals.png|400px|thumb|right|In game example with signals replaced with UK railway signals. Real life signals would not allow a train to have two green blocks ahead, only the specific path a train will take is lit green.]]

On the picture on the right is an in game example using real signals instead of the in game ones. The fastest train is catching up to the second train and the second train is catching up to the first. The UK railway signal system would indicate to the driver that the two blocks ahead of the train is red, by giving a double yellow. The single yellow tells the train that the next signal in the next block will indicate "Stop". By using this kind of three step system before a complete stop, the driver can slow down the train but doesn't have to bring the train to a complete stop.

In OpenTTD, the fastest train would catch up to the slowest, forcing it to come to a complete halt for the next block that the slow train is occupying. This then forces the fast train to start from a standstill and eventually catch up with the slow train again and repeat the process. In reality, this would be a big waste of energy and the breaks of a train as it takes an enormous amount of energy to start and generates a lot of heat to stop.

The game is also not programmed to make the slower train shunt on to a side track and allow the trains to pass unless you use time tables and waypoints to manually create this event.

When inside a train yard (the area with many tracks found outside stations and loading areas), trains uses dwarf signals instead of block signals. The dwarf signal resembles the in game path signal as it requires the driver to request permission to pass it if the junction ahead is not completely clear. Dwarf signals may also allow a train to pass over an occupied junction on its free track even if a train is blocking the parallel track.

There is also no real life equivalent of the entry signals, combo signals or exit signals. The signalling control system will indicate green when a train is allowed to go into the next block based on trains' schedules. After exiting a track of block signals entering for example: a station, dwarf signals are used to give instructions on which track to shunt to.

The biggest comparison between the game and real train signals is that the game is a "control free" system based on workload and occupation, whereas the real life signal system is automated to be able to create much more complex tasks and handling of trains as to allow a fluid movement. The in game system also does not require any interaction from the train driver since the signals handles all the commands whereas in real life, train drivers have much more to say to the control system and can request complex routes.


'''Read more about real life train signals on Wikipedia:'''

[https://en.wikipedia.org/wiki/Railway_signal Railway signal]

[https://en.wikipedia.org/wiki/Signalling_control Signalling control]

[https://en.wikipedia.org/wiki/Signalling_block_system Signalling block system]

[https://en.wikipedia.org/wiki/Dutch_railway_signalling Dutch railway signaling, designed to be one of the simplest in Europe]

[https://en.wikipedia.org/wiki/UK_railway_signalling UK railway signalling]

[https://en.wikipedia.org/wiki/North_American_railroad_signals North American railroad signals]

[https://en.wikipedia.org/wiki/German_railway_signalling German railway signalling]

[https://en.wikipedia.org/wiki/Swedish_railway_signalling Swedish railway signalling]

[https://en.wikipedia.org/wiki/Japanese_railway_signals Japanese railway signals]

==See Also==
* [[en/Community/Junctionary/Advanced signalling examples|Examples of advanced presignal setups]]
* [[en/Manual/Building depots]]
* [[:Category:en/Manual/Train Junctions]] for examples of complex junctions that take advantage of pre-signals.
* [http://www.darkcoding.net/misc/openttd-trains-and-signals-for-beginners-a-tutorial/ Signals for the complete beginner]
* [http://kokolokus.de/?s=blog&v=6 A tutorial written by domsson, on the forums] [http://www.tt-forums.net/viewtopic.php?f=29&t=51395 here]

[[Category:en/Manual/Railways]]
[[Category:en/Manual/Construction]]