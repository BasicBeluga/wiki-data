[[Translation:en/Manual/Game Mechanics/Main Page]]
{{ja/Manual/目次}}

ここではOpenTTD内でどのような計算が行われているかの情報を得ることができる。

駅の評価がどう算出されているか、商品がどのように分配されているか知りたいだろう？ここにはその全てがある。

==企業の格付==
企業の格付に関するそれぞれの項目は線形に影響する。つまり、ある項目の50%を達成していたら、その項目に割り当てられている点数の50%を得ることができる。金額が含まれている項目では、ゲームで利用している通貨に換算される。ゲーム内では通貨はポンドで計算されている。

{| {{en/Wikitable}}
|- style="background:#efefef"
! 項目 !! 目標!! 点数(最低) !! 点数(最大) !! 割合(%)
|-
|前年に収益を上げた社有の車両の台数||>=120||0台の場合0点||120台以上で100点||0 から 10%
|-
|最近利用した社有の駅の数(駅タイル数？)||>=80||0の場合0点||80以上で100点||0 から 10%
|-
|2年以上経過した車両の最低収益||>=£10,000||赤字か£0の場合0点||£10,000以上で100点||0 から 10%
|-
|過去3年以内の各四半期における最低収益||>=£50k||£0の場合0点||£50k以上で50点||0 から 5%
|-
|過去3年以内の各四半期における最高収益||>=£100k||£0の場合0点||£100k以上で100点||0 から 10%
|-
|前年に輸送した貨物の量||>=40,000||0の場合0点||40,000単位以上で400点||0 から 40%
|-
|全四半期に輸送した貨物の種類||>=8||0種類で0点||8種類以上で50点||0 から 5% 
|-
|現在の所持金||>=£10m||£0の場合0点||£10m以上で50点||0 から 5%
|-
|現在の銀行からの借金||£0||£250kより大きいと0点||£0で50点||0 から 5%
|- style="background:#efefef"
! 合計 !!!! 0点 !! 1000点 !! 0 から 100%
|}

<table>
<tr valign="top"><td style="background:none; border:0px">
{| {{en/Wikitable}}
|- style="background:#efefef"
!colspan="2"|企業格付
|- style="background:#efefef"
!レーティング!!肩書
|-
|0 to 127||技術者
|-
|128 から 255||輸送管理者
|-
|256 から 383||運送調整役
|-
|384 から 511||経路監督
|-
|512 から 639||理事
|-
|640 から 767||取締役
|-
|768 から 895||会長
|-
|896 から 959||総長
|-
|960 から 1000||巨頭
|}
</td><td style="background:none; border:0px">
{| {{en/Wikitable}}
|- style="background:#efefef"
!colspan="2"|2050年の格付
|-
!レーティング!!肩書
|-
|0 から 319||実務家
|-
|320 から 447||起業家
|-
|448 から 575||実業家
|-
|576 から 703||資本家
|-
|704 から 831||重鎮
|-
|832 から 959||大御所
|-
|960 から 1000||世紀の大物
|}
</td></tr></table>

==駅の評価==
この章では駅の評価に影響する要因について示している。それぞれの要素は貨物の種類ごとに独立して計算される。

{| {{en/Wikitable}}
|- style="background:#ddd"
!要因!!条件!!点数!!寄与率(%)
|-
| 貨物を積載するために利用した最後の車両の最高速度(最大255km/h)<br> 道路車両の場合は条件の速度を半分にする。|| 85km/h(52mph)以上|| (速度 (km/h) - 85) / 4 || 0% から 17%
|-
|rowspan="3"|積載に訪れた最後の車両の使用年数 || 2 || 10|| 4%
|-
| 1 || 20 || 8%
|-
| 0 || 33 || 13%
|-
|rowspan="4"|最後の貨物が積載されてからの経過日数 <br> 最後の車両が船舶の場合、条件の日数を4倍する。<br><small>(注意:車両が積載するために駅に到着したが積載する貨物が存在しない場合、またはその車両が満載の場合も積載したと考慮される。[https://github.com/OpenTTD/OpenTTD/issues/7430 おそらくバグ].)</small>|| 30 から 52.5 || 25 || 10%
|-
| 15 to 30 || 50 || 20%
|-
| 7.5 to 15  || 95 || 37%
|-
| 7.5未満 || 130 || 51%
|-
|rowspan="6"|駅で積載待ちの貨物量<br><small>注意:転送により貨物が他の駅に運ばれてその駅で積載待ちされている場合、その駅で積載待ちしている最大量が元々の駅で積載待ちしているものとして考慮されているようだ(参考:[https://github.com/OpenTTD/OpenTTD/blob/1.9.2/src/station_cmd.cpp#L3276 TruncateCargo()])。これは以下の条件を満たしたときに駅が貨物を廃棄すること(<tt>waiting_changed = true</tt>)をトリガーとしている。
*貨物が637.5日以内に駅から輸送されていない。[https://github.com/OpenTTD/OpenTTD/blob/1.9.2/src/station_cmd.cpp#L3300-L3306]
*駅の評価が25%以下であり、かつ200以上の貨物が駅で積載待ちしている。[https://github.com/OpenTTD/OpenTTD/blob/1.9.2/src/station_cmd.cpp#L3379-L3386]
*駅の評価が50%以下であり、かつ1つ以上の貨物が駅で積載待ちしている場合、駅の評価に応じてランダムに発生する(つまり、駅の評価が49%ならば1%以下、評価が25%ならば50%以下、評価が0%ならば100%発生する)。[https://github.com/OpenTTD/OpenTTD/blob/1.9.2/src/station_cmd.cpp#L3388-L3396]
*駅で4096以上の貨物が積載待ちしている。[https://github.com/OpenTTD/OpenTTD/blob/1.9.2/src/station_cmd.cpp#L3398-L3411].
</small>
|| 1500以上 || -90 || -35%
|-
| 1001 から 1500 || -35 || -14%
|-
| 601 から 1000 || 0 || 0%
|-
| 301 から 600 || 10 || 4%
|-
| 101 から 300 || 30 || 12%
|-
| 100以下 || 40 || 16%
|-
|社長の彫像が駅のある街にある||ある||26|| 10%
|- style="background:#ddd"
!イベント!!条件!!レーティング変化(点数)!!レーティング(%の値)変化
|-
|小規模広告キャンペーンを実施||街の中心から10タイル以内の駅||+64|| +25pp
|-
|中規模広告キャンペーンを実施||街の中心から15タイル以内の駅||+112|| +44pp
|-
|大規模広告キャンペーンを実施||街の中心から20タイル以内の駅||+160|| +63pp
|-
|道路車両の事故||事故地点から22タイル以内の駅||-160|| -63pp
|-
|列車事故||事故地点から30タイル以内の駅||-160|| -63pp
|-
|賄賂の発覚||街の影響範囲内の駅||-255||-100pp
|}
点数の合計値を255で割ると、パーセント表記のレーティングとなる。レーティングの最大値は100%である。
駅の評価は2.5日ごと([https://github.com/OpenTTD/OpenTTD/blob/0d599e155f335e922ad2be738a3ab73d1dea346b/src/date_type.h#L34 185 ticks])に計算される。イベント内の項目が発生した場合を除き、駅の評価は2.5日のサイクルごとに2点(0.78%)以上は変化しない。イベントは近隣の駅に対して即座に一時的な評価の上昇(または悪化)を起こす。評価は緩やかに(2.5日に2点ずつ)元の値に戻っていく。

産業からどれだけの量の貨物が輸送されたかに駅の評価はかかっている。これは、ある産業に対して駅が一つしか存在しなかった場合、駅の業過の%の値がそのまま産業の生産量に掛け算されて供給されることを意味する。つまり、産業から算出される貨物の量が少ないということは、駅の評価が低いということを意味する。

'''注意:''' 正確な計算式はstation_cmd.cppの"[https://github.com/OpenTTD/OpenTTD/blob/97c0594cedcad866bbdea8a0f86406b5c38694a3/src/station_cmd.cpp#L3262 UpdateStationRating()]"に記載されている。この計算式にはeconomy.cppの"[https://github.com/OpenTTD/OpenTTD/blob/97c0594cedcad866bbdea8a0f86406b5c38694a3/src/economy.cpp#L1595 LoadUnloadVehicle()]"にある値が使用されている。

'''注意:''' 駅の評価が50%未満になると、駅は貨物を廃棄し始める。

'''注意:''' 積載待ちの貨物が4,096以上(または4,096,000リットル以上)になると、駅は同様に貨物を廃棄し始める。さらに、駅に待機できる貨物は32,768単位が上限である。これ以上の貨物は2，3日ごとに消滅する。[https://github.com/OpenTTD/OpenTTD/blob/97c0594cedcad866bbdea8a0f86406b5c38694a3/src/station_cmd.cpp#L3380-L3393]

==駅への貨物配分==

商品は駅の評価に応じて分配される。

駅が一つしか存在しない場合、2.5日ごとに駅の評価のパーセンテージを掛け合わせた量の商品を供給する。

複数の駅が存在する場合、商品は評価を基準に分配される。複数の企業の駅が存在する場合、商品はまずそれぞれの企業で最も良い評価の駅を持つ企業に分配される。企業Cに分配される商品の量は、すべての会社の最も良い評価の駅の合計に対する、企業Cの最も良い評価の駅の割合に等しくなる。その後、各企業に割り当てられた数量に応じて各駅に商品が分配される。企業Cの所有する駅Sは全ての企業Cの駅の評価の合計に対する駅Sの評価の割合を基準としていくらかのばらつきをもって受け取る。


==地方自治体の評判==
評判はプレイヤーが街の周辺で可能な行動を制限する。街の評判は+500からスタートし、プレイヤーの行動によって変化する。

街の影響範囲内で200本の木を植林することで街の評判を上げることができる。場合によっては植林するために土地に存在する何かを除去する必要があるが、木を200本植林すると、評判が最低値の-1000だったとしても、220まで上げることができる。評判が平凡以下の場合、30本の木を植えることは駅を建設したことによる評判の低下を挽回するのに十分である。評判が良い以上の場合、木を植えることによる評判への影響はない。

<table>
<tr valign="top"><td style="background:none; border:0px">
{| {{en/Wikitable}}
|- style="background:#efefef"
!点数!!評判
|-
| -1000 から -400 || 最低 
|-
| -399 から -200 || とても悪い
|-
| -199 から 0 || 悪い
|-
| 0 から 200 || 平凡
|-
| 201 から 400 || 良い
|-
| 401 から 600 || とても良い
|-
| 601 から 800 || すばらしい
|-
| 801 から 1000 || 最高
|}
</td><td style="background:none; border:0px">
{| {{en/Wikitable}}
|- style="background:#efefef"
!プレイヤーの行動!!要求される評判*!!評判への影響
|-
|駅を建設する|| -200 || なし
|-
|道路の'先端'の破壊|| 16 / 64 / 112 ||-18、ただし下限は-100
|-
|道路の'先端以外'の破壊|| 16 / 64 / 112 ||-50、ただし下限は-100
|-
|街のトンネルまたは橋の破壊|| 144 / 208 / 400 ||-250、ただし下限は0
|-
|建物を破壊**|| 40 から300 ||-40、ただし下限は-300
|-
|空白タイルに木を植える|| n/a ||+7、ただし上限は220
|-
|木のあるタイルを削除する|| n/a ||-35
|-
|賄賂に成功する|| n/a ||+200、ただし上限は800
|-
|賄賂が発覚する|| n/a ||-50になる
|}
<nowiki>*</nowiki> "要求される評判"は設定の''地域の再編に対する街の姿勢''の"寛大/寛容/対立"によって変化する。
<br><nowiki>**</nowiki> デフォルトの建物の場合。NewGRFはこの値を0から1000以上まで設定できる。大きな値にすると建物を破壊できなくなる。
</td></tr></table>

毎月プレイヤーの評判が自動的に変化する。
*評判が200以下の時、5増える。
*過去50日以内にそれぞれの駅が貨物を輸送していれば、12増える。
*過去50日以内にそれぞれの駅が貨物を輸送していなければ、15減る。

'''例'''<br>
あるプレイヤーの評判が-300(とても悪い)だったとして、2つの利用されている駅と1つの利用されていない駅が街の中にあったとする。<br>
5pts + 2 * 12pts - 15pts = 14ptsとなり、毎月14点得ることができる。
よって、(-200 - (-300))pts / 14pts/mo = 8となり、8か月後にもう一つの駅が建設可能になる。

街の評判についてのコードは town.h, town_cmd.c, tree_cmd.c, road_cmd.cに記載されている。

==乗客と郵便物の生成==
Towns and the company headquarters generate passengers and mail, while oil rigs only generate passengers. 
===街の乗客の生成===
In each periodic processing (i.e. every 256 ticks), a random value 0<=X<=255 is generated for each house tile. If X isn't smaller than the population of the tile, no passengers are generated. Otherwise, X/8+1 passengers are generated (rounded down). If there is a recession going on, the number of generated passengers is halved, but this division gets rounded up instead of down. Mail generation happens in a similar manner, but with a new random value, and checking against the mail generation multiplier instead of the population. See the full list of default values for HouseProps: [https://newgrf-specs.tt-wiki.net/wiki/DefaultHouseProps]
===本社ビル===
The Company Headquarters is a unique structure that generates passengers and mail depending on it's level which is dependent on the performance rating of the company. Higher level company HQs generate more passengers and mail, the output of the headquarters is evenly distributed over all four tiles on a per tile basis as per the following formulas:

Passengers: 256 / 4 tiles / (6 - company HQ Level (a value between 1 and 5) )

Mail: 196 / 4 tiles / (6 - company HQ Level (a value between 1 and 5) )

==産業の生産==
Here is how the game determines how much cargo an industry produces per month.  Production of raw materials happens 8 or 9 times per month.  (It happens every 256 ticks.  There are 74 ticks in a day, and 28 to 31 days in a month ([https://github.com/OpenTTD/OpenTTD/blob/97c0594cedcad866bbdea8a0f86406b5c38694a3/src/date_type.h#L30 date_type.h]).  This means that only about 9% of industries will produce 9 times in a 28-day February, but about 96% of industries will produce 9 times in a 31-day month like March.)  The production will always be a multiple of 8 or 9, unless the industry changed production during that month.

This table lists possible starting productions governed by the [[en/Archive/Manual/Settings/Advanced Settings/Economy#enable-smooth-economy-more-smaller-changes|smooth economy]] patch.  These numbers are multiples of 8.  When the game generates a new map, each industry produced 8 times and had no production changes in the December before the game started.

{| {{en/Wikitable}}
|- style="background:#efefef"
!Raw Material Industry!!Produced Cargo!!Initial production range
|-
|[[en/Manual/Base Set/Industries/Coal Mine]]||Coal||56 to 176
|-
|[[en/Manual/Base Set/Industries/Forest]]||Wood||48 to 152
|-
|[[en/Manual/Base Set/Industries/Oil Rig]]||Oil||56 to 176
|-
|[[en/Manual/Base Set/Industries/Farm]]||Grain and Livestock||40 to 112
|-
|[[en/Manual/Base Set/Industries/Copper Ore Mine]]||Copper Ore||56 to 112
|-
|[[en/Manual/Base Set/Industries/Oil Wells]]||Oil||48 to 152
|-
|[[en/Manual/Base Set/Industries/Iron Ore Mine]]||Iron Ore||40 to 112
|-
|[[en/Manual/Base Set/Industries/Bank]] (temperate)||Valuables||24 to 64
|-
|colspan="5"|
|-
|[[en/Manual/Base Set/Industries/Gold Mine]]||Gold||24 to 80
|-
|colspan="5"|
|-
|[[en/Manual/Base Set/Industries/Diamond Mine]]||Diamonds||24 to 80
|-
|[[en/Manual/Base Set/Industries/Fruit Plantation]]||Fruit||40 to 112
|-
|[[en/Manual/Base Set/Industries/Rubber Plantation]]||Rubber||40 to 112
|-
|[[en/Manual/Base Set/Industries/Water Supply]]||Water||48 to 152
|-
|[[en/Manual/Base Set/Industries/Farm]]||Maize||40 to 128
|-
|[[en/Manual/Base Set/Industries/Lumber Mill]]||Wood||180 or 225 (if trees available)
|-
|colspan="5"|
|-
|[[en/Manual/Base Set/Industries/Candyfloss Forest]]||Cotton Candy||48 to 152
|-
|[[en/Manual/Base Set/Industries/Battery Farm]]||Batteries||40 to 128
|-
|[[en/Manual/Base Set/Industries/Cola Wells]]||Cola||48 to 136
|-
|[[en/Manual/Base Set/Industries/Plastic Fountains]]||Plastic||56 to 160
|-
|[[en/Manual/Base Set/Industries/Bubble Generator]]||Bubbles||48 to 152
|-
|[[en/Manual/Base Set/Industries/Toffee Quarry]]||Toffee||40 to 112
|-
|[[en/Manual/Base Set/Industries/Sugar Mine]]||Sugar||40 to 128
|}

(To calculate this table, look under [https://github.com/OpenTTD/OpenTTD/blob/97c0594cedcad866bbdea8a0f86406b5c38694a3/src/table/build_industry.h#L1198 _origin_industry_specs] in table/build_industry.h for the industry and its cargo.  The sugar mine has <code>CT_SUGAR, 11</code>, so the production starts at 11.  Apply the formula from [https://github.com/OpenTTD/OpenTTD/blob/97c0594cedcad866bbdea8a0f86406b5c38694a3/src/industry_cmd.cpp#L1643 DoCreateNewIndustry()] in industry_cmd.cpp: multiply the production by a random integer from 128 to 383, then divide by 256, rounding down.  So 11 becomes 5 to 16.  Finally, multiply it by 8 to get 40 to 128.)

===生産量の変動===
Each month the game randomly changes some industry productions.
====デフォルト、TTD風の経済ルール====
For 256x256 tile maps there is one change per month possible (only 1 industry changes). Number scales nicely with map size since the introduction of "Daily production changes" function in trunk (r14332). 


*As with smooth economy, industries produce cargo 8 or 9 times per month.
However - productions are limited to 6 production levels: lowest, lower, normal (with a new game started or a new industry built), higher, 2x higher and the highest.
Production changes between these levels are either a 50% decrease (half) or a 100% increase (double).

*Examples:
**A Coal Mine: lowest (32 or 40 t per month), lower (64 or 72), normal (120 or 135), higher (240 or 270), 2x higher (480 or 540) and the highest (960 or 1080).
**A Forest:    lowest (32 or 64 t per month), lower (35 or 70), normal (78 or 117), higher (208 or 260), 2x higher (416 or 468) and the highest (832 or 936).
**A Gold Mine: lowest (12 or 18 bags/month), lower (32 or 40), normal (56 or  63), higher (112 or 126), 2x higher (224 or 252) and the highest (448 or  504).


To make things simple, let's look what are the chances for 256x256 maps (max. 1 change per month = max. 1 industry per month changes production):

*The chance for a production change each month is:
** 50% for <code>only_decrease</code> industry to decrease (currently only Temperate terrain Oil Wells) or
** 50% for 1/3 chance (=16.7%) that other industry (non <code>only_decrease</code>) changes production.


*If a production change does occur (~16.7% chance per month):
** For an industry that has poor or no service (less than 60% of its cargo is transported): '''33%''' chance of increase, '''67%''' chance of decrease.
** For an industry that has good (greater than 60%) service: '''67%''' chance of increase, '''33%''' chance of decrease.
** There is no bonus for excellent service with default economy.


*To calculate the chance for a particular change, i.e. 50% * 1/3 * 33% = 5.56%:
** Poor service: '''5.56%''' that 1 possible change per month is an increase and '''11.12%''' that 1 possible change per month is a decrease.
** Good service: '''11.12%''' that 1 possible change per month is an increase and '''5.56%''' that 1 possible change per month is a decrease.

====なだらかな経済変化====

{{en/Outdated|難易度設定とAdvanced settingは設定に置き換えられている}}

:''Distinguish [[en/Archive/Manual/Settings/Advanced Settings/Economy#enable-smooth-economy-more-smaller-changes|Smooth economy]] (advanced setting) and [[en/Archive/Manual/Settings/Difficulty|Steady economy]] (difficulty setting)''

*The chance for a production change each month is '''4.5%''', i.e. 4.5% of producing industries from industry list change production.


*If a production change does occur:
** For an <code>only_decrease</code> industry (currently only Temperate terrain Oil Wells) '''0%''' chance of increase, '''100%''' chance of decrease.
** For an industry that has poor or no service (less than 60% of its cargo is transported): '''33%''' chance of increase, '''67%''' chance of decrease.
** For an industry that has good (greater than 60%) service: '''67%''' chance of increase, '''33%''' chance of decrease.
** For an industry that has excellent (greater than 80%) service: '''83%''' chance of increase, '''17%''' chance of decrease.


*These two are multiplied together, i.e. 4.5% * 33% = 1.5%:
** <code>only_decrease</code> industry: '''0%''' chance to increase and '''4.5%''' chance to decrease
** Poor service: '''1.5%''' chance to increase and '''3.0%''' chance to decrease
** Good service: '''3.0%''' chance to increase and '''1.5%''' chance to decrease
** Excellent service: '''3.75%''' chance to increase and '''0.75%''' chance to decrease


*With the [[en/Archive/Manual/Settings/Smooth economy]] option enabled, production changes per month are between 3% and 23%
**Industries with very low productions, (i.e. 12-40 tonnes per month) will have higher changes.
**Primary industries produce cargo 8 or 9 times a month. Monthly production is an industries 'base value' multiplied times 8 or 9.  For example, the base value for a coal mine is 15 tons, so the monthly production is 120 or 135 tons. This base value is capped at 255, so the maximum possible monthly production for any industry is 2040 or 2295. [http://www.tt-forums.net/viewtopic.php?p=163733&sid=2128541ce7feb1a96a454f56152123a2#p163733 Ref]

=====特殊な場合=====

*[[en/Manual/Base Set/Industries/Oil Rig]] passenger production is limited to 16 passengers per production event, meaning a maximum of 144 or 128 passengers per month. [https://github.com/OpenTTD/OpenTTD/blob/1.9.2/src/industry_cmd.cpp#L2597-L2602]
*[[en/Manual/Base Set/Industries/Lumber Mill]] is technically not a producing industry and is classified as a secondary industry in the code. Four or five times a month it will search outward in a 40 by 40 area in a spiral pattern looking for a fully-grown tree to cut down. If it finds one, the tile will be [[en/Manual/Landscaping|demolished]] and 45 tons of wood will be output. This means it has a maximum production of 225 or 180 tons of wood per month, solely dependent on the availability of trees.[https://github.com/OpenTTD/OpenTTD/blob/1.9.2/src/industry_cmd.cpp#L1094-L1111]
*Temperate climate [[en/Manual/Base Set/Industries/Bank|Banks]] never change production (except due to the 8 vs 9 production events per month).

====例====
If a coal mine has 70% of its output transported, there is a '''3%''' chance (4.5% * 67%) of a production increase from 3-23% and a '''1.5%''' chance (4.5% * 33%) of a production decrease from 3-23% (but 13% on average).

(1 + (0.03 - 0.015) * 0.13) ^ 12 - 1 = 0.0237 or '''2.37%'''

The coal mine will grow an average of 2.37% on average after the first year.<br>
(1.0237 ^ 20) - 1 = 59.6% after twenty years<br>
(1.0237 ^ 50) - 1 = 321.8% or '''3.22x''' after fifty years<br>
(1.0237 ^ 100) - 1 = '''10.35x''' after one hundred years<br>


For an industry with rating of more than 80%, there is a '''3.75%''' chance of increase and '''0.75%''' chance of decrease:<br>
(1 + (0.0375 - 0.0075) * 0.13) ^ 12 - 1 = 0.0478 or '''4.78%'''

The industry will grow approximately 4.78% on average after the first year.<br>
(1.0478 ^ 20) - 1 = '''2.54x''' after twenty years<br>
(1.0478 ^ 50) - 1 = '''10.32x''' after fifty years<br>
(1.0478 ^ 100) - 1 = '''106.62x''' after one hundred years<br>


For an industry with the <code>only_decrease</code> flag set (currently Temperate Oil Wells), there is only a '''4.5%''' chance of decrease:<br>
(1 + (0 - 0.045) * 0.13) ^ 12 - 1 = (0.99415) ^ 12 -1 = -0.068 or '''-6.8%'''

The industry will shrink on average by approximately 6.8% after the first year.<br>
(0.9320 ^ 20) = '''24.46%''' of initial production after twenty years<br>
(0.9320 ^ 50) = '''2.96%''' of initial production after fifty years<br>

ln(0.5) / ln(0.99415) = 118.1 months or '''9.84 years''' is the half life of an <code>only_decrease</code> industry.<br>
ln(8 / 48) / ln(0.99415) = 305.9 months or '''25.4 years''' is the mean lifetime of a temperate Oil Wells (starting at 48 oil/month).<br>
ln(8 / 152) / ln(0.99415) = 501.8 months or '''41.8 years''' is the mean lifetime of a temperate Oil Wells (starting at 152 oil/month).<br>


For good service, it takes '''29.6 years''' on average '''to double'''; with excellent service, it takes '''14.8 years'''. If in the game's time a day is 2.36 seconds, then the '''doubling time''' with good service is '''7.1 hours'''; with excellent service, the doubling time is '''3.6 hours'''. For production to go from near bottom of 100 to near maximum of 2040 or 2295 takes '''130 years''' with good service and '''65 years''' with excellent service.

However, in game you will find industries changing their production rate very randomly. It must be stressed the above examples are only true when observing many industries over the long-term; individual industries may greatly deviate from these averages. Statistically speaking, 6 out of 10 industries will not go from 100 to 2040-2295 even with the best service during 65 years. About 1 out of 9 industries will even lower their production when being served at 60-80% cargo transported for 50 years. 

For more responsiveness from industries, adapt the number of wagons to industry production (for the lowest production, you should use two wagons). [Full Load] orders are usually used for such cargo trains.


'''Note:'''  The exact formula can be seen under "[https://github.com/OpenTTD/OpenTTD/blob/master/src/industry_cmd.cpp#L2598 ChangeIndustryProduction()]" in industry_cmd.cpp.

==運送報酬の相場==
The amount you get paid for delivering cargo is based on 4 factors: the amount of cargo you deliver, the value of the cargo, the distance you deliver it, and how on-time you deliver it.

{| {{en/Wikitable}}
|- style="background:#efefef"
!Cargo!!Units!!Early Delivery<br> Time (days)!!Late Delivery<br> Time (days)!!Initial cargo <br> payment (pounds)
|-
|[[en/Manual/Base Set/Cargos/Passengers]]|| ||Immediate||24||£39
|-
|[[en/Manual/Base Set/Cargos/Valuables]]||Bags||1||32||£91
|-
|[[en/Manual/Base Set/Cargos/Livestock]]||Items||4||18||£53
|-
|[[en/Manual/Base Set/Cargos/Grain]]||Tons||4||40||£58
|-
|[[en/Manual/Base Set/Cargos/Goods]]||Crates||5||28||£75
|-
|[[en/Manual/Base Set/Cargos/Coal]]||Tons||7||None||£72
|-
|[[en/Manual/Base Set/Cargos/Steel]]||Tons||7||None||£69
|-
|[[en/Manual/Base Set/Cargos/Iron Ore]]||Tons||9||None||£62
|-
|[[en/Manual/Base Set/Cargos/Wood]]||Tons||15||None||£61
|-
|[[en/Manual/Base Set/Cargos/Oil]]||Kiloliters||25||None||£54
|-
|[[en/Manual/Base Set/Cargos/Mail]]||Bags||20||90||£55
|- style="background:#efefef"
!colspan="5" align="center"|Arctic specific
|-
|[[en/Manual/Base Set/Cargos/Wheat]]||Tons||4||40||£58
|-
|[[en/Manual/Base Set/Cargos/Paper]]||Tons||7||60||£66
|-
|[[en/Manual/Base Set/Cargos/Gold]]||Bags||10||40||£71
|-
|[[en/Manual/Base Set/Cargos/Food]]||Tons||Immediate||30||£69
|- style="background:#efefef"
!colspan="5" align="center"|Tropical specific
|-
|[[en/Manual/Base Set/Cargos/Rubber]]||Kiloliters||2||20||£54
|-
|[[en/Manual/Base Set/Cargos/Fruit]]||Tons||Immediate||15||£51
|-
|[[en/Manual/Base Set/Cargos/Maize]]||Tons||4||40||£53
|-
|Tropical [[en/Manual/Base Set/Cargos/Wood]]||Tons||15||None||£97
|-
|[[en/Manual/Base Set/Cargos/Copper Ore]]||Tons||12||None||£59
|-
|[[en/Manual/Base Set/Cargos/Water]]||Kiloliters||20||80||£57
|-
|[[en/Manual/Base Set/Cargos/Diamonds]]||Bags||10||None||£71
|- style="background:#efefef"
!colspan="5" align="center"|Toyland specific
|-
|[[en/Manual/Base Set/Cargos/Sugar]]||Tons||20||None||£54
|-
|[[en/Manual/Base Set/Cargos/Toys]]|| ||25||None||£68
|-
|[[en/Manual/Base Set/Cargos/Batteries]]|| ||2||30||£53
|-
|[[en/Manual/Base Set/Cargos/Sweets]]||Tons||8||40||£75
|-
|[[en/Manual/Base Set/Cargos/Toffee]]||Tons||14||60||£58
|-
|[[en/Manual/Base Set/Cargos/Cola]]||Kiloliters||5||75||£59
|-
|[[en/Manual/Base Set/Cargos/Candyfloss]]||Tons||10||25||£61
|-
|[[en/Manual/Base Set/Cargos/Bubbles]]|| ||20||80||£62
|-
|[[en/Manual/Base Set/Cargos/Plastic]]||Kiloliters||30||None||£54
|-
|[[en/Manual/Base Set/Cargos/Fizzy Drinks]]|| ||30||50||£76
|}

Initial cargo payment values are for delivering 100 pieces of cargo 1 tile.  Payment goes up with inflation as the game progresses.


Late delivery penalties:
*For each day after the Early Delivery time that you deliver the cargo, you are penalized 0.4%.
*For each day after the Late Delivery time that you deliver the cargo, you are penalized an additional 0.4%.
*Maximum penalty is 88%.


'''Examples''' (no inflation):<br>
Deliver 200,000 liters of oil 20 squares in 10 days:<br>
2 * £54 * 20 squares * 100% = £2160

Deliver 100 bags of mail 100 squares in 100 days:<br>
£55 * 100 squares * (1 - 0.80*0.4 - 0.10*0.4) = £3520

'''HINT calculate easy''':<br>
Income = cargo units * cargo value * 0.4<br>
[[en/Cargo value]] comes from the Y-axis on the specific transported goods graph in-game<br>
measure your real delivery time in days and plot on x-axis
This result will give you an easy estimation of your income with 5% deviation

'''Notes:'''
* A useful thumbrule is around 1-2x the transport speed. Ie. for a 200kph train around 300 tiles distance is ideal. Well tuned train networks can push a little further, but any unexpected delays will destroy your value for long distance haulage. Really large maps can exploit the 12% value floor; if your goods are on a long delay anyways, long distance is the only thing that matters.

* The exact formula is much more complicated and slightly more accurate, due to rounding error when converting from larger discrete values.  See economy.cpp ([https://github.com/OpenTTD/OpenTTD/blob/master/src/economy.cpp#L958 GetTransportedGoodsIncome()]) and [[en/Manual/Game Mechanics/Cargo income]].

* Distance is measured between the name-labeled tiles of the stations, not from the industries or by vehicle distance traveled.  It is computed by adding the differences in x and y tiles ([http://en.wikipedia.org/wiki/Manhattan_distance manhattan distance]), not straight-line distance.

* Each cargo has a characteristic time at which payment is maximized, assuming you can keep it moving away from the source station at a constant speed.  For a cargo with a "late delivery" penalty, this time is typically around 70 days; for one without, this is typically around 130 days.

==車両の速度==
Internally OpenTTD works with a unit called "km-ish/h", which is equal to "mph*1.6". 
The conversion factor from km-ish/h to km/h is 1.00584, and the conversion factor from km-ish/h to mph is 1.6.

A tile is, for vehicle speed purposes 664.(216) km-ish, 668 km or 415 miles long. This is based on the following facts: 
*A tile has 16 sub locations per X/Y axis.
*A vehicle has stores remainder of tile movement in a byte called subspeed, thus has 256 different values.
*The vehicle's (raw) speed is added to subspeed. The resulting number is divided by 256, the remainder is stored in subspeed and the vehicle is moved quotient sub locations forward. For trains and aircraft the raw speed is in km-ish/h, for road vehicles/ships in 0.5 km-ish/h. For trains and aircraft this step is done twice a tick, whereas ships and road vehicles do it once a tick.
*A day contains 74 ticks, and takes 24 hours.
Now assume a vehicle going 1 km-ish/hour: (1 * 16 * 256) / (74 * 2) * 24 = 664.(216).

The net result is that 100 km/hour is ~3.6 tiles/day.


==== 航空機 ====
*By default aircraft fly at a quarter of their listed speed (this can be changed in advanced settings).
*Aircraft acceleration varies per aircraft, between 144 km-ish/h/day and 400 km-ish/h/day.
*Broken down planes fly at 320 km-ish/h.
*Airport taxi speed is 150 km-ish/h.

==== 道路車両 ====
*Road vehicles accelerate at 37 km-ish/h/day.
*Road vehicles go around corners at half their max speed.
*Road vehicles accelerate an additional 74 km-ish/h/day downhill.
*When going uphill, road vehicles slow down 10% 4 times per tile.  This balances out with acceleration at 34-ish km/h for all road vehicles.

(Note: This does not apply when using the improved road vehicle acceleration model.)

==== 船舶====
*Ships accelerate at 37 km-ish/h/day.
*A "stopped" ship resumes its last speed instantly.

==== 列車 ==== 
(with the [[en/Archive/Manual/Settings/Realistic acceleration|realistic train acceleration patch]])<br>
*Trains are not affected going up or down hills if they are powerful enough.
*Trains are limited to entering and exiting a depot and making 90° turns at 61 km/h.
*Trains can make one 45° turn or two 45° turns in opposite directions at a time without slowing down.
*When making two or more 45° turns in the same direction, the max speed is limited as follows:

{| style="margin: 1em 1em 1em 0;"    <!-- begin nested tables -->
|-

|    <!-- metric -->
{| border="2" width="auto" cellspacing="4" cellpadding="3" rules="all" style="margin: 0; border: solid 1px #AAAAAA; background-color: #efefff;"
|-
!rowspan=2  style="background:#efefef"  | Curvature
!colspan=3  style="background:#dfdfff"  | Max speed (km/h)
|-
!   style="background:#dfdfff"      | Railroad
!   style="background:#dfdfff"      | Monorail
!   style="background:#dfdfff"      | Maglev
|-
| style="background:#f8f8ff"    | 0 (90° turn)  
|    61||91||121
|-
| style="background:#f8f8ff"    | 1 (2x45° turn)
|     88||132||176
|-
| style="background:#f8f8ff"    | 2
|    111||166||221
|-
| style="background:#f8f8ff"    | 3
|    132||198||264
|-
| style="background:#f8f8ff"    | 4
|    151||226||301
|-
| style="background:#f8f8ff"    | 5
|    168||252||336
|-
| style="background:#f8f8ff"    | 6
|    183||274||365
|-
| style="background:#f8f8ff"    | 7
|    196||294||392
|-
| style="background:#f8f8ff"    | 8
|    207||310||413
|-
| style="background:#f8f8ff"    | 9
|    216||324||432
|-
| style="background:#f8f8ff"    | 10
|    223||334||445
|-
| style="background:#f8f8ff"    | 11
|    228||342||456
|-
| style="background:#f8f8ff"    | 12+
|    231||346||461
|}

|    <!-- imperial -->
{| border="2" width="auto" cellspacing="4" cellpadding="3" rules="all" style="margin: 0; border: solid 1px #AAAAAA; background-color: #ffefef;"
|-
!rowspan=2  style="background:#efefef"  | Curvature
!colspan=3  style="background:#efdfdf"  | Max speed (mph)
|-
!   style="background:#efdfdf"      | Railroad
!   style="background:#efdfdf"      | Monorail
!   style="background:#efdfdf"      | Maglev
|-
| style="background:#f8f8ff"    | 0
|     37|| 56|| 75 
|-
| style="background:#f8f8ff"    | 1
|     54|| 82||109 
|-
| style="background:#f8f8ff"    | 2
|     68||103||137 
|-
| style="background:#f8f8ff"    | 3
|     82||123||164 
|-
| style="background:#f8f8ff"    | 4
|     93||140||187 
|-
| style="background:#f8f8ff"    | 5
|    104||156||208 
|-
| style="background:#f8f8ff"    | 6
|    113||170||226 
|-
| style="background:#f8f8ff"    | 7
|    121||182||243 
|-
| style="background:#f8f8ff"    | 8
|    128||192||256 
|-
| style="background:#f8f8ff"    | 9
|    134||201||268 
|-
| style="background:#f8f8ff"    | 10    ||138||207||276 
|-
| style="background:#f8f8ff"    | 11    ||141||212||283 
|-
| style="background:#f8f8ff"    | 12+   ||143||214||286 
|}

|}  <!-- end nested tables -->
"Curvature" means the average number of wagons of the train between turns. However, very sharp turns (curvatures 0 and 1) are not averaged out in longer trains.

*New railtypes can specify custom maximum curve speeds in the same steps as the three default types in the table.
*Tilting trains gain an additional bonus of 20% on the maximum speed.
*Train acceleration and max speed are affected by engine power, maximum tractive effort (all engines and powered wagons combined), current speed, air drag, total train mass, and wagons/engines on slopes.
*Non maglev train Acceleration spreadsheet can be found on tt-forums: [http://www.tt-forums.net/viewtopic.php?f=31&t=55972&p=960678#p960672 tt-forums]
*Braking is twice acceleration except when entering a depot or a station.
[[File:en/Manual/Game Mechanics/Speed-limits.png]]

''See also: [[en/Archive/Manual/Settings/Realistic acceleration]] and [[en/Community/Corners]].''

See ground_vehicle.cpp, aircraft_cmd.cpp, roadveh_cmd.cpp, ship_cmd.cpp, train_cmd.cpp, vechicle.cpp for code.

As of OpenTTD 1.6.1, given power in hp, max tractive effort in kN, total weight of the train in tonnes, the number train parts (engines and wagons), the air drag value of the first engine in the train (NewGRF setting, defaults to <code>min(192,max(1,floor(2048/max_speed)))</code>, meaning faster trains are built more aerodynamically), the combined weight of any train parts (engines or wagons) currently on an up-slope, the combined weight of any train parts (engines or wagons) currently on a down-slope, the slope steepness (game setting [1-10], default 3), and the current speed of the train in km/h, the acceleration of a non-maglev train can be calculated as follows:

; force = min((max_te * 1000), floor((power * 746) / (current_speed * 5/18)))    [N]
; slope_force = weight_on_upslope * slope_steepness * 100 - weight_on_downslope * slope_steepness * 100    [N]
; axle_friction = total_weight * 10    [N]
; rolling_friction = floor((current_speed + 512) * 15 / 512) * total_weight    [N]
; air_drag_coefficient = 14 * floor(air_drag_value * (1 + number_of_parts * 3/20)) / 1000
; air_drag = floor(air_drag_coefficient * current_speed^2)   [N]
; acceleration = (force - (slope_force + axle_friction + rolling_friction + air_drag)) / (total_weight * 4) [256th of a km/h per half-tick]

Note: air_drag_coefficient is twice that if any part of the train is in a tunnel.

Given the same values, the equilibrium speed, e.g. the speed the train would eventually settle on if the same conditions continued indefinitely, can be calculated as follows [Assuming a constant <code>rolling_friction</code> (i.e. the speed stays below 512 km/h), and ignoring the flooring of <code>force</code> and <code>air_drag</code> to an integer value]:

; p = (slope_force + axle_friction + rolling_friction) / air_drag_coefficient
; q = (-power * 746 * 18/5) / air_drag_coefficient
; C = (27/2*q + ((27/2*q)^2 + 27*p^3)^(1/2))^(1/3)
; equilibrium = min(max_speed, p/C - C/3, max(0, max_te * 1000 / air_drag_coefficient - p)^(1/2))

== 街の成長 ==

See [[en/Manual/Towns#town-growth]].

[[Category:en/Manual/Playing]]
