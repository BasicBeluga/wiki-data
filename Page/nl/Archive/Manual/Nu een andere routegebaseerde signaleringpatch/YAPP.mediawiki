[[Translation:en/Archive/Manual/Yet Another PBS Patch]]
{{nl/Vertaling|en/Archive/Manual/Yet Another PBS Patch|0}}


{{nl/Verlopen|''maart 2011'', specifiek de afbeeldingen.}}

Nu een andere '''r'''outege'''b'''aseerde '''s'''ignalering (RBS) patch (of kortweg YAPP) is een routegebaseerde signalering (RBS) patch ontwikkeld door Michi_cc, dat is opgenomen in de OpenTTD romp in r13926. De eerste stabiele release waarin deze functies is opgenomen is [[en/Archive/OpenTTD/OpenTTD 0.7.0]].

YAPP implementeert een realistisch signaleringssysteem, gelijk aan [[en/Archive/Community/Realistic Path Based Signalling|Tekky's proposed PBS system]], maar zonder het realistische twee-richtingen dubbelspoor. Het is niet gerelateerd aan het [[en/Archive/Manual/Path Based Signaling (old)|oude RBS systeem van OpenTTD]].

==Functies==
* Works with NPF and YAPF.
* Implements a signal system similar to [[en/Archive/Community/Realistic Path Based Signalling|Tekky's proposed PBS system]] (without realistic bi-directional double track).
* Is fully backwards compatible, the old block signals and the new path signals can be used in parallel.
* Can highlight the reserved paths.

==Tutorial==
===De basis===
This paragraph covers the basic features of YAPP, and should get you going on using it.

====De seinen====
[[File:en/Manual/Yapp signalgui.png|frame|right|Twee nieuwe seintypes in de [[nl/Manual/Seinselectie interface|seinselectie interface]].]]YAPP adds two new signal types to the game. These signals enable trains to reserve a path through a signal block before entering the block. If another train wants to enter the block, and succeeds in reserving a path through the block, both trains can use one signal block at the same time.


As mentioned before, there are two signal types, available in the [[nl/Manual/Seinselectie interface|seinselectie interface]]. The first type is the basic path signal. There are two things you should know about this signal:
* Place it only where trains can stop and wait safely without blocking junctions and other things.
* Trains can pass through this signal from the back side.
[[File:en/Manual/Yapp pbssignal.png|frame|right||RS]]Dit sein wordt een ''routesein (RS)'' genoemd.


There are also two things you should know about the second signal type:
* Place it only where trains can stop and wait safely without blocking junctions and other things.
* Trains can pass through this signal from one direction.
[[File:en/Manual/Yapp onewaypbssignal.png|frame|right|1R RS]]Dit sein wordt een ''eenrichtingsroutesein (1R RS)'' genoemd.


Most of the times it will be sufficient to use a default path signal, as passing a signal from the back is penalised by the pathfinder, however, one-way path signals might be useful in certain specific cases.


The two new signal types behave a bit different than standard OpenTTD signal types. The path signals are red by default, and will only show green as soon as a train can reserve a path to the next safe waiting position on its route. Safe waiting positions are - by definition - in front of signals, depots and track ends. The back of a path signal is not considered a safe waiting position, and therefore paths are reserved through these signals.

Because the front of every signal is defined as a safe waiting position, you would normally not want to place a signal immediately behind a junction, only in front of a junction. This is because it is only safe for a train to wait in front of a junction. It is not safe for a a train to wait at a signal immediately after a junction before the whole train has cleared the junction, as it would be blocking the junction while waiting, as illustrated in the example below. This is a major advantage against standard OpenTTD signals, where you had to place signals before and after junctions, which caused trains to block junctions while waiting.
[[File:en/Manual/Yapp unsafewaitinglocation.png|frame|center|The signal indicated by the arrow is an unsafe waiting location, as the train in the junction now blocks the otherwise free path of the train coming from the top. There's a second unsafe waiting location in this picture. Can you find it?]]

====Patch opties====
[[File:en/Manual/Yapp patch-options.png|frame|right|YAPP Patch options]]YAPP adds three patch options to the game.


One option is to highlight reserved tracks. This option is useful to troubleshoot your junctions, as you can see what paths trains have reserved through a signal block.


The other two options control how the build signal tool should behave. You can set the signal type which should be built
by default when building a new signal with the signal tool and change which signal types should be cycled through on ctrl-clicking
an already existing signal.


There are a few more patch options which are not available through the Configure Patches windows. What these options are, and how to edit them is covered below
under [[#geavanceerde-patch-opties|geavanceerde patch opties]].

===Basis voorbeelden===
Below are some example track layouts which use the path signals. Advanced track layouts that are not recommended for beginners are on a [[en/Community/Junctionary/Advanced path signal layouts|separate page]].

====Basis kruising====
This basic junction now has a much higher throughput.
[[File:en/Manual/Yapp basicjunction.png|frame|center|Basic junction for trains with maxlength three tiles. Note the use of normal signals on plain track.]]

====Basis tweerichtingen station====
With this station layout, trains can use both platforms when coming from either direction.
[[File:en/Manual/Yapp basicstation.png|frame|center|Basic station.]]

====Basis enkelspoor====
This is the basic layout of a single track line that can be used in both directions. A single track line with several passing points can be built by repeating the layout. Increased throughput can be achieved with an [[en/Community/Junctionary/Advanced path signal layouts#prioritised-single-track-layout|improved layout]].
[[File:en/Archive/Manual/Yapp single track.png|frame|center|Basic single track building block. The outward signals should be moved far enough away from the junction tiles that waiting trains do not block the junctions.]]

===Geavanceerde patch opties===
YAPP has several options not accessible through the patch settings window. These are saved in your [[en/Archive/Manual/Settings/Openttd.cfg]] and
can be changed either with a text editor or through the in-game [[en/Manual/Console]] using the "patch" command. Changes made in openttd.cfg '''will not''' affect
already started savegames, you have to use the console to change the values of a running game.

{| border = "1"
!colspan="3"| Advanced options
|-
| '''Option''' || '''Default''' || '''Description'''
|-
| pf.wait_for_pbs_path || 30 || How long to wait for a path reservation (in days). Set this value to 255 if you don't want trains to ''ever'' turn around at a path signal on their own.
|-
| pf.path_backoff_interval || 20 || Ticks between checks for a free path. Increase if you have a slow computer. Set to 255 to disable path look-ahead if you don't want to use advanced signals.
|-
| pf.npf.npf_rail_pbs_cross_penalty || 300 || Pathfinder penalty for crossing a reserved tile when using [[en/Archive/Manual/Settings/New global pathfinding]].
|-
| pf.npf.npf_rail_pbs_signal_back_penalty || 1500 || Pathfinder penalty for passing a path signal from the backside when using [[en/Archive/Manual/Settings/New global pathfinding]].
|-
| pf.yapf.rail_pbs_cross_penalty || 300 || Pathfinder penalty for crossing a reserved tile when using [[en/Archive/Manual/Yet Another Pathfinder]].
|-
| pf.yapf.rail_pbs_station_penalty || 800 || Pathfinder penalty for crossing a reserved station tile when using [[en/Archive/Manual/Yet Another Pathfinder]].
|-
| pf.yapf.rail_pbs_signal_back_penalty || 1500 || Pathfinder penalty for passing a path signal from the backside when using [[en/Archive/Manual/Yet Another Pathfinder]].
|-
| pf.yapf.rail_doubleslip_penalty || 100 || Pathfinder penalty for passing a double slip switch when using [[en/Archive/Manual/Yet Another Pathfinder]].
|}
{{nl/Kenmerken|0.7|0.7.0}}

== Zie ook ==
* [[nl/Community/Junctionary/Geavanceerde routeseinlayouts|Geavnaceerde routeseinlayouts]]

[[Category:nl/Manual/Constructie]]
[[Category:nl/Manual/Spoorwegen]]
[[Category:nl/Manual/Instellingen en voorkeuren]]
[[Category:nl/Ontwikkelingen]]