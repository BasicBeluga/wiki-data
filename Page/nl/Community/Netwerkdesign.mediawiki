[[Translation:en/Community/Railway Designs]]
{{nl/Vertaling|en/Community/Railway Designs|30}}
{{nl/Manual/Inhoudsopgave}}

=Draagkracht van je netwerk=
Deze pagina is bedoeld als enkel een theoretische uitleg over de draagkracht. Kruisingen en netwerken zijn veel belangrijker. Onder voorbehoud, laten we de verschillende factoren eens bekijken die de draagkracht beïnvloeden.

==Seinafstand (SA)==
Dit is een vrij duidelijke factor. Ver uit elkaar staande seinen resulteren in een lage draagkracht. Met een '''SA''' van één sein per N tegels, zal de minimum afstand tussen twee op volle snelheid rijdende treinen nooit kleiner zijn dan N+1 (Figuur 1). Wanneer treinen zo dicht bij elkaar rijden, heb je de theoretisch maximale dichtheid voor treinen bereikt. In de praktijk is het bereiken van deze dichtheid onmogelijk.
[[File:en/Community/Pat Fig1.png|frame|none|Figuur 1: Minimale afstand treinafstand van vijf bij een seinafstand van vier]]

===Dus welke seinafstand kan ik gebruiken?===
* Twee tegels
Een '''SA''' van twee geeft een minimum gat van 3, en is de optimale praktische oplossing. 

*Een tegel
Een '''SA''' van een levert volop problemen op. Zelfs een spoorsplitsing veroorzaakt een gat bij de seinen. Het is mogelijk om spoor onder een hoek met een sein te verbinden met een tussenruimte van 1, maar dit leidt tot een behoorlijke verhoging van bouw complexiteit.

* Halve tegel
Spoor onder een hoek heeft de mogelijkheid tot dubbele seindichtheid. Dit kan theoretisch interessant zijn, of voor het sparen van een paar millimeter bij een bijna-ongeluk situatie.

[[File:en/Community/Pat Fig2.png|frame|right|Figuur 2: Tussenruimte seinen is inefficiënt]]
Welke '''SA''' je ook kiest, een belangrijke overweging is consistentie. De capaciteit van een spoor wordt bepaald door de grootste seinafstand op dat traject. Dus, een traject met een sein elke twee tegels, dat een abnormale tussenruimte heeft van drie of vier tegels, zal te leiden hebben van een grote vermindering van de capaciteit en kan in potentie zorgen voor een file, en daarmee regel 1 overtreden (Figuur 2).

In OpenTTD bewegen treinen langzamer in bochten (dank je SmatZ!), en dus vereisen deze bochten een verhoging van de seindichtheid om flessenhalzen te voorkomen - als je een autoseinen instelling van 2 gebruikt, moet je handmatig de seindichtheid verhogen op gebogen spoor naar 1.<br style="clear:both;">

==Treinlengte (TL)==
Dit is een zwaard dat aan twee kanten snijdt. Een langere trein zal de waarschijnlijkheid verhogen op het ontstaan van een straf voor de realistische acceleratie, met als gevolg een meer gespreide constructie en complexer. Echter, een langere treinlengte verhoogt de maximale vrachtcapaciteit van je netwerk. Merk op dat wanneer je locomotieven gebruikt met een voor- en achtersectie, maakt dat de aanvullende 1/2 tegel die wordt ingenomen, kortere treinlengtes minder aantrekkelijk.

Typische waarden van drie tot vijf tegels zijn normaal, met vier als bijzonder favoriet voor hogesnelheidnetwerken.

==Kwantificeren draagkracht==
===Treindichtheid (TD)===
Je netwerk zal een bepaald aantal treinen kunnen dragen, en aannemend dat je een gestandaardiseerde treinlengte hebt gebruikt, kunnen we enkele formule definiëren. De '''Treindichtheid (TD)''' van een spoorlijn wordt gegeven in de eenheden trein per duizend tegels, an kan worden berekend door het aantal treinen te tellen op die spoorlijn en te delen door de lengte van de spoorlijn.

Typisch gemeten waarden voor een niet geoptimaliseerd netwerk van treinen van 4 tegels lengte zijn een '''TD''' van 25 (treinen per 1.000 tegels).

De maximale '''TD''' voordat verkeersopstoppingen zichzelf blijven voortplanten, kan worden gemeten door een rij treinen te laten accelereren van nul naar maximale snelheid, en de tussenafstand op het moment van het bereiken van de maximale snelheid te meten. Daarbij gebruik je de volgende formule: 

'''1.000 / (TL + treinafstand)'''

Bijvoorbeeld, een volgeladen 4-tegel [[nl/Manual/Base Set/Trains/Lev4 'Chimaera'|Chimaera]] (de snelste [[nl/Manual/Base Set/MagLev|magneetzweeftrein]] op dit moment) heeft een tussenruimte kunnen realiseren van 12, gegeven de kritieke dichtheid van 1.000/16 = 62,5.

Omdat deze kritische dichtheid informatie bevat over de acceleratie en de tijd nodig op op topsnelheid te komen, kan het jou ook vertellen wat de praktische capaciteit van je netwerk is. Bijvoorbeeld als je treinen gebruikt met een lager topsnelheid, wordt het gemakkelijker om een dichter netwerk te hebben. De gemiddelde tussenafstand voor treinen is veel kleiner voor spoorwegen dan voor monorails of magneetzweefbanen. Herhalen we het vorige voorbeeld voor elektrisch spoor dan geeft de [[nl/Manual/Base Set/Trains/T.I.M.|T.I.M.]] een tussenafstand van slechts 6, en een kritische dichtheid van 100. Langzaam betekent niet beter, tenzij de gereduceerde lijndichtheid meer dan gecompenseerd wordt door een snelle omloopsnelheid.

Het is mogelijk om een netwerk te draaien met een hogere dichtheid dan de kritische dichtheid, maar dat wordt niet aanbevolen.

===Theoretische maximale treindichtheid===
Eenvoudig gezegd, dit is de treindichtheid als je netwerk volledig is opgevuld met treinen met overal de minimale tussenafstand. Je zult dit nooit realiseren. 

Dit wordt aangegeven met de formule ''' 1.000 / (TL + SA + 1) '''

Bijvoorbeeld, 4-tegel treinen en een seinafstand van 2 levert een theoretische maximale treindichtheid van 140.

==Draagkracht (DK)==
Omdat '''TL''' de draagkracht verandert van een spoorlijn, is het vergelijken van de '''TD''' over verschillende '''TL''' zinloos. Om een efficiënte vergelijking te kunnen maken tussen verschillende persoonlijke voorkeuren, hebben een nieuwe formule nodig. Deze nieuwe formule is eenvoudigweg een maat van het aantal eenheden vracht dat je netwerk transporteert per jaar, per spoorlijn. Dit is direct evenredig met de gemiddelde hoeveelheid vracht per spoortegel, en ook met hoe snel deze vracht wordt verplaatst.

Werk aan deze eenheid is in voorbereiding.

=Je netwerk efficiënter maken=
Ok, nu we de parameters hebben gedefinieerd die intuïtief al hadden verwacht, hoe kunnen we deze gebruiken om ons netwerk te verbeteren? De gouden regel voor netwerk optimalisatie is dat treinen op het netwerk nooit vertragen. Er zijn twee mogelijke delen van een netwerk waar dat zou kunnen gebeuren, splitsingen en samenvoegingen.

==Splitsingen==
Voordat een spoor wordt gesplitst, moet je je ervan overtuigen dat er geen langere dan normale seinafstand is op de splitsing. Dit kun je verzorgen door overdadige plaatsing van seinen.

==Samenvoegingen==
Samenvoegingen stellen ons voor een uniek probleem. Bij een onbeduidende samenvoeging kunnen treinen op de hoofdlijn in potentie worden gestopt door een trein die van de zijlijn komt. Er is al een hoeveelheid werk hierover gemaakt op [http://www.openttdcoop.org/wiki/Priorities Priorities] door medewerkers in het coöperatieve circuit. A perusal of this link should familiarise you with the principles of priority merges.

Consider a typical non-junction merge, at the exit of a pickup station. A tightly-packed optimised stream of trains enters the station, but because of differences in loading times, this order is disrupted on the station exit, and you end up with two tracks of loosely-packed trains. One of these lines, designated the main line, will have, on average, train-train gaps large enough to fit a third train into. Simply connecting the two lines together will not work, and a priority merge is required.

Note that, because trains that drop off cargo always spend the same length of time at a platform, it is possible to dematerialise and reassemble a tightly packed stream of trains, even one above the critical density! (Figure 3)
[[File:en/Community/Diamond Stream.png|thumb|800px|none|Figure 3: Dropoff with stream reassembly]]

A first-pass merge using a priority block will reduce the traffic ratio from 1:1 to about 3:1 in favour of the main track (Figure 4). Adding a second priority merge straight after the first one would be a futile gesture, since trains on both lines would continue at the same speed and the mainline train would simply claim priority again. Introducing a delay by a loop of track, followed by a second priority merge, will reduce the sideline to a mere trickle of trains and will have filled in most of the available slots on the mainline. Existing solutions would involve a pre-acceleration track, however a cyclotron eliminates the need to lose momentum.
[[File:en/Community/Priority Merge.png|frame|none|Figure 4: Priority merge]]

===Cyclotrons===
Consider a sideline that loops back on itself after a failed priority merge. A train in this loop would continue to re-test the mainline for entry conditions, once every 8 * '''TL'' tiles until it found a space large enough to merge with the main line. After the cyclotron was empty, the next waiting train could pre-accelerate and be injected into the cyclotron, ready to continue the cycle. This system has some flaws, however, as it has a capacity of one train and there will be many missed opportunities due to the train being in the wrong position in the accelerator. ''[Broken link to Simple Cyclotron removed.]'' Junctions are a large and well-trodden area of openttd; I have restricted myself to unbranched feeder structures. You will find that a highly-optimised stream of trains does NOT weather a junction well.

Refinements to the cyclotron are possible. There is enough space on the track loop to contain two trains, and a system of priority signals will enable a second train to optionally enter the cyclotron. With two trains in the cyclotron, there will be a doubled chance of entering a slot on the mainline. In order to prevent a traffic jam inside the cyclotron (which would be disasterous), some delay tweaking is necessary, but the end result is exceedingly useful.

The injection delay assumes that the second injected train is accelerating from standstill, and there is a small chance that second train has in fact chanced upon the cyclotron entrance at full speed. In this case, the timing will be wrong and the second train will almost certainly cause a jam within the cyclotron (and consequently on the main line). This can be compensated for by some additional signalling to filter out full-speed trains. The filtered out full-speed trains can either be diverted onto a second loop, or simply drained of momentum by a signal. 

A cyclotron incorporating all the optimisations discussed, and some additional fixes, is shown in Figure 5.
[[File:en/Community/Junctionary/Cyclotron Full.png|thumb|800px|none|Figure 5: full-featured cyclotron]]

''[Broken link to a savegame removed.]''

Editor's note: Whilst I would like to defend my cyclotron refinements, experimentation has proven that pre-acceleration is a more robust system. The two have been combined in the savegame linked previously.
{{nl/Kenmerken|0.7|text= 0.7.0}}

===Parallele cyclotrons===
An attempt to minimize the drawbacks of the full featured cyclotron leads to parallel, small, 1-train cyclotrons. In this design, an array of cyclotrons, each handling one train, may be fed simultaneously. They may have different loop size in order to prevent synchronization between the cycling trains, giving more chance to find a slot in the flow of the main line. Each loop still needs it own acceleration lane so the trains enter the loop at full speed. If a train happened to enter the loop at low speed, it would get a chance to join the main line at non-max speed and cause a possibly large traffic jam.

Figure 6 shows a parallel cyclotron with two loops.
[[File:en/Community/Junctionary/Parallel Cyclotron.png|thumb|800px|none|Figure 6: Parallel cyclotron]]

A savegame with the example given in Figure 6 is available [http://gbizzotto.free.fr/parallel_cyclotron.sav Here] (version 0.7 or higher required to open).

Advantages over the full featured cyclotron:
* Can handle more than two trains
* Faster fail-and-retry pace
* No need to synchronize the looping trains
* Easier to build and remember

Drawbacks:
* Bigger when using more than one loop