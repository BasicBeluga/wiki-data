{{pl/Development/NewGRF/inne strony|en=newgrf-specs.tt-wiki.net/wiki/Action0/Stations|pl=pl/Development/NewGRF/NFO Specs/Action0/Stations}}
<!--{{-}}<br>--><!--{{ambox | text = w trakcie edycji.}}--><!-- -->
==Wprowadzenie==

Definiowanie właściwości nowych stacji.


W przeciwieństwie do pojazdów, nowe stacje nie mają odpowiednika TTD. W związku z tym można wybrać dowolne identyfikatory i w rzeczywistości zostaną one przydzielone automatycznie. W akcji 0 podajesz tylko identyfikatory w stosunku do zestawu, tj. Identyfikator pierwszego typu stacji to 00, drugi typ stacji to 01 itd..

{{pl/Development/NewGRF/ttdp|}} W TTDPatch każda gra może mieć tylko 255 identyfikatorów stacji dla wszystkich aktywnych plików grf.

Jedyną właściwością, którą '''musisz''' ustawić dla każdego ID stacji, jest 08 (oprócz zdefiniowania dla niej [[pl/Development/NewGRF/NFO Specs/Action3/Main Page|action 3]] ), wszystko inne można pozostawić domyślnie. Musi to być pierwsza właściwość ustawiona dla każdego ID stacji, ponieważ ID stacji jest faktycznie niezdefiniowany, dopóki nie zostanie mu przypisana klasa za pośrednictwem właściwości 08. Ponadto wszystkie ID''`y'' stacji muszą uzyskać swoje klasy we właściwej kolejności, zaczynając od ID 00.

== Properties ==

{| |-
!Number!![[pl/Development/NewGRF/NFO Specs/GRFActionsDetailed|Size]]!!Version!!Description
|-
|08||D||{{pl/Development/NewGRF/ottdp|0.6|2.5|ttdprev=alpha 19}}||Class ID, see below
|-
|09||V||{{pl/Development/NewGRF/ottdp|0.6|2.5|ttdprev=alpha 20}}||Sprite layout, see below
|-
|0A||B||{{pl/Development/NewGRF/ottdp|0.6|2.5|ttdprev=alpha 20}}||Copy sprite layout
|-
|0B||B||{{pl/Development/NewGRF/ottdp|0.6|2.5|ttdprev=alpha 22}}||Callback flags
|-
|0C||B||{{pl/Development/NewGRF/ottdp|0.6|2.5|ttdprev=alpha 22}}||Bit mask of disabled numbers of platforms
|-
|0D||B||{{pl/Development/NewGRF/ottdp|0.6|2.5|ttdprev=alpha 22}}||Bit mask of disabled platform lengths
|-
|0E||V||{{pl/Development/NewGRF/ottdp|0.6|2.5|ttdprev=alpha 22}}||Define custom layout, see below
|-
|0F||B||{{pl/Development/NewGRF/ottdp|0.6|2.5|ttdprev=alpha 22}}||Copy custom layout from stationid given by argument
|-
|10||W||{{pl/Development/NewGRF/ottdp|0.6|2.5|ttdprev=alpha 25}}||Little/lots threshold
|-
|11||B||{{pl/Development/NewGRF/ottdp|0.6|2.5|ttdprev=alpha 27}}||Pylon placement
|-
|12||D||{{pl/Development/NewGRF/ottdp|0.6|2.5|ttdprev=alpha 30}}||Bit mask of cargo type triggers for random sprites
|-
|13||B||{{pl/Development/NewGRF/ottdp|0.6|2.5|ttdprev=alpha 30}}||General flags
|-
|14||B||{{pl/Development/NewGRF/ottdp|0.6|2.5|ttdprev=alpha 47}}||Overhead wire placement
|-
|15||B||{{pl/Development/NewGRF/ottdp|0.6|2.5|ttdprev=alpha 51}}||Can train enter tile
|-
|16||W||{{pl/Development/NewGRF/ottdp|0.7|2.5|ttdprev=beta 9}}||Animation information
|-
|17||B||{{pl/Development/NewGRF/ottdp|0.7|2.5|ttdprev=beta 9}}||Animation speed
|-
|18||W||{{pl/Development/NewGRF/ottdp|0.7|2.5|ttdprev=beta 9}}||Animation triggers
|-
|19||V||{{pl/Development/NewGRF/ottdp}}||Road routing (reserved for future use)
|-
|1A||V||{{pl/Development/NewGRF/ottdp|1.2|no|ottdrev=r22518}}||Advanced sprite layout with register modifiers
|}


Nieoficjalne uzupełnienia i zmiany. Nie polegaj na nich, aby kiedykolwiek działały w ten sposób w OpenTTD lub TTDPatch:
{| |-
!Number!![[en/GRFActionsDetailed|Size]]!!Version!!Description
|-
|1B||8*B||whatever-PP||Minimum bridge height for bridges over stations
|}

== Description ==

=== Station class (08) ===
TTDPatch grupuje zestawy nowej grafiki stacji w różne klasy. &nbsp;Klasy można wybrać z górnej listy rozwijanej w oknie konstrukcyjnym, a poszczególne stacje w klasie z dolnej listy rozwijanej. &nbsp;Ponadto każda stacja może zmienić swój wygląd za pomocą [[pl/Development/NewGRF/NFO Specs/VariationalAction2/Main Page|variational]] i/lub [[pl/Development/NewGRF/NFO Specs/RandomAction2|random]] działania 2 wpisów.

Tylko dwie klasy są wstępnie zdefiniowane:

{| |-
!Name!!Class ID!!Intended use for station
|-
|DFLT||44 46 4C 54||Default, no special station type
|-
|WAYP||57 41 59 50||Non-cargo stations, waypoints, signal boxes etc.
|}

Możesz po prostu użyć innych klas niż powyższe, o ile nie jest (więcej niż (obecnie)) 16 klas używanych we wszystkich aktywnych plikach .grf w dowolnym momencie.

Gdy zbudowana zostanie stacja WAYP, nie będzie ona przyjmować ładunku ani nie będzie ładunku z pobliskich gałęzi przemysłu lub miast. &nbsp;Pociągi nie zatrzymują się na stacjach WAYP, niezależnie od kolejności non-stop i / lub przełącznika non-stop.

=== Sprite layout (09) ===
Kontroluje to, które 'sprites' są wyświetlane, gdzie są wyświetlane i w jakiej kolejności. &nbsp;Właściwość jest zmiennej wielkości i zawiera dane dla wszystkich 8 możliwych typów kafelków stacji. &nbsp;Jeśli ta właściwość jest ustawiona, liczba w odpowiedniej [[pl/Development/NewGRF/NFO Specs/Action1|action 1]] nie musi być równa 12 (hex), może to być dowolna liczba, a dowolna liczba 'sprites' może być wyświetlana w dowolnej kolejności.

W ten sposób dane są określone jako dane dla wszystkich ośmiu kafli:

<pre>&lt;num&gt; &lt;data1&gt; &lt;data2&gt; ... &lt;datan&gt;</pre>

{| |-
!Size!!Name!!Meaning
|-
|B*||num||Number of different tiles supported (see below)
|-
|V||data1...||The variable size data for each of the &lt;num&gt; tiles, as specified below
|}

===== Number of tiles supported =====
* Zwykle jest to 8, ale możesz też podać mniej
* Korzystanie z flagi oddzwaniania bit 1, określenie więcej też ma sens
* Ta wartość musi być taka sama dla wszystkich stacji ustawionych przez tę akcję 0, nawet jeśli musi zostać powtórzona dla śmigła. 09 definicja każdego ID stacji

(Zauważ, że num jest rozszerzonym bajtem, patrz [[pl/Development/NewGRF/NFO Specs/GRFActionsDetailed|GRFActionsDetailed]].)

Zawartość każdego (zwykle ośmiu) zestawów danych jest albo nowym układem ikonek:

{| |-
!Size!!Name!!Meaning
|-
|D||groundsprite||the sprite to draw for the rails; this is by default a TTD sprite, but with bit 31 set an [[en/Action1|action 1]] sprite (42D+X) may be specified
|-
|V||spritedata||the data for station sprites, see below; each has a size of 10 bytes, and there may be several
|-
|B||80||a literal 80 ends the list of sprites for this tile
|}
lub, alternatywnie, instrukcja użycia układu TTD przy użyciu czterech bajtów zerowych 00 00 00 00 zamiast bajtów dna naziemnego. Możesz użyć  [http://www.bytetransfer.de/projects/ttdpatch/docs/spriteidmapping.php the online sprite ID converter] , aby wyszukać ID''`y'' 'sprite', których możesz użyć dla wszystkich klimatów.

Można narysować dwa rodzaje 'sprites' . &nbsp;Jeden typ to taki, który ustanawia nową ramkę ograniczającą 3D do użytku przez sortownik 'sprites' . &nbsp;Drugi typ dzieli obwiednię 3D poprzednich ikonek. &nbsp;Nie może być większy niż 'sprite' , który ustanowił obwiednię, ani żadna jej część nie może znajdować się poza tym polem. &nbsp;Dla uproszczenia powinien mieć dokładnie takie same wymiary, jak 'sprite' , z którym dzieli obwiednię. &nbsp;Ten ostatni typ jest obsługiwany na ekranie okna budowy stacji tylko od TTDPatch 2.6 r1684.

Spritedata ikonek z własnym obwiednią ma ten format:

{| |-
!Size!!Name!!Meaning
|-
|B||xofs||x-offset from northern tile corner
|-
|B||yofs||y-offset from northern tile corner
|-
|B||zofs||z-offset from northern tile corner
|-
|B||xextent||size of sprite in x direction
|-
|B||yextent||size of sprite in y direction
|-
|B||zextent||size of sprite in z direction
|-
|D||sprite||sprite number to draw
|}

Spritedata 'sprites' dzielących obwiednię ma ten format:

{| |-
!Size!!Name!!Meaning
|-
|B||xofs||x-offset relative to previous sprite
|-
|B||yofs||y-offset relative to previous sprite
|-
|B||80||a literal 80
|-
|B||00||(ignored)
|-
|B||00||(ignored)
|-
|B||00||(ignored)
|-
|D||sprite||sprite number to draw
|}

Od OpenTTD r18959 możesz narysować wiele 'sprite' ziemi na płytkę, co jest przydatne, jeśli chcesz użyć zwykłej płytki podłogowej szyny / trawy / betonu, ale nadal musisz dodać do niej funkcje bez korzystania z nowej ramki ograniczającej. Aby to zrobić, użyj składni ikonek współużytkujących poprzednią ramkę ograniczającą, ale użyj jej przed definicją pierwszej ramki ograniczającej. xpixeloffset i ypixeloffset odnoszą się do zwykłego miejsca płytek naziemnych. Ta sama funkcja jest również częściowo obsługiwana w TTDPatch, ponieważ TTDPatch 2.6 r2312: TTDPatch ignoruje pola xofs i yofs i zawsze używa (0,0) dla offsetu. Jeśli tworzysz GRF, który musi być zgodny zarówno z OpenTTD, jak i TTDPatch, zawsze powinieneś utrzymywać xofs i yofs zero, aby uzyskać ten sam efekt w obu grach.
Zauważ jednak, że obie implementacje nie biorą pod uwagę  [[pl/Development/NewGRF/NFO Specs/Action0/Stations#general-flags-13|setting of prop13 bit 0]] , dlatego te "liczne 'sprites' naziemne" <small>''(multiple ground sprites)''</small> muszą zawsze być częścią zestawu 'sprite' budynku i nie mogą być częścią inny zestaw ikonek dla ikonek naziemnych.

Liczba ikonek może mieć następujące wartości (pamiętaj, aby używać małego endiana, tj. Odwróconej kolejności bajtów):

{| |-
!Number!!Sprite
|-
|0000042D+X||use sprite X from the corresponding [[en/Action1|action 1]] block (i.e. 0000042D for the first, 0000042E for the second, etc.)
|-
|0000842D+X||same, but draw it using company colour translation
|-
|0322442D+X||same, but draw in transparent mode (actual colours of the sprite are disregarded entirely); supported in station construction window display since TTDPatch 2.6 r1683
|-
|RRRR842D+X||draw sprite with colour translation defined in sprite RRRR; available since TTDPatch 2.6 r1683
|}

Przy ustawionym bicie 31 ten 'sprites' będzie odnosił się do 'sprite' TTD, a nie 'sprite' akcji 1. Dla pierwszego 'sprite' naziemnego obowiązuje odwrotne znaczenie.

W zależności od rodzaju szyny sprajty mogą uzyskać dodatkowe przesunięcia <small>''(offsets)''</small> :

{| |-
! !! Normal/electrified rail !! Monorail !! Maglev
|-
|TTD sprites || 0 || 82 || 164
|-
|Action 1 sprite (first ground sprite) || 0 || 1 || 2
|-
|Action 1 sprite (other sprites in the layout) || 0 || 0 || 0
|}

Tak więc 'sprites' TTD i pierwszy 'sprite' naziemny są pod wpływem typu szyny, podczas gdy inne 'sprites' akcji 1 w układzie nie są. Przesunięcie "82" odnosi się do przesunięcia między domyślnymi 'sprites' torowymi TTD; jeśli używasz niedziałających naziemnych ikonek, które nie pochodzą z akcji 1, musisz dostarczyć fałszywe numery ikon, które zapobiegawczo odwrócą przesunięcia (to znaczy, potrzebujesz różnych układów ikon dla każdego typu linii, dla którego twoja stacja jest dostępna).

Ustawienie bitu 30 wymusza normalne wyświetlanie tego 'sprite' nawet w trybie "przezroczystych budynków" <small>''(transparent buildings)''</small> (obsługiwane tylko w TTDPatch 2.6 r1695 i późniejszych).

Poniżej znajduje się przykład połączonych 'sprites' , a także przezroczystych 'sprites' (np. Na dachu stacji).

Zauważ, że współrzędne tutaj są współrzędnymi 3D, przy czym x biegnie od prawego górnego rogu do lewego dolnego, zaś y biegnie od lewego górnego rogu do prawego dolnego rogu, przy czym wymiary kafelków wynoszą 16 x 16 (i 8 dla jednego poziomu wysokości). Oznacza to, że wartości xiy powinny zawsze zawierać się w przedziale 0–15 (dziesiętnie).

Różni się to i jest niezależne od przesunięć x/y używanych w rzeczywistym pliku .NFO. &nbsp;Obwiednia 3D jest używana przez sortownik sprite'ów TTD do określenia kolejności rysowania 'sprites' , a także do wskazania, które 'sprites' mają rysować, ponieważ te, których ramka graniczna wykracza poza aktualnie aktualizowany prostokąt ekranu, nie zostaną narysowane. &nbsp;Upewnij się, że obwiednia 3D jest wystarczająco duża, aby pomieścić całego 'sprite' , ale nie tak duża, aby sortownik 'sprite' nie mógł określić, które 'sprites' powinny być z przodu.

Oznacza to, że kolejność określania 'sprites' jest nieistotna. &nbsp;'Sprites' będą rysowane od tyłu do przodu, w kolejności, którą sortownik 'sprite' określa jako prawidłowy, z ich ramek ograniczających. &nbsp;Istnieją jednak dwa wyjątki:
* 'Sprites' dzielące to samo obwiednię zawsze będą rysowane w podanej kolejności.
* Okno wyświetlania konstrukcji stacji nie korzysta z sortownika 'sprites' . Kafelki, które mogą być wyświetlane w tym oknie, muszą być określone we właściwej kolejności rysowania, od tyłu do przodu.

=== Copy sprite layout (0A) ===

To nie jest właściwość jako taka, ale działanie. &nbsp;Jako argument przyjmuje bajt interpretowany jako ID stacji do skopiowania niestandardowego układu ikonki.

=== Callback flags (0B) ===
W przypadku stacji można zdefiniować następujące [[pl/Development/NewGRF/NFO Specs/Callback/Main Page|callbacks]] poprzez ustawienie odpowiedniego bitu we właściwości 0B:

{| |-
!Bit!!Value!!Variable 0C value!!Callback
|-
|0||1||13||Whether to make station available in construction window (non-zero callback return) or not (callback returns zero)
|-
|1||2||14||Use callback to select sprite layout
|-
|2||4||141||Decide next animation frame
|-
|3||8||142||Decide animation speed
|-
|4||10||149||Custom slope check
|}
Bit to bit, który musisz ustawić, robisz to poprzez dodanie wszystkich wartości dla wszystkich bitów. Zmienna wartość 0C to ta, dla której zostanie ustawiona zmienna 0C, do sprawdzania jej w   [[en/VariationalAction2|VarAction2]] dla wywołań zwrotnych.

=== Selection of numbers of platforms and length (0C, 0D) ===

Domyślnie dla wszystkich stacji dostępne są wszystkie długości platform i dowolna liczba platform. &nbsp;Korzystając z tych właściwości, możesz wybrać, które mają być niedostępne, ustawiając odpowiedni bit we właściwości.

Wartości są bajtami używanymi jako maska ​​bitowa. &nbsp;Bity od 0 do 6 kontrolują dostępność liczby lub długości od 1 do 7, a bit 7 kontroluje dostępność przycisku "+7" . &nbsp;Każdy ustawiony bit wyłącza odpowiednią długość lub liczbę platform.

W celu zapewnienia zgodności z "największymi wyłączeniami" <small>''(largestations off)''</small> musi być dostępna co najmniej jedna długość od 1 do 5 (bity od 0 do 4) i jedna liczba platform od 1 do 4 (bity od 0 do 3), tzn. Co najmniej jeden z tych bitów musi być nieoprawny.

=== Define custom layout (0E) ===

Pozwala to wybrać, który typ kafelka jest budowany, na którym kafelku nowo budowany

stacja. &nbsp;Istnieją cztery różne typy, które TTD zwykle określa jako

{| |-
!Tile type!!Appearance
|-
|00||plain platform
|-
|02||platform with building
|-
|04||platform with roof, left side
|-
|06||platform with roof, right side
|}

Te liczby są używane dla stacji w kierunku NE-SW lub te liczby plus jeden dla stacji w kierunku NW-SE. &nbsp;Aby zdefiniować niestandardowy układ, użyj tego formatu:

{| |-
!Size!!Name!!Meaning
|-
|B||length||length of platforms for this layout
|-
|B||number||number of platforms for this layout
|-
|V||tiles||length*number bytes of tile types, one platform after another, only 00, 02, 04 or 06 are allowed as values
|}

Powtarzaj to tak często, jak to konieczne, aby zdefiniować układy dla wszystkich obsługiwanych kombinacji długości i liczby. &nbsp;Zakończ definicje 00 00 (długość zerowa i liczba zerowa). &nbsp;Wszelkie niezdefiniowane kombinacje zostaną zbudowane przy użyciu domyślnego układu TTD.
Zauważ, że łatwiejsze może być rysowanie różnych zestawów ikonek za pomocą  [[pl/Development/NewGRF/NFO Specs/VariationalAction2/Main Page|VarAction2]] w oparciu o [[pl/Development/NewGRF/NFO Specs/VariationalAction2/Stations#platform-info-40-41-46-47-49|station variable 40]] , zamiast redefiniowania układu. &nbsp;Ponadto [[pl/Development/NewGRF/NFO Specs/Callback/Main Page#custom-station-layout-24|callback 24]]  zostanie wykorzystany do dalszego dostosowania układu zgodnie z definicją tej właściwości (lub TTD, jeśli nie jest dostępny układ prop 0E). Może to być również łatwiejsze niż zdefiniowanie układu prop 0E dla każdej kombinacji długości i liczby platform.

=== Copy custom layout (0F) ===

Podobnie jak właściwość 0A, kopiuje niestandardowy układ z identyfikatora stacji podanego przez argument.

=== Little/lots threshold (10) ===
Ilość ładunku do zamiany z "małego" na "dużo" ładunku. &nbsp;TTDPatch dzieli pełny zakres ilości ładunku (od 0 do 4095) na dwa oddzielne podzakresy, "mało" i "dużo" ładunku. &nbsp;Umożliwia to lepszą kontrolę grafiki opartej na ilości ładunku (w razie potrzeby). &nbsp;Właściwość 10 określa, przy jakiej ilości ładunku łata ma się przełączać z jednego do drugiego podzakresu. &nbsp;Więcej informacji można znaleźć w [[pl/Extrazi/specs.tt/Action2Stations|Action 2 for stations]] .

=== Pylon placement (11) and wire placement (14) ===
Prop. 11 określa, które typy płytek powinny mieć pylony, gdy są używane z naelektryzowanymi ścieżkami. Domyślnie płytki 0-3 (domyślne stacje bez dachu) mają pylony, a płytki 4-7 (domyślne stacje z dachem) nie. Jest to nieco maska ​​typów kafelków, a nieco ustawiony oznacza, że ​​należy narysować pylon. Typy kafelków tutaj nie biorą pod uwagę [[pl/Development/NewGRF/NFO Specs/Callback/Main Page#station-sprite-layout-14|callback 14]] , ale raczej typ, w jakim został zbudowany, tj. Z prop. 0E.

Prop. 14 działa w podobny sposób, z tym wyjątkiem, że ustawia typy kafli, na których powinny być wyświetlane przewody ''nie'' <small>''(no)''</small> . Przy domyślnej wartości "00" druty są wyświetlane wszędzie, a dla każdego zestawu bitów drut jest pomijany na tym typie kafelka.

Tej właściwości należy używać tylko wtedy, gdy druty powodują problemy z sortownikiem duszków, ponieważ nawet jeśli drut jest zasłonięty przez halę stacji lub podobną, powinien nadal pokazywać się w trybie przezroczystym, aby każda płytka mogła być łatwo zweryfikowana jako zelektryfikowana.

=== Cargo types for random triggers (12) ===

Określa, które typy ładunku powinny uruchamiać ponowną randomizację. Rodzaje ładunków podane są jako maska ​​bitowa bitów z kolumny 3 (typ B) w CargoTypes. &nbsp;Jeśli nic nie jest ustawione (ustawienie domyślne), nie wystąpią żadne losowe wyzwalacze, aby zaoszczędzić czas procesora.

W wersji 7 i nowszych GRF zmienia się interpretacja bitów. Zamiast numerów szczelin ładunkowych zależnych od klimatu (typ B) musisz ustawić bity niezależnego od klimatu identyfikatora ładunku (typ A).

=== General Flags (13) ===

{| |-
!Bit!!Value!!Version!!Meaning
|-
|0||1||{{pl/Development/NewGRF/ottdp|0.7|2.5}}||use different sprite set for ground sprites ([[en/GlobalVariables#extra-callback-info-10-and-18|var. 10]] is 1 for ground sprites, 0 otherwise)
|-
|1||2||{{pl/Development/NewGRF/ottdp|0.6|2.5}}||when calculating the cargo amount to display, divide the amount by the station size (to simulate cargo distributed over the area of the station)
|-
|2||4||{{pl/Development/NewGRF/ottdp|0.7|2.5}}||[[en/Callbacks#next-animation-frame-1a-26-141-153-158|callback 141]] needs random bits in var. 10
|-
|3||8||{{pl/Development/NewGRF/ottdp|1.0|2.6}}||Use custom foundations on sloped tiles (the lowest byte of [[en/GlobalVariables#extra-callback-info-10-and-18|var. 10]] is 2 for foundation sprites)
|-
|4||10||{{pl/Development/NewGRF/ottdp|1.0|2.6}}||When bit 3 is set, use extended foundation block instead of the simple one
|}

Bit 3 działa nieco podobnie do bitu 0: wybór twojego duszka zostanie ponownie wywołany, z 2 w najniższym bajcie [[pl/Development/NewGRF/NFO Specs/GlobalVariables#extra-callback-info-10-and-18|variable 10]] . Jeśli łańcuch zakończy się wynikiem wywołania zwrotnego, program przyjmie, że wybór fundamentu nie powiódł się, i użyje domyślnych duszków Foundaton. Niskie słowo  [[pl/Development/NewGRF/NFO Specs/GlobalVariables#extra-callback-info-10-and-18|variable 18]] będzie zawierać typ kafelka bieżącego kafelka; jeśli masz włączone [[pl/Development/NewGRF/NFO Specs/Callback/Main Page#station-sprite-layout-14|callback 14]] , będzie to jego wartość zwracana - w przeciwnym razie używane są domyślne typy TTD (platforma z budynkiem, platforma z lewym dachem itp.). W obu przypadkach jeden jest dodawany do orientacji NW-SE, na wypadek, gdyby twoja stacja potrzebowała różnych fundamentów w zależności od jej orientacji. Bity 16 i 17 są ustawiane, jeśli fundamenty NW i NE mają zostać połączone z odpowiednią sąsiadującą płytką, więc nie należy rysować odpowiedniej krawędzi w ikonce fundamentu. Inne bity zmiennej 10 i zmiennej 18 są zarezerwowane do wykorzystania w przyszłości.

Twój kod wyboru duszka powinien wybrać blok duszka fundacji. Zawartość tego bloku zależy od tego, czy bit 4 jest ustawiony, czy nie.
* Bit 4 czysty (proste podstawy):
<!--[[File:simple_foundations.png]]-->[http://newgrf-specs.tt-wiki.net/wiki/File:simple_foundations.png File:simple_foundations.png]

Program połączy potrzebny fundament z tych 8 duszków w zależności od aktualnego nachylenia. Nie musisz przejmować się danymi scalania w bitach 16..17  [[pl/Development/NewGRF/NFO Specs/GlobalVariables#extra-callback-info-10-and-18|variable 18]] ; zostanie to załatwione automatycznie poprzez dodanie siódmego i ósmego duszka tylko w razie potrzeby.
* Zestaw bitów 4 (rozszerzone podstawy):
<!--[[File:extended_foundations.png]]-->[File:simple_foundations.png]]-->[http://newgrf-specs.tt-wiki.net/wiki/File:extended_foundations.png File:extended_foundations.png]

Musisz mieć jednego duszka na każde nachylenie, które jest możliwe poniżej stacji kolejowej. Właściwy zostanie automatycznie wybrany w zależności od aktualnego nachylenia. Jednak nie obsługuje samego scalania, więc potrzebujesz czterech bloków fundamentowych: jeden bez usuniętych krawędzi, jeden z usuniętą krawędzią NW, jeden z usuniętą krawędzią NE i jeden z usuniętymi obydwoma krawędziami północnymi. Twój kod wyboru duszka jest odpowiedzialny za wybranie poprawności tych bloków zgodnie z informacjami o scaleniu w [[pl/Development/NewGRF/NFO Specs/GlobalVariables#extra-callback-info-10-and-18|variable 18]].

W obu przypadkach można wprowadzić dodatkową wartość do rejestru 100h, która posłuży jako przesunięcie w wybranym bloku. Jeśli nie zmodyfikujesz rejestru 100h podczas łańcucha, domyślnie będzie to 0. Ważne jest, aby wymiary tych duszków pozostały takie same - dlatego bit 6 w prawdziwych duszkach musi być ustawiony, aby GRFCodec nie przyciął pustych niebieskich obszarów . Odsunięcie tych fundamentów musi wynosić -31 w kierunku X i -9 w kierunku Y.

=== Can train enter tile (15) ===

Jak rekwizyty. 11 i 14, ta wartość zawiera osiem bitów odnoszących się do ośmiu możliwych rodzajów płytek. Jeśli bit jest ustawiony, pociągi nie mogą przejeżdżać ani wchodzić na żadne płytki tego typu.

=== Animation information (16) ===

Niższy bajt określa liczbę klatek animacji pomniejszoną o jedną, więc 00 oznacza 1 klatkę, 01 oznacza 2 klatki itp. Maksymalna liczba klatek wynosi 256, chociaż możesz mieć pewne problemy, jeśli twoja animacja przekracza liczbę klatek FD (253). Górny bajt musi wynosić 0 dla animacji nie zapętlonych i 01 dla animacji zapętlonych. Każda inna wartość jest zarezerwowana do wykorzystania w przyszłości. Ponadto, jeśli całe słowo zawiera FFFF, animacja jest wyłączona dla tej stacji (jest to wartość domyślna).
Ponieważ nie możesz mieć właściwości dla poszczególnych kafelków stacji, ta właściwość dotyczy każdego kafelka stacji. Jeśli nie chcesz animować niektórych kafelków, powinieneś sprawdzić bieżącą pozycję podczas [[pl/Development/NewGRF/NFO Specs/Callback/Main Page#animation-control-1b-25-140-152-159|callback 140]] i zwrócić FD, jeśli bieżący kafelek nie trzeba być animowanym. Jeśli potrzebujesz także animacji o różnej długości na płytkę, musisz użyć  [[en/Callbacks#next-animation-frame-1a-26-141-153-158|callback 141]] .

=== Animation speed (17) ===
The meaning is the same as for [[en/Action0Houses#animation-speed-1b|house property 1B]], but the lower limit is 0 instead of 2, so the fastest possible animation changes frames every game tick (27ms). The default value is 2.

=== Animation triggers (18) ===
This is a bit mask of events that should trigger [[en/Callbacks#animation-control-1b-25-140-152-159|callback 140]], allowing to change the animation state

{| |-
!Bit!!Value!!Version!!Meaning!!Happens on!!Var 18
|-
|0||1||{{pl/Development/NewGRF/ottdp|0.7|2.5}}||Station part is built||the newly built tiles||
|-
|1||2||{{pl/Development/NewGRF/ottdp|0.7|2.5}}||New cargo arrives to station||whole station||<ref name="cargotype">Bits 8..15 of var 18 contain the triggering cargo type. If your GRF has a cargo translation table, the cargo type will be an index in that table, or FFh if the cargo isn't in the table. If you don't have a cargo translation table, the cargo type will simply be the climate-dependent cargo type number.</ref>
|-
|2||4||{{pl/Development/NewGRF/ottdp|0.7|2.5}}||A cargo type gets removed from station||whole station||<ref name="cargotype"/>
|-
|3||8||{{pl/Development/NewGRF/ottdp|0.7|2.5}}||Train enters station (starts loading/unloading)||platform where the train is||
|-
|4||10||{{pl/Development/NewGRF/ottdp|0.7|2.5}}||Train leaves station (done loading/unloading)||platform where the train is||
|-
|5||20||{{pl/Development/NewGRF/ottdp|1.2|2.5|ottdrev=r22746}}||Train loads/unloads cargo||platform where the train is||
|-
|6||40||{{pl/Development/NewGRF/ottdp|0.7|2.5}}||Every 250 ticks||whole station||
|}

The remaining bits are reserved for future triggers, they must be zero for now.

The "happens on" column tells which tiles will [[en/Callbacks#animation-control-1b-25-140-152-159 |callback 140]] be called on.

<references/>

=== Road routing (19 - reserved for future use) ===

Will allow to have routing informations for road vehicles on rail stations,

generally you need to deny rail vehicle traveling via prop 15

This property is not yet implemented {{pl/Development/NewGRF/ottd|no}}{{pl/Development/NewGRF/ttdp|no}}.

=== Advanced sprite layout with register modifiers (1A) ===

{{pl/Development/NewGRF/ottdp|1.2|no|ottdrev=r22518}}
Format:
 1A <num-layouts> <0x40 + num-sprites>
                  <groundsprite> <flags> [<register/value>]...
                  [ <buildingsprite> <flags>
                      ( <xoffset> <yoffset> <zoffset> <xextent> <yextent> <zextent> 
                      | <xpixeloffset> <ypixeloffset> 80)
                    [<register/value>]...
                  ]...

For further details see [http://wiki.openttd.org/Frosch/Advanced_Sprite_Layout#Stations here] for now.

=== Minimum bridge height (1B) ===

This property allows building bridges over stations.

The bridge height property defines minimum clearances required for a bridge for each of the four [[en/Action0/Stations#define-custom-layout-0e|tile types]] of this station (or zero to not allow any bridge). Values are given in "height level" units (1 level == 8px).


{| class="wikitable" |-
!Height (1)!!Appearance
|-
| style="text-align:center;" |x1 y1 ||plain platform
|-
| style="text-align:center;" |x2 y2 ||platform with building
|-
| style="text-align:center;" |x3 y3 ||platform with roof, left side
|-
| style="text-align:center;" |x4 y4 ||platform with roof, right side
|}
(1) where the values are one byte pairs (x-direction, y-direction) expressed in hexadecimal notation.


Syntax:

1B <1st pair> <2nd pair> <3rd pair> <4th pair><br />
1B x1 y1 x2 y2 x3 y3 x4 y4<br />
1B 01 01 02 02 03 03 03 03 // 8px 16px 24px 24px

This property is currently only available for JGR's Patch Pack (v0.26.0 and later) and the developmental "New Map Features" (NMF) fork of OpenTTD.


== Examples ==

=== Using TTD's sprite layouts for certain tiles ===

To use TTD's layout, you use <code>00 00 00 00</code> for the ground sprite number and leave off everything else.

So instead of for example

 F4 03 00 00
    00 00 00    10 05 02    2E 84 00 00
    00 0B 00    10 05 02    30 84 00 00
    80

you just put

 00 00 00 00

=== Using transparent sprites ===

You can use transparent sprites to make for example the roof translucent like in TTD's stations. The roof of TTD's stations is made like this:

 00 00 10    10 10 0A    37 84 00 00
 00 00 80    00 00 00    3B 44 22 03

The first sprite here is the non-transparent frame of the roof, drawn in company colours (it has bit 15 set). The second part is a special "linked" sprite without its own bounding box, it shares that of the previous sprite. That's done by setting the z offset to 80.

To make that second sprite transparent, bit 14 is set in the sprite number, and the upper word is set to 322 (*), so 0322443B means to take sprite 43B and draw it in transparent mode. The colours of that sprite are ignored entirely, every pixel in colour 0 is fully transparent, and all other pixels are semi-transparent (essentially just causing what they are drawn over to become darker).

(*) To jest [[en/RecolorSprites#default-recolour-sprites | recolour sprite]] dla efektu szkła.