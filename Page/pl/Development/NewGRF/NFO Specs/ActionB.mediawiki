{{pl/Development/NewGRF/inne strony|en=newgrf-specs.tt-wiki.net/wiki/ActionB|pl=pl/Development/NewGRF/NFO Specs/ActionB}}
<!--{{-}}<br>{{ambox | text = w trakcie edycji.}}-->

== Wprowadzenie ==


Generuj komunikaty o błędach.


Za pomocą tej akcji możesz ostrzec użytkownika o problemach związanych ze sposobem ładowania pliku grf, np. niewłaściwa kolejność, niewłaściwa wersja łaty lub złe parametry.

== Syntax ==

Dane wyglądają następująco:

 <Sprite-number> * <Length> 0B <severity> <language-id> <message-id> [<message>] [<data> [<parnum> [<parnum>]]]

{|
!Element!![[en/GRFActionsDetailed|Size]]!!Description

|-
|<Sprite-number>||dec||A sequential sprite number

|-
|<length>||dec||The total number of bytes used in this action

|-
|0B||B||Defines action 0B

|-
|<severity>||B||How severe the message is (notice/warning/error/fatal error)

|-
|<language-id>||B||What languages to display this message for

|-
|<message-id>||B||What message to show

|-
|<message>||S||Text of a custom message, only present if <message-id>==FF

|-
|<data>||S||String to insert in built-in or custom messages

|-
|<parnum>||B||GRF parameter(s) to display in message
|}

== Description ==

=== Sprite-number ===

To tylko numer, na którym jesteś.

=== Length ===

Policz liczbę bajtów w tej akcji.

=== severity ===

Określa to, jak poważna jest wiadomość.

{|
!Severity!!Meaning!!Prefix!!Action taken

|-
|00||Notice||(none)||continue loading grf file

|-
|01||Warning||"Warning: "||continue loading grf file

|-
|02||Error||"Error: "||continue loading grf file

|-
|03||Fatal error||"Error: "||abort loading of grf file
|}

Zwykle Akcja B jest ignorowana podczas inicjalizacji. Jeśli istotność ma ustawiony bit 7, działanie krytyczne B zostanie zastosowane nawet podczas inicjalizacji. Może to być przydatne, aby zapobiec błędom spowodowanym przez nieprawidłowe duszki podczas inicjalizacji. Zauważ, że działa to poprawnie tylko od TTDPatch 2.0.1 alpha 66, we wcześniejszych wersjach pokazane okienko błędu jest uszkodzone, jeśli ustawiony jest bit 7.

Wiadomości są wyświetlane ze znakiem "/!\" W [[en/GRFStatusWindow|GRF Status window]] <!--strony nie ma w oryginale--> . Pierwszy komunikat krytyczny podczas każdej aktywacji jest również wyświetlany jako czerwone okienko wyskakujące.

=== language-id ===

Ma ten sam format, co [[pl/Development/NewGRF/NFO Specs/Action4#language-id|language-id in action 4]].

Użyj 7F (wszystkie języki) dla wbudowanych wiadomości, ponieważ automatycznie używają właściwego języka.

=== message-id ===

Ustaw rodzaj wiadomości do wyświetlenia. Masz następujące opcje:

{|
!Message ID!!Content

|-
|00||80 " requires at least TTDPatch version " 80 00

|-
|01||80 " is for the " 80 " version of TTD." 00

|-
|||<data> should be "DOS" or "Windows"

|-
|02||80 " is designed to be used with " 80 00

|-
|||<data> should be a switchname + value, e.g. "multihead 0"

|-
|03||"Invalid parameter for " 80 ": parameter " 80 " (" 7B ")" 00

|-
|||<data> should be the switch number written out ("5")

|-
|04||80 " must be loaded before " 80 "." 00

|-
|05||80 " must be loaded after " 80 "." 00

|-
|06||80 " requires OpenTTD version " 80 " or better." 00

|-
|FF||Custom message, use text from <message>
|}

ID''`y'' wiadomości 04 i 05 są dostępne od TTDPatch 2.6 alfa 1 (r858).

Wiadomość ID 06 jest dostępna od OpenTTD r11330. Tego komunikatu należy używać tylko wtedy, gdy zmienna 9D Działania 7/9 ma wartość 1 (OpenTTD).

=== message ===

Niestandardowy tekst wiadomości do wyświetlenia.

=== parnum ===

Numery parametrów (maksymalnie dwa) do wyświetlenia zamiast 7B w tekście wiadomości.

=== Notes ===

We wszystkich komunikatach (wbudowanych i niestandardowych) pierwsze 80 jest zastąpione nazwą pliku pliku grf, drugie 80 jest zastąpione treścią <data>. Po dwóch 80 bajtach możesz mieć jeden lub dwa bajty 7B, które są zastąpione wartością parametru (parametrów) określoną przez <parnum>. Zauważ, że posiadanie 7B jest nieprawidłowe przed napotkaniem dokładnie dwóch 80 bajtów. Oznacza to, że dozwolone są następujące kombinacje bajtów specjalnych:

<pre>(none)

80

80 80

80 80 7B

80 80 7B 7B</pre>

Przed, po lub pomiędzy bajtami możesz mieć dowolne znaki.

Zaletą wbudowanych komunikatów jest to, że można je tłumaczyć przy użyciu mechanizmu mkpttxt, podczas gdy niestandardowe komunikaty będą dostępne tylko w językach dostarczonych z plikiem grf.

Zauważ, że jeśli kilka plików grf próbuje wyświetlić krytyczne komunikaty o błędach, w tej chwili jest pokazywany tylko pierwszy komunikat, ponieważ TTD nie ma kolejki dla wyskakujących czerwonych błędów. Wszystkie pozostałe zostaną jednak wyświetlone w oknie Status GRF.

Należy również pamiętać, że ponieważ ta akcja została wprowadzona tylko w TTDPatch 2.0.1 alpha 13, nie ma sensu sprawdzać, czy wersja jest co najmniej alfa 13, jeśli chcesz użyć komunikatu o błędzie 00. We wcześniejszych wersjach łatka wyświetla się komunikat o błędzie "invalid sprite" ''(nieprawidłowy)'' , ponieważ działanie jest nieznane.

== Przykład ==

Poniżej znajduje się przykład tego, jak mogłaby wyglądać pseudo-sprite' Action B wraz z [[pl/Development/NewGRF/NFO Specs/Action7|Action 7]] wymagane, aby pominąć go w odpowiednich okolicznościach.

<pre>2 * 6  07 85 01 01 37 01

3 * 17 0B 03 7F 02 "newtrains on" 00</pre>

{|
!Byte(s)!!Name!!Meaning

|-
|07||<action>||Sets this pseudo-sprite to function as action 7

|-
|85||<variable>||Check [[en/TTDPatchFlags|patch flags]]

|-
|01||<size>||variable size; ignored because this is a bit test

|-
|01||<cond>||skip if bit is set

|-
|37||<val>||check bit 37 (newtrains)

|-
|01||<num-sprites>||skip one sprite

|-
|0B||<action>||Sets this pseudo-sprite to function as action B

|-
|03||<severity>||Sets this to a fatal error

|-
|7F||<language-id>||Execute this sprite for all languages

|-
|02||<message-id>||Use message 02 (80 " is designed to be used with " 80)

|-
|"newtrains on" 00||<data>||String to insert in place of the second 80 in the message
|}