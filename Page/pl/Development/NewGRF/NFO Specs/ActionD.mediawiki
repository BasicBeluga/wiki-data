{{pl/Development/NewGRF/inne strony|en=newgrf-specs.tt-wiki.net/wiki/ActionD|pl=pl/Development/NewGRF/NFO Specs/ActionD}}
<!--{{-}}<br>{{ambox | text = w trakcie edycji.}}-->

== Wprowadzenie ==


Przypisz parametry i oblicz wyniki.



Działanie D pozwala ustawić wartość parametru grf (tj. Te, które zwykle ustawia się jako opcje w pliku newgrf (w) .cfg), a także wykonać na nich matematykę.

== Syntax ==

Dane wyglądają następująco:

 <Sprite-number> * <Length> 0D <target> <operation> <source1> <source2> [<data>]

{|
!Element!![[en/GRFActionsDetailed|Size]]!!Description

|-
|<Sprite-number>||dec||A sequential sprite number

|-
|<length>||dec||The total number of bytes used in this action

|-
|0D||B||Defines action 0D

|-
|<target>||B||Target parameter

|-
|<operation>||B||Calculation to carry out

|-
|<source1>||B||First argument

|-
|<source2>||B||Second argument

|-
|<data>||D||Value to use as source if not parameter
|}

== Description ==

=== target, source1, source2 ===

Te bajty określają parametr docelowy i parametry źródłowe. Mogą to być albo liczby parametrów grf, albo mogą być [[en/GlobalVariables| global variable]].

Jeśli źródło1 lub źródło2 to FF, zamiast wartości parametru używana jest wartość z <danych>.

Jeśli <source2> to FE, to działanie D wykona jeden z następujących dostępów specjalnych zmiennych. W takim przypadku <operacja> musi być przypisaniem, a <data> jest argumentem dostępu do danych, a nie wartością źródłową.

* [[en/ReadingOtherGRFParameters | Read parameters of another GRF]]
* [[en/ReadingPatchVariables | Read game configuration settings]]
* [[en/GRFResourceManagement | Reserve GRF resources to prevent conflicts with other GRFs]]

=== operation ===

Operacja przeprowadzania argumentów źródłowych. Ten bajt ma sekwencję zmiany znaczenia dla każdej z możliwych wartości wymienionych poniżej. Zobacz [[en/GRFActionsDetailed#byte-order|the discussion of escape sequences]] w celu uzyskania dalszych informacji na temat sekwencji specjalnych. Wynik tego obliczenia zostanie zapisany w parametrze docelowym.

{|
!Operation!!Escape!!Version!!Name!!Result

|-
|00||\D=||{{Page:pl/Extrazi/ottdp| | }}||Assignment||target = source1

|-
|01||\D+||{{Page:pl/Extrazi/ottdp| | }}||Addition||target = source1 + source2

|-
|02||\D-||{{Page:pl/Extrazi/ottdp| | }}||Subtraction||target = source1 - source2

|-
|03||\Du*||{{Page:pl/Extrazi/ottdp| | }}||Unsigned multiplication||target = source1 * source2, with both sources being considered to be unsigned

|-
|04||\D*||{{Page:pl/Extrazi/ottdp| | }}||Signed multiplication||target = source1 * source2, with both sources considered signed

|-
|05||\Du<<||{{Page:pl/Extrazi/ottdp| | }}||Unsigned bit shift||target = source1 << source2 if source2>0, or target = source1 >> abs(source2) if source2 < 0. source1 is considered to be unsigned

|-
|06||\D<<||{{Page:pl/Extrazi/ottdp| | }}||Signed bit shift||same as 05, but source1 is considered signed)

|-
|07||\D&||{{Page:pl/Extrazi/ottdp| |2.5|ttdprev=alpha 48}}||Bitwise AND||target = source1 AND source2

|-
|08||\D||{{Page:pl/Extrazi/ottdp| |2.5|ttdprev=alpha 48}}|||Bitwise OR||target = source1 OR source2

|-
|09||\Du/||{{Page:pl/Extrazi/ottdp| |2.5|ttdprev=alpha 59}}||Unsigned division||target = source1 / source2

|-
|0A||\D/||{{Page:pl/Extrazi/ottdp| |2.5|ttdprev=alpha 59}}||Signed division||target = source1 / source2

|-
|0B||\Du%||{{Page:pl/Extrazi/ottdp| |2.5|ttdprev=alpha 59}}||Unsigned modulo||target = source1 % source2

|-
|0C||\D%||{{Page:pl/Extrazi/ottdp| |2.5|ttdprev=alpha 59}}||Signed modulo||target = source1 % source2
|}

Możesz dodać 80 do numeru operacji, aby zastosować go tylko wtedy, gdy cel nie został jeszcze zdefiniowany. W tym względzie przyjmuje się, że parametr jest definiowany, jeśli ma zastosowanie którykolwiek z poniższych warunków:
* ustawiono dowolną wartość z listy parametrów newgrf(w).cfg
* it '''lub parametr o większej liczbie''' został ustawiony na dowolną wartość przez wcześniejsze działanie D

Jeśli na przykład parametry 0 i 1 są ustawione w pliku newgrf(w).cfg, a akcja D ustawia parametr 4, wówczas parametry 2 i 3 zostają automatycznie zdefiniowane i otrzymują wartość zero.

=== Notes ===

Możesz zrobić bitowe NIE dla <param>, obliczając "-1 - <param>" , tj. operation=02, source1=FF, source2=param, data=FF FF FF FF .

Operand docelowy może również odnosić się do zmiennych specjalnych z działania 7, patrz poniżej lista zmiennych, do których można zapisać.

Ponieważ łatka musi ponownie przydzielić pamięć dla całej listy parametrów za każdym razem, gdy dodawany jest nowy parametr, należy najpierw ustawić parametr o najwyższym numerze (przynajmniej w miarę możliwości), aby cała pamięć mogła zostać przydzielona od razu.

Pamiętaj, że parametry nigdy nie są resetowane po uruchomieniu gry, dlatego nie wolno modyfikować parametrów newgrf(w).cfg przy jakimkolwiek nieodwracalnym działaniu. Można na przykład dodać wartość do parametru tylko wtedy, gdy ta sama wartość zostanie później odjęta, aby utrzymać ten sam parametr podczas ładowania lub uruchamiania kilku gier.

Te zmienne globalne, dla których można zapisać, są wskazane w osobnej kolumnie w [[en/GlobalVariables| global variable list]] . Zauważ, że akcja D obsługuje tylko zapisywanie wartości dword. Podany tam rozmiar służy jedynie do przekazania, ile tej wartości dworu zostanie wykorzystane w grze, tj. Jaka jest maksymalna wartość.

== Przykład ==

<span style='color:#808080'>Something to go here</span>