<noinclude>{{pl/Development/NewGRF/inne strony|en=newgrf-specs.tt-wiki.net/wiki/Callback:_Industry_location_permissibility|pl=pl/Development/NewGRF/NFO Specs/Callback/Industry location permissibility}}
</noinclude>== Industry location permissibility (28) ==

Wywoływany, aby zdecydować, czy można zbudować przemysł w danym miejscu. Ponieważ branża nie została jeszcze zbudowana, możesz użyć tylko niewielkiego podzbioru danych: możesz uzyskać dostęp do danych najbliższego miasta za pośrednictwem akcji 2/typ 82 bez żadnych problemów, ale akcja 2/typ 81 uzyska dostęp do zmiennych innych niż normalnie miałby dostęp:

{| |-
!Variable!![[pl/Development/NewGRF/NFO Specs/GRFActionsDetailed|Size]]!!Version!!Meaning
|-
|40+x|| ||{{pl/Development/NewGRF/ottdp| | }}||Not accessible
|-
|5F|| ||{{pl/Development/NewGRF/ottdp|1.1|no|ottdrev=19744}}||Random bits the industry starts with after construction. Accessible via RandomAction2 as well.
|-
|60+x|| ||{{pl/Development/NewGRF/ottdp| | }}||Only var. 62 and vars 64..68 can be used
|-
|80||W||{{pl/Development/NewGRF/ottdp| | }}||Coordinates of the selected position
|-
|86||B||{{pl/Development/NewGRF/ottdp| | }}||Number of the selected layout, according to property 0A
|-
|87||B||{{pl/Development/NewGRF/ottdp| | }}||Ground type of the selected spot (see [[pl/Development/NewGRF/NFO Specs/VariationalAction2/Canals|canal variable 81]] for details)
|-
|88||B||{{pl/Development/NewGRF/ottdp| | }}||[[pl/Development/NewGRF/NFO Specs/TownZones|Town zone]] of the selected spot (see [[pl/Development/NewGRF/NFO Specs/VariationalAction2/Houses#town-zone-42|house variable 42]] for details)
|-
|89||B||{{pl/Development/NewGRF/ottdp| | }}||Distance between the closest town and the selected position.
|-
|8A||B||{{pl/Development/NewGRF/ottdp| | }}||Height of the lowest corner of the tile
* {{pl/Development/NewGRF/grfTill|7}} For GRF version 7 and below: Multiple of 8.
* {{pl/Development/NewGRF/grfFrom|8}} For GRF version 8 and above: Multiple of 1.
|-
|8B||W||{{pl/Development/NewGRF/ottdp| | }}||Distance to the closest water tile if property 1A bit 2 is clear (built on land); distance to the closest empty dry land tile if property 1A bit 2 is clear (built on water)
|-
|8D||W||{{pl/Development/NewGRF/ottdp| | }}||Square of the Euclidean distance between the closest town and the selected position
|-
|8F||D||{{pl/Development/NewGRF/ottdp|0.6|2.6|ottdrev=r11985|ttdprev=r1816}}|| 32 random bits
|}
O ile wyraźnie nie zaznaczono, odległości są odległością Manhattanu, a nie odległości euklidesowej, tj. <tt>|x-x0|+|y-y0|</tt> zamiast <tt>sqrt((x-x0)^2+(y-y0)^2)</tt>

Zmienna 8B będzie zawsze poniżej 80 godzin, jeśli bit 2 prop 1A jest czysty. Jeśli bit 2 jest ustawiony, 8B zostanie ustawione na maksimum 200 godzin w przypadku pathological mapy wody.

{{pl/Development/NewGRF/ottd|1.1|r20942}} Podczas tego wywołania zwrotnego zmienna 18 (dodatkowe informacje o wywołaniu zwrotnym 2) zawiera następujące wartości dla OpenTTD r20942 i nowszych:

{| |-
!Variable 18!!Meaning
|-
|0||TTD is generating a map.
|-
|1||TTD decided to build a new random industry during regular gameplay.
|-
|2||The user tries to build your industry via the new industry window.
|-
|3||The user tries to prospect for your industry via the new industry window.
|}

To wywołanie zwrotne musi zwrócić 15-bitową wartość, która jest interpretowana w następujący sposób:

{| |-
!Value!!Version!!Meaning
|-
|0000-03ff||{{pl/Development/NewGRF/ottdp| | }}||Industry can't be built, display the misc. GRF text Dxxx as error message
|-
|0400||{{pl/Development/NewGRF/ottdp| | }}||Industry can be built
|-
|0401||{{pl/Development/NewGRF/ottdp| | }}||Industry can't be built, display the default "site unsuitable" error message.
|-
|0402||{{pl/Development/NewGRF/ottdp| | }}||Industry can't be built, display the "...can only be built in rainforest areas" error message.
|-
|0403||{{pl/Development/NewGRF/ottdp| | }}||Industry can't be built, display the "...can only be built in desert areas" error message.
|-
|0404||{{pl/Development/NewGRF/ottdp|1.2|no|ottdrev=r22657}}||Industry can't be built, display the "...can only be built above the snow-line" error message.
|-
|0405||{{pl/Development/NewGRF/ottdp|1.2|no|ottdrev=r22657}}||Industry can't be built, display the "...can only be built below the snow-line" error message.
|-
|0406||{{pl/Development/NewGRF/ottdp|1.2|no|ottdrev=r22657}}||Industry can't be built, display the "...can't build on open sea" error message.
|-
|0407||{{pl/Development/NewGRF/ottdp|1.2|no|ottdrev=r22657}}||Industry can't be built, display the "...can't build on canal" error message.
|-
|0408||{{pl/Development/NewGRF/ottdp|1.2|no|ottdrev=r22657}}||Industry can't be built, display the "...can't build on river" error message.
|}

{{pl/Development/NewGRF/ottdp|0.6|2.6|ttdprev=r1755}} Od czasu TTDPatch r1755 można używać stosu tekstowego do komunikatów o błędach, podobnie jak wywołanie zwrotne 3A. Jedyna różnica polega na tym, że zamiast 6 kopiowane są tylko 4 rejestry, ponieważ komunikaty o błędach obsługują tylko 20 bajtów stosu referencyjnego, a dwa z tych bajtów mogą być używane przez TTD.
<!--[[Category:Callbacks]]-->[[Category:pl/User/extrazi/Callbacks]]