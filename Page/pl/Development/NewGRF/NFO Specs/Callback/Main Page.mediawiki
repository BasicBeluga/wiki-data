{{pl/Development/NewGRF/inne strony|en=newgrf-specs.tt-wiki.net/wiki/Callbacks|pl=pl/Development/NewGRF/NFO Specs/Callback/Main Page}}
<!--{{-}}<br>--><!--{{ambox | text = w trakcie edycji.}}-->
==Wprowadzenie==

Oddzwonienie to specjalne działanie 2, które łata "wywołuje" <small>''(calls)''</small> w celu zmodyfikowania różnych funkcji, czego przykładem jest efekt wizualny pojazdów kolejowych. &nbsp;Zobacz <!--[[ttwiki:CallbacksTut|callback tutorial]]-->[[pl/Development/NewGRF/NFO Tutorial/Callbacks|callback tutorial]] , jak ich używać.

W ostatnim działaniu 2 łańcucha VarAction2s drugi bajt pasującego wpisu musi mieć ustawiony bit 7, aby zidentyfikować go jako wynik wywołania zwrotnego.

Na przykład 04 00 nie jest wynikiem wywołania zwrotnego (ale może być identyfikatorem innego powiązanego działania 2), podczas gdy 04 80 jest wynikiem wywołania zwrotnego o wartości 4. W sumie wywołanie zwrotne ma 15-bitowe wartości wyniku, przy czym górna 7 bitów jest zapisanych w drugim bajcie. Na przykład 54 C2 jest wynikiem wywołania zwrotnego o wartości 4254 = 16980, gdzie znowu drugi bajt ma ustawiony bit 7, zmieniając 42 na C2.

 Dla GRF w wersji 7 i niższej nie wszystkie 15-bitowe wartości są dostępne jako wartości zwracane, tylko wartości od 00 do 7EFF.
Dla kompatybilności z wcześniejszymi wersjami łatek, FF w górnym bajcie oznacza to samo co 80, więc 04 FF ma również wynik wywołania zwrotnego 4. Uwaga: jeśli twój plik grf musi być zgodny z wersjami przed TTDPatch 2.0.1 alfa 40, musisz ustawić wysoki bajt na FF, więc możesz użyć tylko 8-bitowych wyników.

{{pl/Development/NewGRF/grfFrom|8}} Dla GRF w wersji 8 i wyższej ta warstwa zgodności została usunięta. Oddzwanianie może zwrócić wszystkie 15-bitowe wartości między 00 a 7FFF.

Aby sprawdzić określone oddzwonienie, użyj [[pl/Development/NewGRF/NFO Specs/VariationalAction2/Main Page|VariationalAction2]] lub [[pl/Development/NewGRF/NFO Specs/VarAction2Advanced|VarAction2Advanced]] , aby sprawdzić zmienną 0C .
* Zmienna 0C zawiera numer zwrotny.
* Zmienna 0C jest słowem, dlatego VarAction2 musi używać typu 85.
* Wyniki można określić bezpośrednio przy użyciu wartości 8xxx (patrz wyżej) lub wartości 8xxx w kolejnej (Podstawowej/Wariacyjnej/Losowej) akcji 2, do której zwykle przypisano ich identyfikator zestawu.
* Domyślny przypadek VarAction2 musi wskazywać na zwykły łańcuch graficzny, aby nieznane/przyszłe wywołania zwrotne skutkowały "niepowodzeniem wywołania zwrotnego" <small>''(callback failure)''</small> .

Przykład:
 <Sprite-number> * <Length> 02 <feature> <set-id> 85 0C 00 \wxFFFF
                               <nvar> (<set-id/result> \wx <callback> \wx <callback>){n}
                                       <set-id of graphics chain>

Format VarAction2 wyjaśniono szczegółowo na stronie [[pl/Development/NewGRF/NFO Specs/VariationalAction2/Main Page|VariationalAction2]] .

== List of callbacks ==

Następujące wywołania zwrotne są zdefiniowane przez łatkę. &nbsp;Liczba oddzwaniania będzie przechowywana w zmiennej 0C, abyś mógł zwrócić prawidłowe wyniki, jeśli masz kilka oddzwonień. &nbsp;Wszystkie połączenia zwrotne wyjaśniono bardziej szczegółowo poniżej.

'''PROŚBA UWAGI:''' Od czasu TTDPatch 2.5 beta 5 zmieniła się wielkość zmiennej 0C, a teraz istnieją również numery zwrotne wielkości słowa. Aby zachować zgodność wsteczną, tylko wywołania zwrotne 10..3F można sprawdzić za pomocą kontroli wielkości bajtów. Z drugiej strony, wywołania zwrotne 140 i wyższe muszą być sprawdzane za pomocą czeku o rozmiarze słowa lub dworda, aby upewnić się, że są jednoznacznie zidentyfikowane.

{| |-
!Number!!Feature(s)!!Meaning
|-
|10||Vehicles||[[pl/Development/NewGRF/NFO Specs/Callback/Visual effect and wagon power|Visual effect and wagon power]]
|-
|11||Vehicles||[[pl/Development/NewGRF/NFO Specs/Callback/Wagon length|Wagon length]]
|-
|12||Vehicles||[[pl/Development/NewGRF/NFO Specs/Callback/Load amount|Load amount]]
|-
|13||Stations||[[pl/Development/NewGRF/NFO Specs/Callback/Station availability|Station availability]]
|-
|14||Stations||[[pl/Development/NewGRF/NFO Specs/Callback/Station sprite layout|Select sprite layout]]
|-
|15||Vehicles||[[pl/Development/NewGRF/NFO Specs/Callback/Refitted capacity callback|Refitted capacity callback]]
|-
|16||Trains||[[pl/Development/NewGRF/NFO Specs/Callback/Articulated engine|Build articulated engines]]
|-
|17||Houses||[[pl/Development/NewGRF/NFO Specs/Callback/House construction check|House construction check]]
|-
|18||Several <ref name="generic">Generic callbacks are called for the feature, not any specific vehicle ID. Read the [[pl/Development/NewGRF/NFO Specs/Action3/Main Page#n-id|Action 3]] entry on how to define these.</ref>||[[pl/Development/NewGRF/NFO Specs/Callback/AI construction∕purchase selection|AI construction/purchase selection]]
|-
|19||Vehicles||[[pl/Development/NewGRF/NFO Specs/Callback/Cargo Subtype Display|Cargo sub-type display]]
|-
|1A||Houses||Next animation frame
|-
|1B||Houses||Animation control
|-
|1C||Houses||Construction stage changes
|-
|1D||Trains||Can wagon be attached
|-
|1E||Houses||Decide colour of building
|-
|1F||Houses||Cargo acceptance
|-
|20||Houses||Length of animation frame
|-
|21||Houses||Trigger building destruction
|-
|22||Industries||Availability
|-
|23||Vehicles||Additional text in purchase screen
|-
|24||Stations||Custom station layout
|-
|25||Industry tiles||Animation control
|-
|26||Industry tiles||Next animation frame
|-
|27||Industry tiles||Length of animation frame
|-
|28||Industries||Industry location permissibility
|-
|29||Industries||Random production change
|-
|2A||Houses||Get accepted cargo types
|-
|2B||Industry tiles||Decide cargo acceptance
|-
|2C||Industry tiles||Get accepted cargo types
|-
|2D||Vehicles||Select colour mapping for vehicle
|-
|2E||Houses||Custom cargo production
|-
|2F||Industry tiles||Custom shape check
|-
|30||Industry tiles||Decide drawing default foundations
|-
|31||Vehicles||Start/stop check
|-
|32||Vehicles||32-day callback
|-
|33||Several||Sound effect callback
|-
|34||Vehicles <ref name="generic"/>||Autoreplace vehicle selection
|-
|35||Industries||Monthly random production change
|-
|36||Vehicles||Change vehicle Properties
|-
|37||Industries||Cargo sub-type display
|-
|38||Industries||Show additional text in fund window
|-
|39||Cargoes||Custom profit calculation
|-
|3A||Industries||Show additional text in industry window
|-
|3B||Industries||Control special effects
|-
|3C||Industry tiles||Disable autosloping
|-
|3D||Industries||Opt out of accepting cargo
|-
|40..13F|| ||--Reserved--
|-
|140||Stations||Animation control
|-
|141||Stations||Next animation frame
|-
|142||Stations||Length of animation frame
|-
|143||Houses||Protect building conditionally
|-
|144||Sounds <ref name="generic"/>||{{pl/Development/NewGRF/ottdp|1.2|2.6|ottdrev=r23144|ttdprev=r821}} Ambient sound effects
|-
|145||Cargoes||Custom station rating calculation
|-
|146||New Signals <ref name="generic"/>||New signals sprite drawing
|-
|147||Canals||Add sprite offset
|-
|148||Houses||Watched cargo accepted
|-
|149||Stations||Land slope check
|-
|14A||Industries||Decide industry color
|-
|14B||Industries||Decide input cargo types
|-
|14C||Industries||Decide output cargo types
|-
|14D||Houses||Customized building name
|-
|14E||Houses||Decide drawing default foundations
|-
|14F||Houses||Disable autosloping
|-
|150||Airport tiles||{{pl/Development/NewGRF/ottdp|1.1|no|ottdrev=r19197}} Decide drawing default foundations
|-
|152||Airport tiles||{{pl/Development/NewGRF/ottdp|1.1|no|ottdrev=r19197}} Animation control
|-
|153||Airport tiles||{{pl/Development/NewGRF/ottdp|1.1|no|ottdrev=r19197}} Next Animation frame
|-
|154||Airport tiles||{{pl/Development/NewGRF/ottdp|1.1|no|ottdrev=r19197}} Length of animation frame
|-
|155||Airports||{{pl/Development/NewGRF/ottdp|1.1|no|ottdrev=r20373}} Extra information about airport layout in the build gui
|-
|156||Airports||{{pl/Development/NewGRF/ottdp|1.1|no|ottdrev=r20373}} Airport layout name
|-
|157||Objects||Land slope check
|-
|158||Objects||Next animation frame
|-
|159||Objects||Animation control
|-
|15A||Objects||Length of animation frame
|-
|15B||Objects||Decide colour of building
|-
|15C||Objects||Show additional text in building window
|-
|15D||Objects||Disable autosloping
|-
|15E||Vehicles||{{pl/Development/NewGRF/ottdp|1.2|no|ottdrev=r23124}} Refit cost factor
|-
|15F||Industries||{{pl/Development/NewGRF/ottdp|1.3|no|ottdrev=r24186}} Set initial production level on construction
|-
|160||Vehicles||{{pl/Development/NewGRF/ottdp|1.5|no|ottdrev=r26747}} Advanced effect creation
|}
<references/>

{{Page:pl/Development/NewGRF/NFO Specs/Callback/Visual effect and wagon power}}
{{Page:pl/Development/NewGRF/NFO Specs/Callback/Wagon length}}
{{Page:pl/Development/NewGRF/NFO Specs/Callback/Load amount}}
{{Page:pl/Development/NewGRF/NFO Specs/Callback/Station availability}}
{{Page:pl/Development/NewGRF/NFO Specs/Callback/Station sprite layout}}
{{Page:pl/Development/NewGRF/NFO Specs/Callback/Refitted capacity callback}}
{{Page:pl/Development/NewGRF/NFO Specs/Callback/Articulated engine}}
{{Page:pl/Development/NewGRF/NFO Specs/Callback/House construction check}}
{{Page:pl/Development/NewGRF/NFO Specs/Callback/AI construction∕purchase selection}}
{{Page:pl/Development/NewGRF/NFO Specs/Callback/Cargo Subtype Display}}
{{Page:pl/Development/NewGRF/NFO Specs/Callback/Next animation frame}}
{{Page:pl/Development/NewGRF/NFO Specs/Callback/Animation control}}
{{Page:pl/Development/NewGRF/NFO Specs/Callback/Construction stage changes}}
{{Page:pl/Development/NewGRF/NFO Specs/Callback/Can wagon be attached}}
{{Page:pl/Development/NewGRF/NFO Specs/Callback/Building colour}}
{{Page:pl/Development/NewGRF/NFO Specs/Callback/Cargo acceptance}}
{{Page:pl/Development/NewGRF/NFO Specs/Callback/Length of animation frame}}
{{Page:pl/Development/NewGRF/NFO Specs/Callback/Trigger building destruction}}
{{Page:pl/Development/NewGRF/NFO Specs/Callback/Industry availability}}
{{Page:pl/Development/NewGRF/NFO Specs/Callback/Additional text in purchase screen}}
{{Page:pl/Development/NewGRF/NFO Specs/Callback/Custom station layout}}
{{Page:pl/Development/NewGRF/NFO Specs/Callback/Industry location permissibility}}
{{Page:pl/Development/NewGRF/NFO Specs/Callback/Random production change}}
{{Page:pl/Development/NewGRF/NFO Specs/Callback/Get accepted cargo types}}
{{Page:pl/Development/NewGRF/NFO Specs/Callback/Decide cargo acceptance}}
{{Page:pl/Development/NewGRF/NFO Specs/Callback/Select colour mapping for vehicle}}
{{Page:pl/Development/NewGRF/NFO Specs/Callback/Custom cargo production}}
{{Page:pl/Development/NewGRF/NFO Specs/Callback/Custom shape check}}
{{Page:pl/Development/NewGRF/NFO Specs/Callback/Decide drawing default foundations}}
{{Page:pl/Development/NewGRF/NFO Specs/Callback/Vehicle Start∕stop check}}
{{Page:pl/Development/NewGRF/NFO Specs/Callback/32-day callback}}
{{Page:pl/Development/NewGRF/NFO Specs/Callback/Sound effect}}
{{Page:pl/Development/NewGRF/NFO Specs/Callback/Autoreplace vehicle selection}}
{{Page:pl/Development/NewGRF/NFO Specs/Callback/Monthly random production change}}
{{Page:pl/Development/NewGRF/NFO Specs/Callback/Change vehicle properties}}
{{Page:pl/Development/NewGRF/NFO Specs/Callback/Cargo sub-type display for industries}}
{{Page:pl/Development/NewGRF/NFO Specs/Callback/Show additional text in fund∕building window}}
{{Page:pl/Development/NewGRF/NFO Specs/Callback/Custom profit calculation for cargoes}}
{{Page:pl/Development/NewGRF/NFO Specs/Callback/Show additional text in industry window}}
{{Page:pl/Development/NewGRF/NFO Specs/Callback/Control special industry effects}}
{{en/Callback/Disable autosloping}}
{{en/Callback/Opt out of accepting cargo}}
{{en/Callback/Protect building conditionally}}
{{en/Callback/Ambient sound effects}}
{{en/Callback/Custom station rating calculation}}
{{en/Callback/New signals sprite drawing callback}}
{{en/Callback/Add sprite offset callback}}
{{en/Callback/Watched cargo accepted}}
{{en/Callback/Station slope check}}
{{en/Callback/Decide industry colour}}
{{en/Callback/Decide input and output cargo types}}
{{en/Callback/Customized building name}}
{{en/Callback/Extra information about layout in the build gui}}
{{en/Callback/Layout name}}
{{en/Callback/Object slope check}}
{{en/Callback/Decide object colour}}
{{en/Callback/Refit cost factor}}
{{en/Callback/Set initial production level on construction}}
{{en/Callback/Advanced effect creation}}