{{pl/Development/NewGRF/inne strony|en=newgrf-specs.tt-wiki.net/wiki/VariationalAction2/Industries|pl=pl/Development/NewGRF/NFO Specs/VariationalAction2/Industries}}
<!--{{-}}<br>--><!--{{ambox | text = w trakcie edycji.}}--><!-- -->
==Wprowadzenie==

== Variables ==

{| |-
!Variable !![[pl/Development/NewGRF/NFO Specs/GRFActionsDetailed|Size]] !!Version !! Description
|-
|40..42||||{{pl/Development/NewGRF/ottdp| | }}||Waiting cargo. See also variable 6F.
|-
|43||||{{pl/Development/NewGRF/ottdp| |2.6|ttdprev=r1298}}||Manhattan distance of closest dry/land tile
|-
|44||||{{pl/Development/NewGRF/ottdp| |2.6|ttdprev=r1594}}||Layout number (1-based)
|-
|45||||{{pl/Development/NewGRF/ottdp| |2.6|ttdprev=r1711}}||Player info
|-
|46||||{{pl/Development/NewGRF/ottdp|0.7|2.6|ttdprev=r2047|ottdrev=r13443}}||Date when industry was built in days since year 0
|-
|60||||{{pl/Development/NewGRF/ottdp| |2.5|ttdprev=alpha 73}}||Get industry tile ID at offset
|-
|61||||{{pl/Development/NewGRF/ottdp| |2.5|ttdprev=alpha 73}}||Get random tile bits at offset
|-
|62||||{{pl/Development/NewGRF/ottdp| |2.5|ttdprev=alpha 74}}||Land info of nearby tiles
|-
|63||||{{pl/Development/NewGRF/ottdp| | }}||Animation stage of nearby tiles
|-
|64||||{{pl/Development/NewGRF/ottdp| | }}||Distance of nearest industry with given type
|-
|65||||{{pl/Development/NewGRF/ottdp| | }}||Get [[en/TownZones|town zone]] and Manhattan distance of closest town
|-
|66||||{{pl/Development/NewGRF/ottdp| | }}||Get square of Euclidean distance of closest town
|-
|67||||{{pl/Development/NewGRF/ottdp| | }}||Count of industry, distance of closest instance
|-
|68||||{{pl/Development/NewGRF/ottdp| | }}||Like the above, but with layout filter
|-
|69||||{{pl/Development/NewGRF/ottdp|1.9|no|ottdrev=e66cec8f}}||Amount of produced output cargo waiting to be distributed.
|-
|6A||||{{pl/Development/NewGRF/ottdp|1.9|no|ottdrev=e66cec8f}}||Amount of cargo produced this month (so far).
|-
|6B||||{{pl/Development/NewGRF/ottdp|1.9|no|ottdrev=e66cec8f}}||Amount of cargo transported this month (so far).
|-
|6C||||{{pl/Development/NewGRF/ottdp|1.9|no|ottdrev=e66cec8f}}||Amount of cargo produced last month.
|-
|6D||||{{pl/Development/NewGRF/ottdp|1.9|no|ottdrev=e66cec8f}}||Amount of cargo transported last month.
|-
|6E||||{{pl/Development/NewGRF/ottdp|1.9|no|ottdrev=e66cec8f}}||Date since cargo was delivered last. (in days since year 0)
|-
|6F||||{{pl/Development/NewGRF/ottdp|1.9|no|ottdrev=e66cec8f}}||Amount of waiting cargo to be processed.
|-
|70||||{{pl/Development/NewGRF/ottdp|1.10|no|ottdrev=fdaf67d924}}||Production rate of cargo.
|-
|71||||{{pl/Development/NewGRF/ottdp|1.10|no|ottdrev=fdaf67d924}}||Percentage of cargo transported last month.
|-
|8A||W||{{pl/Development/NewGRF/ottdp| | }}||Amount of produced output cargo waiting to be distributed, for the first output cargo. {{pl/Development/NewGRF/ottdp|1.9|no|ottdrev=e66cec8f}}Deprecated, see instead variable 69.
|-
|8C||W||{{pl/Development/NewGRF/ottdp| | }}||Amount of produced output cargo waiting to be distributed, for the 2nd output cargo. {{pl/Development/NewGRF/ottdp|1.9|no|ottdrev=e66cec8f}}Deprecated, see instead variable 69.
|-
|93||B||{{pl/Development/NewGRF/ottdp| | }}||Production level. Normally between 4 and 128, default starting level is 16. A level of 0 means imminent closure.
|-
|94||W||{{pl/Development/NewGRF/ottdp| | }}||Production this month of first output cargo. {{pl/Development/NewGRF/ottdp|1.9|no|ottdrev=e66cec8f}}Deprecated, see instead variable 6A.
|-
|96||W||{{pl/Development/NewGRF/ottdp| | }}||Production this month of 2nd output cargo. {{pl/Development/NewGRF/ottdp|1.9|no|ottdrev=e66cec8f}}Deprecated, see instead variable 6A.
|-
|98||W||{{pl/Development/NewGRF/ottdp| | }}||Amount of cargo transported this month of the first output cargo. {{pl/Development/NewGRF/ottdp|1.9|no|ottdrev=e66cec8f}}Deprecated, see instead variable 6B.
|-
|9A||W||{{pl/Development/NewGRF/ottdp| | }}||Amount of cargo transported this month of the 2nd output cargo. {{pl/Development/NewGRF/ottdp|1.9|no|ottdrev=e66cec8f}}Deprecated, see instead variable 6B.
|-
|9C||B||{{pl/Development/NewGRF/ottdp| | }}||Fraction of cargo transported last month of the first output cargo. {{pl/Development/NewGRF/ottdp|1.9|no|ottdrev=e66cec8f}}Deprecated, see instead variable 71.
|-
|9D||B||{{pl/Development/NewGRF/ottdp| | }}||Fraction of cargo transported last month of the 2nd output cargo. {{pl/Development/NewGRF/ottdp|1.9|no|ottdrev=e66cec8f}}Deprecated, see instead variable 71.
|-
|9E||W||{{pl/Development/NewGRF/ottdp| | }}||Production last month of the first output cargo. {{pl/Development/NewGRF/ottdp|1.9|no|ottdrev=e66cec8f}}Deprecated, see instead variable 6C.
|-
|A0||W||{{pl/Development/NewGRF/ottdp| | }}||Production last month of the 2nd output cargo. {{pl/Development/NewGRF/ottdp|1.9|no|ottdrev=e66cec8f}}Deprecated, see instead variable 6C.
|-
|A2||W||{{pl/Development/NewGRF/ottdp| | }}||Amount of cargo transported last month of the first output cargo. {{pl/Development/NewGRF/ottdp|1.9|no|ottdrev=e66cec8f}}Deprecated, see instead variable 6D.
|-
|A4||W||{{pl/Development/NewGRF/ottdp| | }}||Amount of cargo transported last month of the 2nd output cargo. {{pl/Development/NewGRF/ottdp|1.9|no|ottdrev=e66cec8f}}Deprecated, see instead variable 6D.
|-
|A7||B||{{pl/Development/NewGRF/ottdp| |2.5|ttdprev=alpha 74}}||Industry founder information
|-
|A8||B||{{pl/Development/NewGRF/ottdp| | }}||Random (company) colour, chosen during construction
|-
|B0||W||{{pl/Development/NewGRF/ottdp| | }}||Date when industry was built in days since 1920
|-
|B3||B||{{pl/Development/NewGRF/ottdp| | }}||Construction type
|-
|B4||W||{{pl/Development/NewGRF/ottdp| |2.6|ttdprev=r1321}}||Date when cargo was last accepted in days since 1920, or 0 if no cargo was ever accepted. See also variable 6E.
|}

Dla pozostałych 80 + x zmiennych nadaj [http://marcin.ttdpatch.net/sv1codec/TTD-locations.html#_IndustryArray TTD industry structure].

=== Waiting cargo (40..42) ===

Jeśli bit 1 lub 2 jest ustawiony we właściwości 21, zmienne te zawierają ilość ładunku przychodzącego oczekującego na przetworzenie. (40 oznacza liczbę oczekujących pierwszego typu, 41 daje to samo dla drugiego typu itd.) Zmienne te są ograniczone do FFFFh (65535).

Patrz także zmienna 6F.

=== Manhattan distance of closest dry/land tile (43) ===

Ta zmienna działa tak samo jak var. 8B robi to podczas oddzwaniania 28: jeśli twoja branża jest zbudowana na wodzie, podaje odległość najbliższego kafelka suchego lądu, w przeciwnym razie podaje odległość najbliższego kafelka wody. Nie można jednak użyć tej zmiennej podczas oddzwaniania 28; musisz zawsze używać 8B.

'''PROSZĘ ZANOTOWAĆ''': Obliczanie tej zmiennej jest raczej kosztowne, ponieważ w najgorszym przypadku musi ona sprawdzić wszystkie kafelki na mapie, zanim zrezygnuje z poszukiwania dobrego kafelka. Staraj się tego unikać w częstych wywołaniach zwrotnych, takich jak wywołania produkcyjne, wywołania animacji (chyba że animacja jest wolna, około 1 klatki na dzień gry lub wolniej). Można jednak używać go podczas wywołań zwrotnych zmian produkcyjnych.

=== Layout number (44) ===
T
jego zmienna zwraca numer bieżącego układu. Pierwszy układ zwróci 01, drugi 02 itd. Innymi słowy, jest to jeden większy niż to, co otrzymujesz w zmiennej 86 podczas wywołania zwrotnego 28.

Jeśli branża została utworzona przy użyciu wcześniejszej wersji TTDPatch lub gdy nowe branże były wyłączone, wynik wyniesie zero.

=== Player info (45) ===

Jak [[pl/Development/NewGRF/NFO Specs/VariationalAction2/Vehicles#player-info-43|vehicle variable 43]] , z tym wyjątkiem, że stan braku gracza jest wskazywany przez var A7 jako 10h.

=== Date when industry was built in days since year 0 (46) ===

Dokładnie takie samo zachowanie jak var B0, ale oparte na roku 0, zamiast roku 1920

W TTDPatch wiek branży jest ograniczony do 65535 dni (około 180 lat) - data budowy nigdy nie jest dłuższa niż 65535 dni temu.

=== Get industry tile ID at offset (60) ===

Parametrem tej zmiennej jest przesunięcie w stosunku do najbardziej wysuniętego na północ kafla w branży: wysokie wartości zawierają przesunięcie <small>''(offset)''</small> Y, niskie przesunięcie X; oba są niepodpisane. Górne słowo wartości zwracanej jest obecnie zarezerwowane, a dolne słowo może być:
* 00xxh, jeśli kafel jest kaflem branżowym i został zdefiniowany w bieżącym GRF o ID xx.
* FFxxh, jeśli kafel jest kaflem przemysłowym starego typu i ma ID xx.
* FFFEh, jeśli kafel jest kaflem branżowym, który został zdefiniowany w innym pliku GRF
* FFFFh, jeśli kafel nie jest kaflem branży lub nie należy do bieżącej branży

=== Get random tile bits at offset (61) ===

Parametrem tej zmiennej jest przesunięcie w stosunku do najbardziej wysuniętego na północ kafelka w branży: wysokie wartości zawierają przesunięcie Y, niskie przesunięcie X; oba są niepodpisane. Jeśli na tym przesunięciu znajduje się kafelek branży i należy on do bieżącej branży, najniższy bajt wartości zwracanej będzie zawierał losowe bity tego kafelka. W przeciwnym razie najniższy bajt będzie wynosił zero.

Pozostałe bajty są zarezerwowane do wykorzystania w przyszłości.

=== Land info of nearby tiles (62) ===

Parametrem tej zmiennej jest przesunięcie w stosunku do najbardziej wysuniętego na północ kafelka w branży: wysokie wartości zawierają przesunięcie Y, niskie przesunięcie X; oba są niepodpisane. Ta zmienna zwraca te same wartości, co [[pl/Development/NewGRF/NFO Specs/VariationalAction2/Industry Tiles#land-info-of-nearby-tiles-60|industry tile variable 60]] , w tym samym formacie, z wyjątkiem tego, że bit 0 w części '''bb''' jest niezdefiniowany. Przesunięcie należy podać w odniesieniu do północnego rogu branży.

=== Animation stage of nearby tiles (63) ===

Parametrem tej zmiennej jest przesunięcie w stosunku do najbardziej wysuniętego na północ kafelka w branży: wysokie wartości zawierają przesunięcie Y, niskie przesunięcie X; oba są niepodpisane. Ta zmienna zwraca te same wartości co [[pl/Development/NewGRF/NFO Specs/VariationalAction2/Industry Tiles#animation-stage-for-nearby-tiles-61|industry tile variable 61]] , w tym samym formacie. Przesunięcie należy podać w odniesieniu do północnego rogu branży.

=== Distance of nearest industry with given type (64) ===

Format parametru jest taki sam jak dla właściwości przemysłowej 16: albo identyfikator nowego typu z ustawionym bitem 7, albo identyfikator starego typu. Zwrócona wartość to FFFFFFFFh, jeśli nie ma branż o danym typie (nie licząc bieżącej, jeśli ma dany typ); w przeciwnym razie zwracana wartość to odległość Manhattanu najbliższej branży o danym typie.

=== Get [[pl/Extrazi/specs.tt/TownZones|town zone]] and Manhattan distance of closest town (65) ===

Ten parametr daje przesunięcie względem najbardziej wysuniętego na północ kafelka w branży: wysokie wartości oznaczają przesunięcie Y, niskie wartości oznaczają przesunięcie X, obie sygnowane. Zwrócona wartość to rrzzdddd, gdzie rr jest zarezerwowane do wykorzystania w przyszłości, zz to [[pl/Development/NewGRF/NFO Specs/TownZones|town zone]] wybranego pola, a dddd to odległość Manhattan najbliższego miasta.

=== Get square of Euclidean distance of closest town (66) ===

Ten parametr działa jak dla var. 65, ale wynikiem jest kwadratowa odległość euklidesowa najbliższego miasta.

=== Count of industry, distance of closest instance (67, 68) ===

Zmienna 67 otrzymuje dwa parametry: GRFID GRF, gdzie branża jest zdefiniowana w rejestrze 100h (może być zapisany za pomocą operatora 0E z [[en/VarAction2Advanced|VarAction2]] ) i setID branży jako parametr regularny. Istnieją dwa specjalne przypadki dla GRFID: 00000000h oznacza, że ​​sprawdzasz domyślny typ branży TTD, podczas gdy FFFFFFFFh można użyć zamiast GRFID obecnego GRF.

The return value has the format rrccdddd, where rr is reserved for future use, cc is the number of instances of the industry type and dddd is the Manhattan distance of the closest instance, of FFFFh if not appliable.

Możesz zauważyć, że ta zmienna może być używana zamiast zmiennej 64. Ta zmienna jest preferowanym sposobem uzyskania tych informacji, ponieważ umożliwia sprawdzenie branż zdefiniowanych również w innych GRF. Zmienna 64 pozostanie tylko dla kompatybilności wstecznej.

Zmienna 68 działa jak zmienna 67, z tym wyjątkiem, że można wstawić numer układu do najniższego bajtu rejestru 101. (Pozostałe bity są zarezerwowane do wykorzystania w przyszłości, na razie pozostaw je zerowe). Ten numer układu powinien być oparty na 1 ( pierwszy układ to 01, a nie 00). Tylko branże o danym układzie są brane pod uwagę do liczenia i obliczania odległości. W szczególnym przypadku, jeśli numerem układu jest 00, wszystkie układy są liczone, a więc wynik jest taki sam jak dla zmiennej 67.

Od wersji OpenTTD R22434 możliwe jest filtrowanie według miasta obecnego przemysłu. Jeśli bit nr 8 jest ustawiony, brane będą pod uwagę tylko branże w tym samym mieście niż bieżące.

=== Cargo info variables (69..71) ===

Zmienne te pozwalają zapytać o informacje o przyjętych i wyprodukowanych ładunkach.
Zmienne są niezależne od liczby rodzajów ładunku i ich kolejności. Parametr 60 + x określa typ ładunku jako indeks w tabeli translacji ładunku.

(69..6F) {{pl/Development/NewGRF/ottdp|1.9|no|ottdrev=e66cec8f}}

* Zmienna 69: ilość wyprodukowanego ładunku oczekującego na transport.
* Zmienna 6A: ilość ładunku wyprodukowana w tym miesiącu.
* Zmienna 6B: ilość ładunku przewiezionego w tym miesiącu.
* Zmienna 6C: ilość ładunku wyprodukowanego w ostatnim miesiącu.
* Zmienna 6D: ilość ładunku przewiezionego w ostatnim miesiącu.
* Zmienna 6E: data ostatniego dostarczenia ładunku do branży.
* Zmienna 6F: ilość dostarczonego ładunku oczekującego na przetworzenie.

(70..71) {{pl/Development/NewGRF/ottdp|1.10|no|ottdrev=fdaf67d924}}

* Zmienna 70: wskaźnik produkcji w przemyśle pierwotnym.
* Zmienna 71: transportowany w ostatnim miesiącu (FF = 100%).

=== Industry founder information (A7) ===

Ten bajt zawiera identyfikator firmy, która sfinansowała przemysł, lub 10 godzin, jeśli przemysł został wygenerowany losowo. Jeśli branża została zbudowana przy użyciu wcześniejszej wersji TTDPatch niż 2.0.1 &alpha;74 lub przy wyłączonym newindustries, to pole trwa 10 godzin.

=== Construction type (B3) ===

Ten bajt informuje, w jaki sposób przemysł dostał się na mapę. Możliwe są następujące wartości:

{| |-
!Value!!Meaning
|-
|0||Unknown - This industry was built with newindustries being off, or in a TTDPatch version prior to TTDPatch 2.0.1 alpha 74
|-
|1||Created during normal gameplay, either by a player or the in-game random industry generator
|-
|2||Created during random map generation
|-
|3||Created in the scenario editor
|}

W przypadku 1 możesz sprawdzić zmienną A7, aby dowiedzieć się, czy przemysł został sfinansowany przez gracza, czy przez losowy generator.