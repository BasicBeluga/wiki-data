[[Translation:en/Community/Railway Designs]]
{{ru/Перевод|en/Community/Railway Designs|0}}
{{ru/Manual/Оглавление}}

= Пропускная способность железнодорожной сети =
Эта страница предназначена для теоретического рассмотрения пропускной способности. Развязки и работа сети в целом имеют гораздо большее значение. Ниже приведены различные факторы, которые влияют на пропускную способность.

== Рассстояние между сигналами (SD) ==
Это довольно очевидно. Широко расставленные Сигналы приводят к низкой пропусконй способности. Если Сигналы расставлены через каждые N клеток, то минимальное расстояние между поездами, идущими с максимальной скоростью не может быть меньше, чем N+1 (Рис. 1). Если на диагональном пути Сигналы расставлены черезе 2N "полуклетки" или N "полных клеток", то минимальное расстояние не может быть менльше, чем 2N+1 "полуклеток" или N+1/2 "полных клеток". Когда поезда находятся настолько близко, достигается максимальная теоретическая плотность следования поездов. На практике достижение такого результата невозможно.
[[File:en/Community/Pat Fig1.png|frame|none|Рис. 1: Минимальное расстояние между поездами равно пяти при расстоянии между сигналами в четыре клетки]]

[[File:en/Community/Pat Fig2.png|frame|right|Рис. 2: Неэффективное расстояние между сигналами]]
Очень важным моментом является регулярность расстояний между сигналами. Так, для пути, у которого сигналы выставлены через каждые две клетки, но при этом имеющим единственное аномальное расстояние в три или четыре клетки, будет иметь значительно меньшую пропускную способность и потенциально может создать затор и нарушить правило 1 (Рис. 2). Помните, что это также справедливо для поворотов и соединений/разветвлений путей.

[[File:en/Community/Tiles.png|frame|right|Рис. 3: Ниже: Знаки выставлены каждую клетку; Выше: Знаки выствлены каждые полклетки.]]
===Диагональный путь===

В OpenTTD, поезда движутся медленнее на угловых путях (Спасибо SmatZ!), и поэтому требуют большего растояния между сигналами для предотвращения заторов. Это важно потому, что расстояние между поездами (не между сигналами ('''SD''')) на прямом и диагональном путях одинаковы настолько, насколько это возможно. В противном случае поезда будут застревать при переходе от прямого к диагональному или от диагонального к прямому пути.

[[File:en/Community/Pythagoras.png|frame|right|Рис. 4: Теорема Пифагора.]]
Быстрый эксперимент показал, что поезд проходит по прямой расстояние в 2 клетки за такое же время, как этот же поезд по диагонали расстояние в 3 "полуклетки". Таким образом, при использовании определенных настроек авторасстояния между сигналами, придется вручную увеличивать это рассотяние на каждом угловом пути.

Следующие примеры были созданы в предположении, что длина поезда также меняется на диагональном пути. По видимому, это истинно только для некоторых0 NewGRF (Iirc, это верно для JapanSet и неверно для поездов по умолчанию.)

* Значение 3 настройки авторасстояний дает минимальное расстояние между поездами 4. Это значит, что минимальное расстояние между поездами на диагональном пути равно 6 "полуклеткам", которое может быть достигнуто при расположении сигналов через каждые 5 "полуклеток" (или при двойном размещении сигналов с настройкой авторасстояния при значении 5).

* Значение 2 настройки авторасстояний дает минимальное расстояние между поездами 3. Этому соответствует минимальное расстояние между поездами 4,5 "полуклетки". Диагональное расстояние между поездами, равное 5 "полуклеток" может быть достигнуто путем размещения сигналов через каждые 4 "полуклетки" или при значении настройки автосигнала около 2. Диагональное расстояние между поездами, равное 4 "полуклетки", может быть достигнуто путем размещения сигналов через каждые 3 "полуклетки" (или при двойном размещениии сигналов с настройкой авторассотяние при значинии 3). Несмотря на то, что такое расстояние между сигналами не в полной мере соответствуют друг другу, отклонение между прямым и диагональными путями всего 1/3 клетки, поэтому одинаковые настройки авторассояния могут быть использованы для прямого и диагонального путей.

* Значение 1 настройки авторасстояний дает минимальное расстояние между поездами 2. Этому соответствует минимальное расстояние между поездами на диагональном пути равно 3 "полуклеткам", которое может быть достигнуто при расположении сигналов через каждые 2 "полуклеток" или при размещении сигналов с настройкой авторасстояния при значении 1). Здесь также используются одинаковые настройки авторасстояния для прямого и диагонального путей.

=== Итак, какое же расстояние между сигналами следует использовать? ===
* Две клетки
Это дает минимальное расстояние между поездами в 3 клетки, что является оптимальным решением, полученными на практике.

* Одна клетка
Это чревато проблемами. Даже объединение путей приводит к разрыву между сигнализациями. Возможно присоединять угловые пути с расстоянием между сигналами 1, но это приведет к значительному усложнению построечное инфраструктуры.

* Половина клетки
На угловых путях возможна двойная плотность размещения сигналов. Теоретически, это могло бы быть болезным для сбривания пары милиметров в определенных ситуациях. Очевидно, что поток самым большим при размещении сигналов в половину клетки, так как на прямых участка расстояние между клетками будет больше.

Вне зависимости от того, какое расстояние выбрано, следует быть постоянным. При постоянном расстоянии между сигналами 2 и единственном зазоре между сигналами 3 на часто используемых путях возможно образование заторов. Это полностью эквивалентно постянному расстоянию между сигналами 3.

== Длина поезда (TL) ==
Это палка о двух концах. Более длинные поезда в большей степени подвержены пенальти от реалестичной модели ускорения, что делает строительство более сложным и запутанным. Но при этом более длинные поезда имеют большую грузоподъемность, что увеличивает грузопоток сети. Следует обратить внимание, что при использовании тяговых локомотивов, которые имеют переднюю и заднюю секции, уменьшает длину поезда еще на полклетки, из-за чего короткие поезда ещё менее привлекательны.

Для высокоскоростных сетей нормальным значением является от 3 до пяти клеток. Значение 4 является предпочтительным на практике, так как при расстоянии между сигналами 2 и длине поезда 4 ускорение с места имеет меньшее время реакции, чем поезда с неравномерной длиной.

== Количественные характеристики грузопотока ==
=== Плотность движения поездов (TD) ===
Сеть будет нести определенное количество поездов. При наличии стандартной длины поезда, можно определеть некоторые измерительных показателей. '''Плотность движения поездов (TD)''' для пути выражается в единицах поездов на тысячу клеток и может быть вычислена путем подсчета количества поездов на пути, деленным на длину пути.

Типичное значение показателя для неоптимизированной сети при длине поезда в 4 клетки составляет '''TD'''=25 (поездов на тысячу клеток).

Максммальная плотность движения поездов перед заторами становится саморасрпостранеющейся. Она может быть измерена путем выстраивания очереди поездов, разгона из неподвижного состояния из измерения расстояния между поездаме, когда все поезда достигли максимальной скорости. Значение определяется по формуле:

'''1000 / (TL + расстояние между поездами)'''

Например, для полностью груженого 4-клеточный [[en/Lev4 'Химера' | Химера]] (топовые [[en/Manual/Base Set/MagLev]]) было установлено, что расстояние между поездами равно 12 клеток, что дает критическую плотность движения 1000/16 или 62,5.

Поскольку эта критическая плотность движения включает в себя информацию об ускорении и времени, необходимым для достижения максимальной скорочти, она также может сказа о практических возможностях сети. Например, при использовании поездов с более низкой скоростью легче иметь более плотную сеть. Среднее расстояние между поездам гораздо меньше для железнодорожных поездов, чем для монорельсовых или на магнитной подушке. Выполнив предыдущий пример для электропоезда T.I.M получим, что расстояние между поездами равно всего 6 клеток, а критическая плотность движения равна 100. Однако, медленно не значит лучше - более низкая плотность движения на линии будет компенсирована меньшими сроками доставки.

Есть возможность запустить сеть с плотностью движения более высокой, чем критическая, но это опрометчиво.

=== Теоретически максимальная плотность движения поездов ===
Проще говоря, это плотность движения поездов, при которой сеть полностью заполнена поездами при минимальном расстоянии между ними. На практике достичь этого невозможно.

Она вычисляется по формуле:
 '''1000 / (TL + SD + 1)'''

Например, для 4-хклеточного поезда при расстоянии между сигналами 2 клетки теоретически максимальная плотность движения поездов равна 140.

== Грузопоток (CC) ==
Поскольку длина поезда ('''TL''') изменяет грузопоток на линии, постольку сравнивать плотность движения поездов ('''TD''') при разных значениях длины поезда ('''TL''') бессмысленно. Для оценки эффективности различных варинатов построения сети, требуется использовать другой измерительный показатель. Это будет мера того, сколько единиц груза сеть перевозит в год на путь. Она прямопропорциональна количеству груза на единицу клетки поезда, а также как быстро этот груз движется.


<pre>
CC_day = TC / ( TL + TG ) * v_travel
CC_day = TC / ( TL + TG ) * v_kmh * 74*2/16/256*1.00584
CC_day = TC / ( TL + TG ) * v_mph * 74*2/16/256/1.6
</pre>

'''CC_day''' = грузопоток [в единицах груза в день], показывает как много груза может пересечь клетку в течении одного дня. Это среднее значение груза подано в начале пути и доставлено к конечному пункту.

'''TC''' = вместимость поезда[в единицах груза], показывает, сколько груза входит в один поезд.

'''v_travel''' = скорость [в клетках/день], '''v_kmh''' = скорость [в км/ч] и '''v_mph''' = скорость [в милях/ч] скорость движения поезда.

'''TG''' = расстояние между поездами [в клетках]. Для схемы пути, которая не вводит поездов для формирования потока высокой плотности движения это критическое расстояние.

'''TL''' = длина поезда [в клетках].

Для поезда химера([[en/Manual/Base Set/Trains/Lev4 'Chimaera'|Chimaera]]):
<pre>CC_day=47*6*402/16*0,0056=40 Пассажиров/день 
или
CC_day=27*6*402/16*0,0056=23 Мешков с драгоценностями/день</pre>
Для поезда ТИМ ([[en/Manual/Base Set/Trains/T.I.M.]]):
<pre>CC_day=40*6*150/10*0,0056=20 Пассажиров/день
или
CC_day=20*6*150/10*0,0056=10 Мешков с драгоценностями/день</pre>

= Улучшение эффективности работы сети =
Итак, когда определены параметры, которые интуитивно понятны, можно использовать их для улучешния работы железнодорожной сети. Золотое правило №1 гласит, что поезда никогда не должны замедляться. Есть два возможных участка сети, где это может всё же произойти: разветвление пути и её слияние.

== Разветвление пути ==
При разветвления сети следует обеспечить, чтобы расстояние между сигналами не были бы больше, чем обычно. Это можно обеспечить тщательным размещением сигнализации. Иногда даже избыточным.

== Слияние путей == 
Слияние путей дают нам уникальные проблемы. При самом простом слиянии поезда, двигающиеся по магистральным путям, могут быть остановлены поездом с бокового пути. Есть некоторый объем работы на [http://www.openttdcoop.org/wiki/Priorities Приоритеты],составленный при сотрудничестве с нашими коллегами. Информация по ссылке дает представление о приоритете прохождения слияний путей.
Рассмотрим типичное, не пересекающееся слияние путей ны выходе из станции. Плотно упакованный поток поездов входит на станцию, на из-за раздичий во времени погрузки, этот порядок нарушается на выходе из станции , в итоге получаются два пути слабо упакованных поездов. Одна из линий, назовем её главной, будет иметь, в среднем, достаточно места между поездами, чтобы вместить между ними ещё и третий поезд. Обычное соединение двух линий вместе работать не будет, требуется знать приоритет слияния на путях.

Обратите внимание, что разгрузка товара всегда занимает одинаковое время, поэтому возможно расщепить, а затем заново собрать плотный поток поездов, даже при вышеупомянутой критической плотности движения. (рис. 5)
[[File:en/Community/Diamond Stream.png|thumb|800px|none|Рис. 5: Разгрузка плотного потока и его сборка заново]]


При прохождении первого слияния путей с приоритетом, при помощи приоритетного блока можно сократить соотношение трафика от 1:1 до  3: в пользу главного пути. (рис. 6). Добавление второго слияния пути сразу после первого было бы бесполезно, поскольку поезда на обеих линиях двигались бы с одинаковой скоротью, а поезда на главном пути требовали бы свой приоритет. Введение задержки потока при помощи петли пути с добавлением второго слияния путей с приоритетом позволит уменьшить количество поездов на боковой линии, что заполнит большую часть слотов на главном пути. Существующее рещение включает в себя предускорение поезда, но использование циклотрона избавит от необходимости терять импульс.
[[File:en/Community/Priority Merge.png|frame|none|Рис. 6: Слияние путей с приоритетом.]]

=== === Циклотроны
Рассмотрим боковой линии, что петли обратно на себя после неудачного приоритет слияния. Поезд в этом цикле будет продолжать повторное испытание магистральных для начальных условий, каждые 8 ​​*'''TL''плитки, пока не обнаружили место, достаточное, чтобы слиться с основной линией. После циклотрон был пустым, следующий ожидании поезда могли заранее ускорить и быть введен в циклотроне, готов продолжить цикл. Эта система имеет некоторые недостатки, однако, как это имеет вместимость одного поезда и там будет много упущенных возможностей из-за поезда находятся в неправильном положении в ускорителе. Дизайн фото [[en/Изображение/Simple Cyclotron.png | здесь]] для справки. Соединения являются крупные и хорошо проторенной области OpenTTD, я ограничился неразветвленной структуры подачи. Вы увидите, что высоко оптимизированной поток поездов НЕ погоды соединения хорошо.

Уточнения к циклотронной возможны. Существует достаточно места на трассе цикл содержит два поезда, а система приоритетных сигналов позволит второй поезд в желании ввести циклотрона. С двумя поездами в циклотроне, будет удвоить шансы вступления слот на магистрали. В целях предотвращения пробке внутри циклотрона (который будет иметь катастрофические последствия), некоторые задержки настройки необходимо, но конечным результатом является чрезвычайно полезным.

Инъекции задержка предполагает, что второй поезд вводится ускорение с места, и есть небольшой шанс, что второй поезд, по сути, случайно наткнулся вход циклотрона на полной скорости. В этом случае сроки будут не так и второго поезда будут почти наверняка вызовет варенье в циклотроне (и, следовательно, на основной линии). Это может быть компенсирована за счет дополнительной сигнализации для фильтрации на полной скорости поезда. Отфильтровываются на полной скорости поезда могут быть направлены либо на второй цикл, или просто высосана импульса сигнала.

[[File:en/Community/Junctionary/Cyclotron Full.png | пальца | Рисунок 5: полнофункциональная циклотрон]]
Циклотрона, включающий все оптимизации обсуждался, и некоторые дополнительные исправления, показан на рисунке 5.

Сохраненной игры, содержащий все методы, рассмотренные выше доступен [http://patrickthomson.ath.cx/cyclotron.sav Здесь] (версии 0.7 или выше, чтобы открыть). <br Style="clear:both;">

Примечание редактора: В то время я хотел бы защитить свои уточнения циклотрон, эксперимент доказал, что предварительное ускорение более надежной системе. Два были объединены в сохраненной игры связан ранее.
{{ru/Возможность| 0,7}}

=== Параллельная циклотронах ===
Попытка свести к минимуму недостатки полнофункциональный циклотрона приводит к параллельной, небольшие, 1-поезд циклотронов. В этом проекте, массив циклотронов, каждого поезда обработки одного, может подаваться одновременно. Они могут иметь различные размеры петли в целях предотвращения синхронизации между велосипедные поездов, давая больше шансов найти щель в потоке основной линии. Каждый цикл все еще нуждается в его собственной полосы ускорения так поездов входе в цикл на полной скорости. Если поезд случайно входе в цикл на низкой скорости, он получил бы шанс присоединиться к основной линии при не максимальная скорость и привести к возможно большим пробке.

[[File:en/Community/Junctionary/Parallel Cyclotron.png | пальца | справа | Рисунок 6: Параллельные циклотрон]]
На рисунке 6 показан параллельно циклотрон с двумя петлями.
 
Сохраненной игры с примера, приведенного на рисунке 6 доступен [http://gbizzotto.free.fr/parallel_cyclotron.sav Здесь] (версии 0.7 или выше, чтобы открыть).

Преимущества по сравнению с полнофункциональной циклотрона:
* Может обрабатывать более двух поездов
* Более быстрое сбоев и повторном темпам
* Нет необходимости синхронизации циклов поездов
* Легче построить и помнить

Недостатки:
* Больше при использовании более чем одной петле