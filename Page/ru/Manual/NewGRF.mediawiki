[[Translation:en/Manual/NewGRF]]
{{ru/Перевод|en/Manual/NewGRF|0}}
{{ru/Manual/Оглавление}}

NewGRF - это новый формат файла графических ресурсов (New Graphics Resource File), который предоставляет общий интерфейс для модифицирования игрового процесса. Не следует путать это с [[en/Community/NewGRF/Playing with 32 bpp graphics|заменой графики на 32-битную]], когда существующая 8-битная графика всего-лишь заменяется на другую, 32-битную.

'''NewGRF''' - это возможность добавить новые или изменить существующие графические элементы, транспортные средства, строения, типы грузов, типы железных дорог, объекты и предприятия в OpenTTD. Файлы NewGRF следует загрузить и активировать перед созданием новой игры, чтобы они вступили в силу. В отличии от [[en/Расширенных настроек]], которые можно менять в процессе игры, NewGRF должны быть установлены до начала новой игры в целях обеспечения их корректного функционирования. Название "NewGRF" указывает на наличие новых возможностей, добавленных в формат стандартного GRF-файла (файла графических ресурсов из оригинального Transport Tycoon), которые дают возможность изменять графику и поведение игры. NewGRF - общий для OpenTTD и [[en/Archive/OpenTTD/TTDPatch]] формат и практически полностью совместим с ними обоими.

Для получения ответов на общие вопросы обратитесь к [[en/Archive/Community/NewGRF FAQ| NewGRF FAQ]].


==Где взять файлы NewGRF==
=== Система загрузки онлайн-контента ===
Наиболее простой и удобный способ получения файлов NewGRF - использование встроенной [[en/Manual/Online content|системы загрузки онлайн-контента]], в которой можно найти большинство актуальных файлов NewGRF. Кроме того, существует [http://www.tt-forums.net/viewforum.php?f=26|форум разработчиков NewGRF], где можно найти находящиеся в разработке newgrf-ы.
=== Установка вручную ===
Если вы хотите использовать файлы NewGRF, полученные из других источников и не доступные в системе загрузки онлайн-контента, вы должны самостоятельно поместить их в правильное место. NewGRF - это один фыйл с расширением .grf, например, "grvts.grf". Для установки файла NewGRF:
#Загрузите NewGRF (файл с расширением .grf).
#Поместите файл NewGRF в папку данных в вашей инсталляции OpenTTD. Обычно это:
:C:\My Documents\data (Windows 95, 98, ME)
:C:\Documents and Settings\<username>\My Documents\OpenTTD\data (Windows 2000, XP)
:C:\Users\<username>\Documents\OpenTTD\data (Windows Vista, 7)
:~/.openttd/data (Linux, BSD)
:~/Documents/OpenTTD/data (OSX)

==Installing NewGRFs==
A NewGRF is a single file (with the extension .grf) for example: "grvts.grf". To install a NewGRF:
#Download the NewGRF (.grf) file.
#Move the NewGRF file to the data directory of your OpenTTD installation.
:*Они находятся здесь:
::"%UserProfile%\My documents\OpenTTD\Data" (Windows XP)
::"%UserProfile%\Documents\OpenTTD\Data" (Windows Vista)
::"C:/Program Files/OpenTTD/data" (Windows, game directory)
::"/usr/share/games/openttd/data/" (Linux) - root privileges necessary to write to this directory.
::"~/.openttd/data" (Linux) - you may need to create this directory first
::"~/Documents/OpenTTD/data" (OSX) - make directory /data

===Windows или DOS версия?===
Often, you are given a choice between a Windows and a DOS version of a NewGRF. Which one you need, depends on the original graphic files. If the origin of the original graphic files is a DOS version of TTD, you need a DOS version of a NewGRF. Similar, if you have the Windows version TTD files, you need a Windows version of a NewGRF.


If you don't know which version (DOS or Windows) you own, there's an easy way to figure that out. First, locate the OpenTTD Data directory, in which the original graphic files are stored. The file names reveal everything:
* DOS version: trg1.grf, trgc.grf, trgh.grf, trgi.grf, trgt.grf
* Windows version:  trg1r.grf, trgcr.grf, trghr.grf, trgir.grf, trgtr.grf (notice the extra 'r' before '.grf'.)

[[en/Archive/Community/OpenGFX Readme]] uses windows palette only.

If the wrong type of NewGRF is installed it will work, but the graphics will not appear correctly.

==Activating NewGRFs==
1.   Start OpenTTD.

2.   In the main menu, click "[[ru/Manual/Настройки NewGRF]]".
[[File:ru/Main window (NewGRF Settings).png|Main window (NewGRF Settings)|center]]
3.   Click "Add".
[[File:ru/Manual/NewGRF settings window (Add).png|NewGRF settings window (Add)|center]]
4.   Select the NewGRF file you want to use, then click "Add To Selection".
[[File:ru/Manual/Available NewGRF files window.png|Available NewGRF files window|center]]
5.   Click "Add" to add more NewGRFs, then "Apply Changes" when you are done.
[[File:ru/Manual/NewGRF settings window (Apply).png|NewGRF settings window (Apply)|center]]


Now, whenever you start a new game, the NewGRFs will be active, and whatever changes they make will become visible.

[[File:en/Manual/Newgrfexampless.png|thumb|300px|center|A screenshot showing use of newgrf files including UKRS and Newstations]]

===The other buttons===
'''NewGRF Settings window'''
*Add - Opens the Available NewGRF files window.
*Remove - Removes the selected NewGRF from the list of active NewGRFs.
*Move Up - Moves the selected GRF up in the order of active NewGRFs.
*Move Down - Moves the selected GRF down in the order of active NewGRFs.
*Set parameters - Sets NewGRF parameters, for example to set parameter 1 to 4, parameter 2 to 3 and parameter 3 to zero enter "4 3 0".
*Apply changes - Applies changes and exits the window.

The order of NewGRFs is important in determining how different NewGRFs interact. A NewGRF higher in the list overrides the effects of a NewGRF lower in the list.

'''Available NewGRF files window'''
*Add to selection - Adds the selected NewGRF to the list of active NewGRFs.
*Rescan files - OpenTTD only looks for NewGRF files when the game starts, this makes the game rescan the folder to check for new files.

===Activating NewGRFs in-game===
While new games will automatically use your newly installed .grf files, previously started games require the following steps to include your new graphics:

# Go to Game options>NewGRF settings.
# Add the desired NewGRFs.
# Say you are sure you want to make these changes in-game.
# Open the OpenTTD console with the ` key (key to the left of the "1" on most keyboards).
# Type in "resetengines".
# Press ` to close the console.

Note that even after typing “resetengines", your pre-existing vehicles will still be of the old type.  However, you should now be able to build the new types of vehicles from any of your depots.

==Configuration File==
An alternative way of specifying which NewGRF files to use is by directly altering the openttd.cfg configuration file. The steps to do this are as follows:
# Copy the new .grf file to the \data directory.
# Open the openttd.cfg file in the \ directory.
# Go to the end of the file and enter the following:

 [newgrf]
 firstset.grf
 secondset.grf
 thirdset.grf

Where firstset, secondset etc.. are the names of the .grf files of the set. The files are loaded in the specified order... so if secondset has some features that are also in firstset, the features of the first set would be overwritten.

Note that it is a good practice to put all the newgrf files to a directory such as \data\custom or \data\newgrf. It especially makes upgrading OpenTTD easier, as well as managing a large number of newgrf files.

Be careful when using subdirs of the data directory for storing custom newgrf files. You have to adjust the path in the openttd.cfg like \custom\newgrffile.grf if your "custom" folder is a subfolder of the OpenTTDs data folder.

=== Multiple combinations ===
If you want to configure more than one combination of sets you can do this:

 [newgrf]
 #COMBINATION 1
 firstset.grf
 secondset.grf
 #COMBINATION 2
 #another_firstset.grf
 #another_secondset.grf

Now you can switch between the combinations by removing the "#" from before one combination and add it to the other combination.

Words after # are treated just like a comment - they are skipped.

 [newgrf]
 #
 #Trains
 #
 firstset.grf
 secondset.grf
 #
 #Newstations
 #
 #thirdset.grf - I turned it off because it's buggy
 fourthset.grf
 #
 #Ships
 #
 fifthset.grf

I'm testing some combinations like "DBset + Arcticset", "Temperateset + Tropicset" and so on... for the moment the only combination that works well is "Temperateset + Arcticset" (note that this information can be obsolete and may not reflect the current state of things; please refer to the Forums for the current status).

===Parameters===

Some NewGRF files accept one or more parameters. See the [[ru/Manual/Настройки NewGRF]] article for information on adding parameters to a GRF file, or do the following in your openttd.cfg file:

 [newgrf]
 firstsetw.grf           # Doesn't require any parameters
 secondsetw.grf 5 3 1250 # Three parameters
 thirdsetw.grf=10        # Alternate form of providing parameters.

Note: As you can see, multiple NewGRF parameters are separated by spaces.

== NewGRF Compatibility and Features ==
NewGRF is originally a [[ru/Archive/OpenTTD/TTDPatch]] feature, and as such, the latest NewGRF features are not always available in OpenTTD.

What has to be done/is done next can be found in the [[en/NewGRF TODO]]. What has been done is in the [[en/NewGRF Features]] list..

== External links ==

Links to some downloadable GRF files (note that these are meant for [[ru/Archive/OpenTTD/TTDPatch]] and not all of them will work with OpenTTD, and that some of these are already included with OpenTTD - see ''[[en/NewGRF Features]]'' for what works with OpenTTD)


* [http://www.ttdpatch.net/newgrf.html TTDPatch] &mdash; A list of GRF files on the TTDPatch webpage.
* [http://wiki.ttdpatch.net/tiki-index.php?page=NewGraphicsSpecs NewGraphicSpecs] Specs of the GRF Format
* [http://www.tt-forums.net/viewtopic.php?t=9376 'NewGRF problems' forum topic].



[[Category:ru/Manual/Настройки и предпочтения]]
[[Category:en/NewGRF]]