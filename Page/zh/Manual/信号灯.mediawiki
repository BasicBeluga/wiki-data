[[Translation:en/Manual/Signals]]
{{zh/Manual/目录}}
''请参阅[[zh/建造信号灯|建造信号灯]]新手教程学习如何掌握信号灯的建设。''

'''[[zh/Manual/铁路建设|铁路]]信号灯'''可以让你控制[[zh/列车|列车]]的行动，是非常有用的设备。它们可以阻止一辆列车进入某个已经存在其他列车的区域，从而阻止相撞车祸的发生。这通常要涉及到从信号灯所管控的轨道段获取相关信息。有三种信号灯类型，区块信号灯只是简单地阻止任何列车进入已经存在列车的轨道段；预处理信号灯与其类似，但是要求轨道段必须要存在一个有效的出口；路线信号灯则对比当前车辆要行进的路线与已存在的列车所在的位置是否互有干扰，若无干扰则放行。

__TOC__
{{en/-}}
==区块信号灯==
区块信号灯将轨道分为多个区块，并依据列车在区块上的移动来改变状态。如果下一个区块中已经存在一辆列车，则区块信号灯会阻止当前列车，并亮红灯。如果下一个区块没有其他车，则亮绿灯并放行。轨道上任何从当前信号灯至下一个信号灯之间的全部轨道方块都被认作是同一个区块，无论是否存在多个道岔分支。就算当前车辆要走的路线和另外的列车并不会相撞，区块信号灯也不会允许当前列车进入这个区块，该行为正好和[[#lu-xian-xin-hao-deng|路线信号灯]]相反。

===双向信号灯===
[[File:en/Manual/2-way signals.png|frame|位于载货车站的双向信号灯]]
<div style="float:right">
[[File:en/Manual/Two-way signal.png]]
</div>
双向信号灯用在同一根铁轨两个方向都会有列车行进的铁路上。最常见的情形就是线路末端的车站，在这里列车进站和出站都是使用站点的同一侧进行。在右侧图片中的例子里，信号灯会引导下一列列车进入空的那一列车站装货，同时信号灯还可以在外面轨道上有车的情况下阻止站内的列车出站。

如果一列列车有两个以上的方向可以选择，每个方向都有一个双向信号灯的话，它会选择有绿灯的那个方向。如果所有的信号灯都是红灯，它会选择最近的路线并等待信号灯变成绿色。

双向信号灯是游戏中出现的第一种信号灯，并且在最初版本的“运输大亨”游戏中也是唯一可选的铁路信号灯类型。
{{en/-}}

===单向信号灯===
[[File:en/Manual/One-way signal.png|right]]

单向信号灯限制列车只能向一个方向行进。如下面例子所示，信号灯强制列车绕圈运行。

[[File:en/Manual/1-way signal loop.png|frame|center|绕圈的单向信号灯]]

有两种情况使得这些信号灯比单纯的区块信号灯更为好用：
*[[zh/建造铁路车站#dan-ti-che-zhan|RoRo车站]]允许列车停靠后无需调头出站并阻挡进站口。可以让列车进出站更为有效率。
*双条轨道线可以允许多于2列列车行进而不会让它们撞到一起。在单条轨道线上，如果有一列列车存在，那么就不能有别的车以反方向行进，因为它们最终肯定要撞到一起。在双条轨道线上任何列车都可以以一个方向行进，绝对不会撞在一起，同时也意味着它们无需等待其他列车，可以一直在那条线上行进。

假如一列车来到单向信号灯错误的一侧，它会立刻停车并掉头，除非玩家在高级信号灯选项里禁用了这一行为。在使用单向信号灯的情况下，要确保他们''都''面向正确的方向。一个好办法是观察在新设立的路线上的第一列车是否正常地行进到了终点，以确保你没有犯任何错误。

点击一个已经存在的双向信号灯会把其变为单向信号灯，再点击一次会改变其方向（依然还是单向的），第三次点击则会将其变回一个双向信号灯。

如果某列车有可选的轨道路线，每个都布有一个单向信号灯的话，它会选择通向它的目的地的那条轨道（也就是说它会等着直到那条轨道变为绿灯，而不是选择在一条轨道为红灯的情况随便选一条为绿灯的轨道行进）。这可以和双向信号灯做一个对比。

尽管单向信号灯看起来只有一面才有信号灯，但是严格来说，另外一面消失的信号灯依然存在，并且永远是红灯，以阻止从另一侧进入。该表象对于现实世界来说是不正确的，并且会在理解更为高级和真实的[[#lu-xian-xin-hao-deng|路线信号系统]]时误导玩家。

单向信号灯第一次出现在“运输大亨豪华版”中。

==预处理信号灯==
预处理信号灯是一组专门设计的区块信号灯。之所以这样命名是因为入口处的预处理信号灯的判断来源不仅仅来自于区块的轨道上，还要来自于区块的另一端（或者说是区块的出口处）。它们用于限制列车进入一块不能被占用或者被阻挡的区块。这样的例子包括车站进站/出站的交叉路口，或者用于双向列车行进的单条轨道线。任何一段线路上，如果多列列车必须共享一段数量有限的轨道区域，并且该区域不应该被阻挡时，就是预处理信号灯发挥作用的地方。

<div style="float:right">
[[File:en/Manual/Station no pre-signals.png|frame|right|仅用区块信号灯时存在的问题 - 左边的列车可能会先离开，于是后面等待的列车就会紧贴在右侧的列车身后一起卡在轨道上。]]
[[File:en/Manual/Station with pre-signals.png|frame|right|使用预处理信号灯解决问题]]
</div>
右上的图片展示了使用传统信号灯控制的车站的一个配置。如果至少有一个站台是空着的时候，这方案没有问题，任何一列进站的车总是会被导向至一个空站台。但是，想像一下如果全部站台都是满着的情况下，就像截图的那样。两个分岔路都是红灯，所以新来的列车就选择了最短的一条路 —— 直着开。但是假设在右侧站台的列车需要等上一会儿，此刻，左侧的列车先走了，新来的列车已经选好了一个站台，并且卡在了信号灯之间，就算现在已经有了一个空站台了，它还是要等着右侧的列车离开。我们需要在这列列车选择分岔之前就阻止它，这样它便可以在任何一列车离开站台后进入那个空站台。为了满足这个目标，我们需要使用预处理信号灯。

预处理信号灯和区块信号灯的行为一样，但是在决定要显示什么颜色的时候还要考虑同方向轨道下游的预处理信号灯的状态。明确点说，入口的预处理信号灯会在，并且只有在其轨道下游的出口信号灯至少有一个为绿灯时，才会显示为绿灯。而你，作为规划者，需要确定哪个预处理信号灯会作为入口灯，哪些是出口灯。

====区块入口预处理信号灯====
<div style="float:right">
[[File:en/Manual/Entry presignal.png|60px]]
</div>
入口预处理信号灯阻止列车进入其身后的区块，除非在区块的对面至少有一个出口灯亮为绿灯。这个就阻止了列车在没有有效出口的情况下进入区块，从而阻挡了这块区块。要记住车库有着一个内建的双向信号灯，如果处在一个预处理信号灯组中，它会作为一个入口预处理信号灯。

如果在区块的另一侧没有设立出口信号灯，入口信号灯的功能会和普通的区块信号灯一样。这在设计双向预处理信号灯而只有一个方向需要预处理信号灯的功能时很方便。

====区块出口预处理信号灯====
<div style="float:right">
[[File:en/Manual/Exit presignal.png|60px]]
</div>
出口预处理信号灯跟正常的区块信号灯功能一致，不过它提供用于在入口信号灯和组合信号灯上触发正确颜色的信息。应该在任何容易被阻挡的出口设立它们，例如车站站台处。
{{en/-}}

====组合信号灯====
[[File:en/Manual/Station with pre-signals2.png|frame|包含一个入口预处理信号灯，两个组合信号灯，以及四个出口信号灯的车站]]
<div style="float:right">
[[File:en/Manual/Combo presignal.png|60px]]
</div>
还有第三种预处理信号灯类型，叫做组合信号灯，其作用是同时扮演着入口信号灯和出口信号灯的角色。它们有效地组合多个出口信号灯成为一个信号灯，可以顺着传播下去。任何一个绿灯的出口信号灯都会让其上游的任何组合信号灯变为绿色，随后会一层层地传播上去直到最前端的入口信号灯。这就允许你构建一个庞大的预处理信号灯树，横跨多个区域，就如同右图展现的一样。

在一棵预处理信号灯树中，组合信号灯应被放置于入口信号灯与出口信号灯之间，另外的这两种信号灯应该被放在整个配置相应的最前端以及最末端。
{{en/-}}

====建造预处理信号灯====
要建造一个预处理信号灯，请在[[#xin-hao-deng-jie-mian|信号灯工具条]]上选择相应的按钮。

在之前的版本中，先放置一个普通的信号灯，然后按住“Ctrl”点击信号灯可以在不同的预处理信号灯中进行切换：
*要注意你可以使用建造传统单向信号灯的方式建造单向预处理信号灯。记住：按住“Ctrl”再点击可以切换（预处理）信号灯的类型，不按“Ctrl”点击则会更改信号灯的方向——如果信号灯界面未打开的话。
*记住不要在一开始放置信号灯的时候按“Ctrl”，否则你会得到一个悬臂式信号灯。反之，如果你打开了信号灯界面，则要按住“Ctrl”。

====限制====
[[File:en/Manual/PresignalLimitation.png|frame|预处理信号灯的问题……]]
很重要的一个问题是，如果出口信号灯是绿灯，就会触发入口信号灯也为绿灯，即便因为布局问题列车并没有办法从出口信号灯的位置出去（参考右侧的图片，从下面铁轨进来的列车实际上并没有办法从上面铁轨开出去）。这个很可能会连带影响更复杂的预处理信号灯配置，所以在规划的时候千万要小心。

有一个被标记为“不解决”的Bug是：迷路的列车会忽略（区块）的出口信号灯。如果列车迷路了，它会在每个岔路口随机挑选一条路，所以如果它忽略区块的出口信号灯的话，会很容易阻挡住使用预处理信号灯的岔道口。
{{en/-}}

==Path signals ==
[[File:zh/Manual/Yapp signalgui.png|frame|right|位于[[en/Manual/Signal GUI|信号灯工具条]]的两种新类型。]]

There is a new signal type, "path signal", to overcome the limitations of the original block based signalling of ''Transport Tycoon''. These signals enable trains to reserve a path through a block until the next signal, before entering the block. If another train wants to enter the block, and succeeds in reserving a path through the block, the path signal authorizes the train to enter the signal block, even if another track of the block is used at the same time, which is impossible with the traditional block signals only and/or pre-signals setup. It is entirely possible to build a sophisticated railway network with path signals only due to their better ability in preventing junction deadlock.

[[File:zh/Manual/Difference block path signals.png|frame|center|The most important difference between block signal setup and path signal setup as shown in this example: two parallel tracks are connected by a crossover.
<ul>
<li>In the block signal setup, the signal does not authorize the lower train to enter the signal block because it is currently occupied by the upper train, even though there is absolutely no risk of letting the lower train pass through it.</li>
<li>In the path signal setup, the lower train is authorized to pass through the junction as long as the upper train does not switch path from upper tracks to lower.</li>
</ul>]]

Path signalling is an attempt to simulate a more realistic [[en/Archive/Community/Realistic Path Based Signalling|path based signalling (PBS) system]] because:
# Real signal is constantly red and only green temporarily when a train approaches in front of it and the path ahead does not collide with the path of another train. In a realistic junction setup, it is possible to allow multiple trains in the intersection of same block to pass-by safely due to [https://www.wikipedia.org/wiki/railroad switch railroad switch] limiting which side of the junction the train can turn to.
# Exit-signal (either the generic block signal or exit-signal in the pre-signal setup) immediately after the intersection which is used to quickly free the intersection block for another train to enter in ''Transport Tycoon'' does not exist in real world signalling system because of the risk of the train getting stuck right on the junction, creating a deadlock.
# A single signal facing one side is not necessarily one-way in the real world (unless player is using the "one-way path signal" specifically to limit the passing direction). Train can still pass through the track with signal from behind as if there is no signal. As mentioned in the previous point, exit-signal does not exist in the real world. This is particularly important for a station with single sided entrance/exit in front of a junction, (non one-way) path signal is placed in front of the station exit, facing the station side.

Here is an example as illustration:
{|class=wikitable
!style="background:white"|Block signals far beyond the junction
!Block signals immediately after the junction
!style="background:white"|Path signal before the junction
|-
|style="background:white"|We have here a Y block among three signals.
The right track is used by a train. A train arrives from the lower track and wants to go to the left track. A standard block signal considers that all the block is occupied (even if the left track is free).
|A solution is to split this block into smaller blocks by adding signals after the junction. With two additional block signals, the''Y'' has been split into three blocks: right arm, left arm and junction.
|style="background:white"|On the contrary, the path signal authorizes the train coming from the bottom to enter the Y block, as the path it tries to reserve is free (the left track). No need to split the block into smaller blocks (i.e. no need for signals immediately after the junction).
|-
|style="background:white"|[[File:en/Manual/Signal bloc.png]]
Y block among three ''block signals''.
|[[File:en/Manual/Multiples standard.png]]
With two additional block signals, the Y has been split into three blocks: right arm, left arm and junction.
|style="background:white"|[[File:en/Manual/Chemin.png|Chemin.png]]
Y block between a ''path signal'' and two ''block signals''.
|}

There are two things you should know about this signal:
* Place it only where trains can stop and wait without blocking junctions ;
* This signal only works in one direction. In the other direction, it is either ignored or considered a one-way signal, depending on the signal path (see below).
{|class=wikitable style="width:600px; margin:auto"
|[[File:en/Manual/Yapp pbssignal.png]]
|'''Path Signal''' (PS): trains can pass through this signal from the back side. Not to be confused with the one-way (block) signal.
|-
|[[File:en/Manual/Yapp onewaypbssignal.png]]
|'''One-way Path Signal''' (1W PS): trains '''cannot''' pass through this signal from the back side, as if there is another signal facing the opposite side permanently red.
|}
Most of the time it will be sufficient to use a default path signal, as passing a path signal from the back is penalised by the pathfinder, unless the destination (station or waypoint) is right after the path signal facing backward. However, one-way path signals might be useful in certain specific cases.

The two new signal types behave a bit differently than standard block signal types. The path signals are red by default, and will only show green as soon as a train can reserve a path to the next safe waiting position on its route. Safe waiting positions are - by definition - in front of signals, depots and track ends. The back of a path signal is not considered a safe waiting position, and therefore paths are reserved through these signals.

Because the front of every signal is defined as a safe waiting position, you would normally not want to place a signal immediately behind a junction, only in front of a junction. This is because it is only safe for a train to wait in front of a junction. It is not safe for a a train to wait at a signal immediately after a junction before the whole train has cleared the junction, as it would be blocking the junction while waiting, as illustrated in the example below. This is a major advantage against traditional block signals, where you had to place signals before and after junctions, which caused trains to block junctions while waiting.
{|class=wikitable style="margin:auto"
|style="background:#fee"|[[File:en/Manual/Yapp unsafewaitinglocation.png|center]]
'''Bad''': The signal indicated by the arrow is a bad waiting location, as the train in the junction now blocks the otherwise free path of the train coming from the top. There's a second bad waiting location in this picture. Can you find it?
|style="background:#efe"|[[File:en/Manual/Yappgoodexample.png|center]]
'''Good''': Here there is enough space after the juction for a train to wait. As long as this space is unavailable, the next train will wait before the junction rather than blocking it. This allows the train coming from the top to proceed.
|}

This is one other example of what you can do with those path signals. This works far better than using pre-signals because you can have two trains leaving the station at the same time AND share the same depot (there is no way to make it with pre-signals, because of the block share). In this case there are one-way path signals for trains leaving the station, and simple path signal for trains leaving the depot.
[[File:en/Manual/Pathsignal station exit.png|frame|center|Two exit station. Note that the signals in front of the depot are not required, as depots have built-in signals. However, path signals in front of depots like this give trains leaving the depot priority over trains wanting to enter the depot.]]

Although the screen shot above does not show, it is unnecessary to place any signal between the pass-through station entrance and junction (effectively an "exit-signal" in the traditional block signal setup) if the signal of entrance tracks in front of the junction is path signal.

[[File:en/Manual/Rpbs img10.png|center|frame|Pass-through station does not require exit signal in front of the station entrance, if all signals are path signal type.]]

====Advanced Settings====
[[File:zh/Manual/Yapp patch-options.png|frame|right|YAPP高级设置]]
There are three new [[en/Archive/Manual/Settings/Advanced Settings]] related to path signals.

One option is to highlight reserved tracks. This option is useful to troubleshoot your path-signaled junctions, as you can see what paths trains have reserved through a junction.

The other two options control how the build signal tool should behave. You can set the signal type which should be built
by default when building a new signal with the signal tool and change which signal types should be cycled through on ctrl-clicking
an already existing signal.

There are a few more path signal related options which are not available through the Advanced Settings window. What these options are, and how to edit them is covered under [[en/Archive/Manual/Settings/Advanced path signal options & features]].

===Basic examples of path signals===
Below are some example track layouts which use the path signals. There are also [[en/Community/Junctionary/Advanced path signal layouts|Advanced track layouts]] that are not recommended for beginners.

====Basic junction====
This basic junction now has a much higher throughput because trains only have to wait for trains running on the same line. The train coming from the right (going up) would usually have to wait for other trains coming back from the left tracks. It would now only have to wait if it wishes to switch lines. Note the 6 bounding signals to the 'junction block', and 3 total path signals, one at each entryway.

[[File:en/Manual/Yapp basicjunction.png|frame|center|Basic junction for trains (optimised for 3-tile length). Path signals are present at all entries to the junction block. Note the use of normal signals on plain track.]]

====Basic two-way station====
With this station layout, trains can use both platforms when coming from either direction. Because path signals do not create blocks on their reverse, the train cannot enter until there is a clear path until the signal on the ''opposite'' side of the platform (which must include the platform space), allowing it to safely stop. Note that this setup could alternatively be replicated with a set of block-exit presignals in-front of the station.

[[File:en/Manual/Yapp basicstation.png|frame|center|Basic station.]]

{{en/Feature|0.7}}

==Directing trains==
Signals are intended to prevent trains from crashing into each other, and to help them choose between several track sections to the same destination. If you want to direct a train to a particular destination via a certain route, you should use [[en/Manual/Waypoints]].

==See Also==
* [[en/Community/Junctionary/Advanced signalling examples|Examples of advanced presignal setups]]
* [[en/Manual/Building depots]]
* [[:Category:en/Manual/Train Junctions]] for examples of complex junctions that take advantage of pre-signals.
* [http://www.darkcoding.net/misc/openttd-trains-and-signals-for-beginners-a-tutorial/ Signals for the complete beginner]
* [http://kokolokus.de/?s=blog&v=6 A tutorial written by domsson, on the forums] [http://www.tt-forums.net/viewtopic.php?f=29&t=51395 here]

[[Category:zh/铁路]]
[[Category:zh/建设]]